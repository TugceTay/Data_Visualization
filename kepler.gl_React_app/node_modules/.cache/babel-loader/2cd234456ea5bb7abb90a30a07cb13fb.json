{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getQuantileDomain = getQuantileDomain;\nexports.getOrdinalDomain = getOrdinalDomain;\nexports.getLinearDomain = getLinearDomain;\nexports.getLogDomain = getLogDomain;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _dataUtils = require(\"./data-utils\");\nvar _d3Array = require(\"d3-array\");\n\n// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * return quantile domain for an array of data\n * @type {typeof import('./data-scale-utils').getQuantileDomain}\n */\nfunction getQuantileDomain(data, valueAccessor, sortFunc) {\n  var values = typeof valueAccessor === 'function' ? data.map(valueAccessor) : data;\n  return values.filter(_dataUtils.notNullorUndefined).sort(sortFunc);\n}\n/**\n * return ordinal domain for a data container\n * @type {typeof import('./data-scale-utils').getOrdinalDomain}\n */\n\nfunction getOrdinalDomain(dataContainer, valueAccessor) {\n  var values = dataContainer.mapIndex(valueAccessor);\n  return (0, _dataUtils.unique)(values).filter(_dataUtils.notNullorUndefined).sort();\n}\n/**\n * return linear domain for an array of data\n * @type {typeof import('./data-scale-utils').getLinearDomain}\n */\n\nfunction getLinearDomain(data, valueAccessor) {\n  var range = typeof valueAccessor === 'function' ? (0, _d3Array.extent)(data, valueAccessor) : (0, _d3Array.extent)(data); // @ts-ignore\n\n  return range.map(function (d, i) {\n    return d === undefined ? i : d;\n  });\n}\n/**\n * return linear domain for an array of data. A log scale domain cannot contain 0\n * @type {typeof import('./data-scale-utils').getLogDomain}\n */\n\nfunction getLogDomain(data, valueAccessor) {\n  var _getLinearDomain = getLinearDomain(data, valueAccessor),\n    _getLinearDomain2 = (0, _slicedToArray2[\"default\"])(_getLinearDomain, 2),\n    d0 = _getLinearDomain2[0],\n    d1 = _getLinearDomain2[1];\n  return [d0 === 0 ? 1e-5 : d0, d1];\n}","map":{"version":3,"sources":["../../src/utils/data-scale-utils.js"],"names":["getQuantileDomain","data","valueAccessor","sortFunc","values","map","filter","notNullorUndefined","sort","getOrdinalDomain","dataContainer","mapIndex","getLinearDomain","range","d","i","undefined","getLogDomain","d0","d1"],"mappings":";;;;;;;;;;;AAoBA,IAAA,UAAA,GAAA,OAAA,CAAA,cAAA,CAAA;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AArBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACO,SAASA,iBAAT,CAA2BC,IAA3B,EAAiCC,aAAjC,EAAgDC,QAAhD,EAA0D;EAC/D,IAAMC,MAAM,GAAG,OAAOF,aAAP,KAAyB,UAAzB,GAAsCD,IAAI,CAACI,GAALJ,CAASC,aAATD,CAAtC,GAAgEA,IAA/E;EAEA,OAAOG,MAAM,CAACE,MAAPF,CAAcG,UAAAA,CAAAA,kBAAdH,CAAAA,CAAkCI,IAAlCJ,CAAuCD,QAAvCC,CAAP;AACD;AAED;AACA;AACA;AACA;;AACO,SAASK,gBAAT,CAA0BC,aAA1B,EAAyCR,aAAzC,EAAwD;EAC7D,IAAME,MAAM,GAAGM,aAAa,CAACC,QAAdD,CAAuBR,aAAvBQ,CAAf;EAEA,OAAO,CAAA,CAAA,EAAA,UAAA,CAAA,MAAA,EAAON,MAAP,CAAA,CACJE,MADI,CACGC,UAAAA,CAAAA,kBADH,CAAA,CAEJC,IAFI,EAAP;AAGD;AAED;AACA;AACA;AACA;;AACO,SAASI,eAAT,CAAyBX,IAAzB,EAA+BC,aAA/B,EAA8C;EACnD,IAAMW,KAAK,GAAG,OAAOX,aAAP,KAAyB,UAAzB,GAAsC,CAAA,CAAA,EAAA,QAAA,CAAA,MAAA,EAAOD,IAAP,EAAaC,aAAb,CAAtC,GAAoE,CAAA,CAAA,EAAA,QAAA,CAAA,MAAA,EAAOD,IAAP,CAAlF,CADmD,CAEnD;;EACA,OAAO,KAAK,CAACI,GAAN,CAAU,UAACS,CAAD,EAAIC,CAAJ,EAAA;IAAA,OAAWD,CAAC,KAAKE,SAANF,GAAkBC,CAAlBD,GAAsBA,CAAjC;EAAA,CAAV,CAAP;AACD;AAED;AACA;AACA;AACA;;AACO,SAASG,YAAT,CAAsBhB,IAAtB,EAA4BC,aAA5B,EAA2C;EAAA,IAAA,gBAAA,GAC/BU,eAAe,CAACX,IAAD,EAAOC,aAAP,CADgB;IAAA,iBAAA,GAAA,CAAA,CAAA,EAAA,eAAA,CAAA,SAAA,CAAA,EAAA,gBAAA,EAAA,CAAA,CAAA;IACzCgB,EADyC,GAAA,iBAAA,CAAA,CAAA,CAAA;IACrCC,EADqC,GAAA,iBAAA,CAAA,CAAA,CAAA;EAEhD,OAAO,CAACD,EAAE,KAAK,CAAPA,GAAW,IAAXA,GAAkBA,EAAnB,EAAuBC,EAAvB,CAAP;AACD","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {notNullorUndefined, unique} from './data-utils';\nimport {extent} from 'd3-array';\n\n/**\n * return quantile domain for an array of data\n * @type {typeof import('./data-scale-utils').getQuantileDomain}\n */\nexport function getQuantileDomain(data, valueAccessor, sortFunc) {\n  const values = typeof valueAccessor === 'function' ? data.map(valueAccessor) : data;\n\n  return values.filter(notNullorUndefined).sort(sortFunc);\n}\n\n/**\n * return ordinal domain for a data container\n * @type {typeof import('./data-scale-utils').getOrdinalDomain}\n */\nexport function getOrdinalDomain(dataContainer, valueAccessor) {\n  const values = dataContainer.mapIndex(valueAccessor);\n\n  return unique(values)\n    .filter(notNullorUndefined)\n    .sort();\n}\n\n/**\n * return linear domain for an array of data\n * @type {typeof import('./data-scale-utils').getLinearDomain}\n */\nexport function getLinearDomain(data, valueAccessor) {\n  const range = typeof valueAccessor === 'function' ? extent(data, valueAccessor) : extent(data);\n  // @ts-ignore\n  return range.map((d, i) => (d === undefined ? i : d));\n}\n\n/**\n * return linear domain for an array of data. A log scale domain cannot contain 0\n * @type {typeof import('./data-scale-utils').getLogDomain}\n */\nexport function getLogDomain(data, valueAccessor) {\n  const [d0, d1] = getLinearDomain(data, valueAccessor);\n  return [d0 === 0 ? 1e-5 : d0, d1];\n}\n"]},"metadata":{},"sourceType":"script"}