{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\nvar _layerTypeDropdownList = _interopRequireDefault(require(\"./layer-type-dropdown-list\"));\nvar _layerTypeListItem = _interopRequireDefault(require(\"./layer-type-list-item\"));\nvar _itemSelector = _interopRequireDefault(require(\"../../common/item-selector/item-selector\"));\nvar _styledComponents2 = require(\"../../common/styled-components\");\nvar _templateObject;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nvar propTypes = {\n  layer: _propTypes[\"default\"].object.isRequired,\n  onSelect: _propTypes[\"default\"].func.isRequired\n};\nvar StyledLayerTypeSelector = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  .item-selector .item-selector__dropdown {\\n    padding: 4px 10px 4px 2px;\\n  }\\n\"])));\nLayerTypeSelectorFactory.deps = [_layerTypeListItem[\"default\"], _layerTypeDropdownList[\"default\"]];\nvar getDisplayOption = function getDisplayOption(op) {\n  return op.label;\n};\nvar getOptionValue = function getOptionValue(op) {\n  return op.id;\n};\nfunction LayerTypeSelectorFactory(LayerTypeListItem, LayerTypeDropdownList) {\n  var LayerTypeSelector = function LayerTypeSelector(_ref) {\n    var layer = _ref.layer,\n      layerTypeOptions = _ref.layerTypeOptions,\n      onSelect = _ref.onSelect,\n      datasets = _ref.datasets;\n    var hasData = (0, _react.useMemo)(function () {\n      return Boolean(Object.keys(datasets).length);\n    }, [datasets]);\n    var typeOptions = (0, _react.useMemo)(function () {\n      return layerTypeOptions.map(function (op) {\n        return _objectSpread(_objectSpread({}, op), {}, {\n          disabled: !hasData && op.requireData !== false\n        });\n      });\n    }, [hasData, layerTypeOptions]);\n    var selectedItems = (0, _react.useMemo)(function () {\n      return typeOptions.find(function (op) {\n        return op.id === layer.type;\n      });\n    }, [typeOptions, layer.type]);\n    return /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.SidePanelSection, null, /*#__PURE__*/_react[\"default\"].createElement(StyledLayerTypeSelector, {\n      className: \"layer-config__type\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_itemSelector[\"default\"], {\n      selectedItems: selectedItems,\n      options: typeOptions,\n      multiSelect: false,\n      placeholder: \"placeholder.selectType\",\n      onChange: onSelect,\n      getOptionValue: getOptionValue,\n      filterOption: \"label\",\n      displayOption: getDisplayOption,\n      DropDownLineItemRenderComponent: LayerTypeListItem,\n      DropDownRenderComponent: LayerTypeDropdownList\n    })));\n  };\n  LayerTypeSelector.propTypes = propTypes;\n  return (0, _styledComponents.withTheme)(LayerTypeSelector);\n}\nvar _default = LayerTypeSelectorFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../../src/components/side-panel/layer-panel/layer-type-selector.js"],"names":["propTypes","layer","PropTypes","object","isRequired","onSelect","func","StyledLayerTypeSelector","styled","div","LayerTypeSelectorFactory","deps","LayerTypeListItemFactory","LayerTypeDropdownListFactory","getDisplayOption","op","label","getOptionValue","id","LayerTypeListItem","LayerTypeDropdownList","LayerTypeSelector","layerTypeOptions","datasets","hasData","Boolean","Object","keys","length","typeOptions","map","disabled","requireData","selectedItems","find","type"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useMemo} from 'react';\nimport PropTypes from 'prop-types';\nimport styled, {withTheme} from 'styled-components';\n\nimport LayerTypeDropdownListFactory from './layer-type-dropdown-list';\nimport LayerTypeListItemFactory from './layer-type-list-item';\nimport ItemSelector from 'components/common/item-selector/item-selector';\n\nimport {SidePanelSection} from 'components/common/styled-components';\n\nconst propTypes = {\n  layer: PropTypes.object.isRequired,\n  onSelect: PropTypes.func.isRequired\n};\n\nconst StyledLayerTypeSelector = styled.div`\n  .item-selector .item-selector__dropdown {\n    padding: 4px 10px 4px 2px;\n  }\n`;\n\nLayerTypeSelectorFactory.deps = [LayerTypeListItemFactory, LayerTypeDropdownListFactory];\n\nconst getDisplayOption = op => op.label;\nconst getOptionValue = op => op.id;\n\nfunction LayerTypeSelectorFactory(LayerTypeListItem, LayerTypeDropdownList) {\n  const LayerTypeSelector = ({layer, layerTypeOptions, onSelect, datasets}) => {\n    const hasData = useMemo(() => Boolean(Object.keys(datasets).length), [datasets]);\n    const typeOptions = useMemo(\n      () =>\n        layerTypeOptions.map(op => ({\n          ...op,\n          disabled: !hasData && op.requireData !== false\n        })),\n      [hasData, layerTypeOptions]\n    );\n\n    const selectedItems = useMemo(() => typeOptions.find(op => op.id === layer.type), [\n      typeOptions,\n      layer.type\n    ]);\n\n    return (\n      <SidePanelSection>\n        <StyledLayerTypeSelector className=\"layer-config__type\">\n          <ItemSelector\n            selectedItems={selectedItems}\n            options={typeOptions}\n            multiSelect={false}\n            placeholder=\"placeholder.selectType\"\n            onChange={onSelect}\n            getOptionValue={getOptionValue}\n            filterOption=\"label\"\n            displayOption={getDisplayOption}\n            DropDownLineItemRenderComponent={LayerTypeListItem}\n            DropDownRenderComponent={LayerTypeDropdownList}\n          />\n        </StyledLayerTypeSelector>\n      </SidePanelSection>\n    );\n  };\n\n  LayerTypeSelector.propTypes = propTypes;\n\n  return withTheme(LayerTypeSelector);\n}\n\nexport default LayerTypeSelectorFactory;\n"]},"metadata":{},"sourceType":"script"}