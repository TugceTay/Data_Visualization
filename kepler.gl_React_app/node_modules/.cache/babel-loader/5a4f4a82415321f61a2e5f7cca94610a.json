{"ast":null,"code":"import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get x() {\n    return this[0];\n  }\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n  get y() {\n    return this[1];\n  }\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n  magnitude() {\n    return this.len();\n  }\n  lengthSquared() {\n    let length = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n    return length;\n  }\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n  distanceSquared(mathArray) {\n    let length = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n    return checkNumber(length);\n  }\n  dot(mathArray) {\n    let product = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n    return checkNumber(product);\n  }\n  normalize() {\n    const length = this.magnitude();\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n    return this.check();\n  }\n  multiply() {\n    for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n      vectors[_key] = arguments[_key];\n    }\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n    return this.check();\n  }\n  divide() {\n    for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      vectors[_key2] = arguments[_key2];\n    }\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n    return this.check();\n  }\n  lengthSq() {\n    return this.lengthSquared();\n  }\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n}","map":{"version":3,"sources":["../../../../src/classes/base/vector.ts"],"names":["MathArray","checkNumber","assert","Vector","x","value","y","len","Math","sqrt","lengthSquared","magnitude","length","i","ELEMENTS","magnitudeSquared","distance","mathArray","distanceSquared","dist","dot","product","normalize","check","multiply","vectors","vector","divide","lengthSq","distanceTo","distanceToSquared","getComponent","setComponent","addVectors","a","b","copy","add","subVectors","subtract","multiplyVectors","addScaledVector","constructor","multiplyScalar"],"mappings":"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","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n// MIT License\nimport {NumericArray} from '@math.gl/types';\nimport MathArray from './math-array';\nimport {checkNumber} from '../../lib/validators';\nimport assert from '../../lib/assert';\n\n/** Base class for vectors with at least 2 elements */\nexport default abstract class Vector extends MathArray {\n  // ACCESSORS\n\n  get x(): number {\n    return this[0];\n  }\n\n  set x(value: number) {\n    this[0] = checkNumber(value);\n  }\n\n  get y(): number {\n    return this[1];\n  }\n\n  set y(value: number) {\n    this[1] = checkNumber(value);\n  }\n\n  /**\n   * Returns the length of the vector from the origin to the point described by this vector\n   *\n   * @note `length` is a reserved word for Arrays, so `v.length()` will return number of elements\n   * Instead we provide `len` and `magnitude`\n   */\n  len(): number {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  /**\n   * Returns the length of the vector from the origin to the point described by this vector\n   */\n  magnitude(): number {\n    return this.len();\n  }\n\n  /**\n   * Returns the squared length of the vector from the origin to the point described by this vector\n   */\n  lengthSquared(): number {\n    let length = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n    return length;\n  }\n\n  /**\n   * Returns the squared length of the vector from the origin to the point described by this vector\n   */\n  magnitudeSquared(): number {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray: Readonly<NumericArray>): number {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray: Readonly<NumericArray>): number {\n    let length = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n    return checkNumber(length);\n  }\n\n  dot(mathArray: Readonly<NumericArray>): number {\n    let product = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n    return checkNumber(product);\n  }\n\n  // MODIFIERS\n\n  normalize(): this {\n    const length = this.magnitude();\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n    return this.check();\n  }\n\n  multiply(...vectors: Readonly<NumericArray>[]): this {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n    return this.check();\n  }\n\n  divide(...vectors: Readonly<NumericArray>[]): this {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n    return this.check();\n  }\n\n  // THREE.js compatibility\n\n  lengthSq(): number {\n    return this.lengthSquared();\n  }\n  distanceTo(vector: Readonly<NumericArray>): number {\n    return this.distance(vector);\n  }\n  distanceToSquared(vector: Readonly<NumericArray>): number {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i: number): number {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i: number, value: number): this {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a: Readonly<NumericArray>, b: Readonly<NumericArray>): this {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a: Readonly<NumericArray>, b: Readonly<NumericArray>): this {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a: Readonly<NumericArray>, b: Readonly<NumericArray>): this {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a: Readonly<NumericArray>, b: number): this {\n    // @ts-expect-error error TS2351: Cannot use 'new' with an expression whose type lacks a call or construct signature.\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}