{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.findClosestPointOnLineSegment = findClosestPointOnLineSegment;\nexports.isNumeric = isNumeric;\nexports.parseElemDataAttributes = parseElemDataAttributes;\nfunction inBounds(p1, p2, p) {\n  var bounds = [Math.min(p1[0], p2[0]), Math.max(p1[0], p2[0]), Math.min(p1[1], p2[1]), Math.max(p1[1], p2[1])];\n  return p[0] >= bounds[0] && p[0] <= bounds[1] && p[1] >= bounds[2] && p[1] <= bounds[3];\n}\nfunction findClosestPointOnLineSegment(p1, p2, p) {\n  // line\n  var k = (p2[1] - p1[1]) / (p2[0] - p1[0]);\n  var b = p1[1] - k * p1[0]; // vertical line\n\n  if (!isFinite(k)) {\n    var q = [p1[0], p[1]];\n    return inBounds(p1, p2, q) ? q : null;\n  } // p is on line [p1, p2]\n\n  if (p[0] * k + b - p[1] === 0) {\n    return inBounds(p1, p2, p) ? p : null;\n  }\n  var qx = (k * p[1] + p[0] - k * b) / (k * k + 1);\n  var qy = k * qx + b;\n  return inBounds(p1, p2, [qx, qy]) ? [qx, qy] : null;\n}\nfunction isNumeric(n) {\n  return !Array.isArray(n) && !isNaN(parseFloat(n)) && isFinite(n);\n}\nfunction parseElemDataAttributes(elem) {\n  var data = elem && elem.dataset;\n  if (!data) {\n    return null;\n  }\n  var featureIndex = data.featureIndex;\n  var vertexIndex = data.vertexIndex;\n  return {\n    type: data.type,\n    operation: data.operation,\n    featureIndex: isNumeric(featureIndex) ? Number(featureIndex) : undefined,\n    vertexIndex: isNumeric(vertexIndex) ? Number(vertexIndex) : undefined\n  };\n}","map":{"version":3,"sources":["../src/utils.js"],"names":["inBounds","p1","p2","p","bounds","Math","min","max","findClosestPointOnLineSegment","k","b","isFinite","q","qx","qy","isNumeric","n","Array","isArray","isNaN","parseFloat","parseElemDataAttributes","elem","data","dataset","featureIndex","vertexIndex","type","operation","Number","undefined"],"mappings":"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","sourcesContent":["// @flow\n\nfunction inBounds(p1: number[], p2: number[], p: number[]) {\n  const bounds = [\n    Math.min(p1[0], p2[0]),\n    Math.max(p1[0], p2[0]),\n    Math.min(p1[1], p2[1]),\n    Math.max(p1[1], p2[1])\n  ];\n\n  return p[0] >= bounds[0] && p[0] <= bounds[1] && p[1] >= bounds[2] && p[1] <= bounds[3];\n}\n\nexport function findClosestPointOnLineSegment(p1: number[], p2: number[], p: number[]) {\n  // line\n  const k = (p2[1] - p1[1]) / (p2[0] - p1[0]);\n  const b = p1[1] - k * p1[0];\n\n  // vertical line\n  if (!isFinite(k)) {\n    const q = [p1[0], p[1]];\n    return inBounds(p1, p2, q) ? q : null;\n  }\n\n  // p is on line [p1, p2]\n  if (p[0] * k + b - p[1] === 0) {\n    return inBounds(p1, p2, p) ? p : null;\n  }\n\n  const qx = (k * p[1] + p[0] - k * b) / (k * k + 1);\n  const qy = k * qx + b;\n\n  return inBounds(p1, p2, [qx, qy]) ? [qx, qy] : null;\n}\n\nexport function isNumeric(n: any) {\n  return !Array.isArray(n) && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\nexport function parseElemDataAttributes(elem: HTMLElement) {\n  const data = elem && elem.dataset;\n  if (!data) {\n    return null;\n  }\n\n  const featureIndex = data.featureIndex;\n  const vertexIndex = data.vertexIndex;\n\n  return {\n    type: data.type,\n    operation: data.operation,\n    featureIndex: isNumeric(featureIndex) ? Number(featureIndex) : undefined,\n    vertexIndex: isNumeric(vertexIndex) ? Number(vertexIndex) : undefined\n  };\n}\n"]},"metadata":{},"sourceType":"script"}