{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reactIntl = require(\"react-intl\");\nvar _styledComponents = require(\"../../common/styled-components\");\nvar _infoHelper = _interopRequireDefault(require(\"../../common/info-helper\"));\nvar _dimensionScaleSelector = _interopRequireDefault(require(\"./dimension-scale-selector\"));\nvar _utils = require(\"../../../utils/utils\");\nvar _fieldSelector = _interopRequireDefault(require(\"../../common/field-selector\"));\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nVisConfigByFieldSelectorFactory.deps = [_infoHelper[\"default\"], _fieldSelector[\"default\"]];\nfunction VisConfigByFieldSelectorFactory(InfoHelper, FieldSelector) {\n  var VisConfigByFieldSelector = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(VisConfigByFieldSelector, _Component);\n    var _super = _createSuper(VisConfigByFieldSelector);\n    function VisConfigByFieldSelector() {\n      var _this;\n      (0, _classCallCheck2[\"default\"])(this, VisConfigByFieldSelector);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_updateVisByField\", function (val) {\n        _this.props.updateField(val);\n      });\n      return _this;\n    }\n    (0, _createClass2[\"default\"])(VisConfigByFieldSelector, [{\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n          property = _this$props.property,\n          showScale = _this$props.showScale,\n          selectedField = _this$props.selectedField,\n          description = _this$props.description,\n          label = _this$props.label,\n          intl = _this$props.intl,\n          _this$props$scaleOpti = _this$props.scaleOptions,\n          scaleOptions = _this$props$scaleOpti === void 0 ? [] : _this$props$scaleOpti;\n        return /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.PanelLabelWrapper, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.PanelLabel, null, label && /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n          id: label\n        }) || /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n          id: \"layer.propertyBasedOn\",\n          values: {\n            property: intl.formatMessage({\n              id: \"property.\".concat((0, _utils.camelize)(property)),\n              defaultMessage: property\n            })\n          }\n        })), description && /*#__PURE__*/_react[\"default\"].createElement(InfoHelper, {\n          description: description,\n          property: property,\n          id: \"\".concat(this.props.id, \"-\").concat(property)\n        })), /*#__PURE__*/_react[\"default\"].createElement(FieldSelector, {\n          fields: this.props.fields,\n          value: selectedField && selectedField.name,\n          placeholder: this.props.placeholder,\n          onSelect: this._updateVisByField,\n          erasable: true\n        })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, showScale ? /*#__PURE__*/_react[\"default\"].createElement(_dimensionScaleSelector[\"default\"], {\n          scaleType: this.props.scaleType,\n          options: scaleOptions,\n          label: \"\".concat(property, \" scale\"),\n          onSelect: this.props.updateScale,\n          disabled: scaleOptions.length < 2\n        }) : null));\n      }\n    }]);\n    return VisConfigByFieldSelector;\n  }(_react.Component);\n  (0, _defineProperty2[\"default\"])(VisConfigByFieldSelector, \"propTypes\", {\n    channel: _propTypes[\"default\"].string.isRequired,\n    fields: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any).isRequired,\n    id: _propTypes[\"default\"].string.isRequired,\n    property: _propTypes[\"default\"].string.isRequired,\n    showScale: _propTypes[\"default\"].bool.isRequired,\n    updateField: _propTypes[\"default\"].func.isRequired,\n    updateScale: _propTypes[\"default\"].func.isRequired,\n    // optional\n    scaleType: _propTypes[\"default\"].string,\n    selectedField: _propTypes[\"default\"].object,\n    description: _propTypes[\"default\"].string,\n    label: _propTypes[\"default\"].string,\n    placeholder: _propTypes[\"default\"].string\n  });\n  return (0, _reactIntl.injectIntl)(VisConfigByFieldSelector);\n}\nvar _default = VisConfigByFieldSelectorFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../../src/components/side-panel/layer-panel/vis-config-by-field-selector.js"],"names":["VisConfigByFieldSelectorFactory","deps","InfoHelperFacotry","FieldSelectorFactory","InfoHelper","FieldSelector","VisConfigByFieldSelector","Component","channel","PropTypes","string","isRequired","fields","arrayOf","any","id","property","showScale","bool","updateField","func","updateScale","scaleType","selectedField","object","description","label","placeholder","props","val","intl","scaleOptions","formatMessage","defaultMessage","name","_updateVisByField","length"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage, injectIntl} from 'react-intl';\n\nimport {PanelLabel, PanelLabelWrapper, SidePanelSection} from 'components/common/styled-components';\nimport InfoHelperFacotry from 'components/common/info-helper';\nimport DimensionScaleSelector from './dimension-scale-selector';\nimport {camelize} from 'utils/utils';\nimport FieldSelectorFactory from '../../common/field-selector';\n\nVisConfigByFieldSelectorFactory.deps = [InfoHelperFacotry, FieldSelectorFactory];\nfunction VisConfigByFieldSelectorFactory(InfoHelper, FieldSelector) {\n  class VisConfigByFieldSelector extends Component {\n    static propTypes = {\n      channel: PropTypes.string.isRequired,\n      fields: PropTypes.arrayOf(PropTypes.any).isRequired,\n      id: PropTypes.string.isRequired,\n      property: PropTypes.string.isRequired,\n      showScale: PropTypes.bool.isRequired,\n      updateField: PropTypes.func.isRequired,\n      updateScale: PropTypes.func.isRequired,\n\n      // optional\n      scaleType: PropTypes.string,\n      selectedField: PropTypes.object,\n      description: PropTypes.string,\n      label: PropTypes.string,\n      placeholder: PropTypes.string\n    };\n\n    _updateVisByField = val => {\n      this.props.updateField(val);\n    };\n\n    render() {\n      const {\n        property,\n        showScale,\n        selectedField,\n        description,\n        label,\n        intl,\n        scaleOptions = []\n      } = this.props;\n\n      return (\n        <SidePanelSection>\n          <SidePanelSection>\n            <PanelLabelWrapper>\n              <PanelLabel>\n                {(label && <FormattedMessage id={label} />) || (\n                  <FormattedMessage\n                    id=\"layer.propertyBasedOn\"\n                    values={{\n                      property: intl.formatMessage({\n                        id: `property.${camelize(property)}`,\n                        defaultMessage: property\n                      })\n                    }}\n                  />\n                )}\n              </PanelLabel>\n              {description && (\n                <InfoHelper\n                  description={description}\n                  property={property}\n                  id={`${this.props.id}-${property}`}\n                />\n              )}\n            </PanelLabelWrapper>\n            <FieldSelector\n              fields={this.props.fields}\n              value={selectedField && selectedField.name}\n              placeholder={this.props.placeholder}\n              onSelect={this._updateVisByField}\n              erasable\n            />\n          </SidePanelSection>\n          <div>\n            {showScale ? (\n              <DimensionScaleSelector\n                scaleType={this.props.scaleType}\n                options={scaleOptions}\n                label={`${property} scale`}\n                onSelect={this.props.updateScale}\n                disabled={scaleOptions.length < 2}\n              />\n            ) : null}\n          </div>\n        </SidePanelSection>\n      );\n    }\n  }\n  return injectIntl(VisConfigByFieldSelector);\n}\n\nexport default VisConfigByFieldSelectorFactory;\n"]},"metadata":{},"sourceType":"script"}