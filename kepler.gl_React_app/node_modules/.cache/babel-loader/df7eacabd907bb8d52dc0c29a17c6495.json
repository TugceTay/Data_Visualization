{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.ProviderSelect = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _loadingDialog = _interopRequireDefault(require(\"./loading-dialog\"));\nvar _styledComponents2 = require(\"../common/styled-components\");\nvar _cloudTile = _interopRequireDefault(require(\"./cloud-tile\"));\nvar _icons = require(\"../common/icons\");\nvar _providerModalContainer = _interopRequireDefault(require(\"./provider-modal-container\"));\nvar _localization = require(\"../../localization\");\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9;\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar StyledProviderSection = _styledComponents[\"default\"].div.attrs({\n  className: 'provider-selection'\n})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n\"])));\nvar StyledSpinner = _styledComponents[\"default\"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  text-align: center;\\n  span {\\n    margin: 0 auto;\\n  }\\n\"])));\nvar StyledVisualizationSection = _styledComponents[\"default\"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: stretch;\\n\"])));\nvar StyledStorageHeader = _styledComponents[\"default\"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 16px;\\n  font-size: 12px;\\n  line-height: 14px;\\n\"])));\nvar StyledBackBtn = _styledComponents[\"default\"].a(_templateObject5 || (_templateObject5 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  margin-bottom: 16px;\\n  color: #3a414c;\\n  cursor: pointer;\\n\\n  &:hover {\\n    font-weight: 500;\\n  }\\n\"])));\nvar StyledProviderVisSection = _styledComponents[\"default\"].div(_templateObject6 || (_templateObject6 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  flex: 1 1 auto;\\n  background-color: #f8f8f9;\\n  padding: 20px 24px;\\n  min-height: 280px;\\n\\n  .title {\\n    font-size: 14px;\\n    line-height: 16px;\\n    font-weight: 500;\\n    margin-bottom: 16px;\\n\\n    span {\\n      text-transform: capitalize;\\n    }\\n  }\\n\"])));\nvar StyledSeparator = _styledComponents[\"default\"].hr(_templateObject7 || (_templateObject7 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  border: solid #bfbfbf;\\n  border-width: 0 0 1px 0;\\n  margin-bottom: 16px;\\n\"])));\nvar StyledVisualizationList = _styledComponents[\"default\"].div(_templateObject8 || (_templateObject8 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  flex-flow: row wrap;\\n  align-items: stretch;\\n  justify-content: space-between;\\n\"])));\nvar StyledVisualizationItem = _styledComponents[\"default\"].div(_templateObject9 || (_templateObject9 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  flex: 0 0 auto;\\n  width: 208px;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 16px 8px;\\n  color: #3a414c;\\n  cursor: pointer;\\n  font-size: 12px;\\n  line-height: 18px;\\n\\n  &:hover {\\n    .vis_item-icon,\\n    .vis_item-thumb,\\n    .vis_item-description,\\n    .vis_item-modification-date {\\n      opacity: 1;\\n    }\\n  }\\n\\n  .vis_item-icon,\\n  .vis_item-thumb,\\n  .vis_item-description,\\n  .vis_item-modification-date {\\n    opacity: 0.9;\\n    transition: opacity 0.4s ease;\\n  }\\n\\n  .vis_item-icon {\\n    position: relative;\\n    flex: 0 0 108px;\\n    background-color: #6a7484;\\n    border-radius: 4px;\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n\\n  .vis_item-thumb {\\n    position: relative;\\n    flex: 0 0 108px;\\n    background-size: cover;\\n    background-position: center;\\n    border-radius: 4px;\\n  }\\n\\n  .vis_item-privacy {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    padding: 3px 6px;\\n    border-radius: 4px 0;\\n    background-color: rgba(58, 65, 76, 0.7);\\n    color: #fff;\\n    font-size: 11px;\\n    line-height: 18px;\\n  }\\n\\n  .vis_item-title {\\n    margin-top: 16px;\\n    font-weight: 500;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n\\n  .vis_item-description {\\n    flex: 1 1 auto;\\n    margin-top: 8px;\\n  }\\n\\n  .vis_item-modification-date {\\n    margin-top: 16px;\\n    flex: 1 0 auto;\\n    color: #6a7484;\\n    line-height: 15px;\\n  }\\n\"])));\nvar MapIcon = function MapIcon(props) {\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", props, props.children, /*#__PURE__*/_react[\"default\"].createElement(_icons.Base, {\n    height: \"32px\",\n    viewBox: '0 0 16 16'\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"path\", {\n    fill: \"#d3d8d6\",\n    d: \"m13.6 11.572-3.2 2.1336v-9.2776l3.2-2.1336zm-12-7.144 3.2-2.1336v9.2776l-3.2 2.1336zm13.244 8.2376c0.2224-0.148 0.356-0.3984 0.356-0.6656v-11.2c0-0.2952-0.1624-0.5664-0.4224-0.7048-0.26-0.14-0.576-0.1248-0.8216 0.0392l-4.3128 2.876-3.5432-2.8352c-0.1208-0.0936-0.2952-0.1624-0.472-0.1688-0.1648-0.0064-0.348 0.0464-0.472 0.128l-4.8 3.2c-0.2224 0.1488-0.356 0.3984-0.356 0.6656v11.2c0 0.2952 0.1624 0.5664 0.4224 0.7056 0.1184 0.0632 0.248 0.0944 0.3776 0.0944 0.1552 0 0.3096-0.0448 0.444-0.1344l4.3128-2.876 3.5432 2.8352c0.1448 0.116 0.3216 0.1752 0.5 0.1752 0.1184 0 0.236-0.0248 0.3464-0.0784z\"\n  })));\n};\nvar PrivacyBadge = function PrivacyBadge(_ref) {\n  var privateMap = _ref.privateMap;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: \"vis_item-privacy\"\n  }, privateMap ? 'Private' : 'Public');\n};\nvar VisualizationItem = function VisualizationItem(_ref2) {\n  var vis = _ref2.vis,\n    onClick = _ref2.onClick;\n  return /*#__PURE__*/_react[\"default\"].createElement(StyledVisualizationItem, {\n    onClick: onClick\n  }, vis.thumbnail ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"vis_item-thumb\",\n    style: {\n      backgroundImage: \"url(\".concat(vis.thumbnail, \")\")\n    }\n  }, vis.hasOwnProperty('privateMap') ? /*#__PURE__*/_react[\"default\"].createElement(PrivacyBadge, {\n    privateMap: vis.privateMap\n  }) : null) : /*#__PURE__*/_react[\"default\"].createElement(MapIcon, {\n    className: \"vis_item-icon\"\n  }, vis.hasOwnProperty('privateMap') ? /*#__PURE__*/_react[\"default\"].createElement(PrivacyBadge, {\n    privateMap: vis.privateMap\n  }) : null), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: \"vis_item-title\"\n  }, vis.title), vis.description && vis.description.length && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: \"vis_item-description\"\n  }, vis.description), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: \"vis_item-modification-date\"\n  }, \"Last modified \", _moment[\"default\"].utc(vis.lastModification).fromNow()));\n};\nvar ProviderSelect = function ProviderSelect(_ref3) {\n  var _ref3$cloudProviders = _ref3.cloudProviders,\n    cloudProviders = _ref3$cloudProviders === void 0 ? [] : _ref3$cloudProviders,\n    _onSelect = _ref3.onSelect,\n    onSetCloudProvider = _ref3.onSetCloudProvider,\n    currentProvider = _ref3.currentProvider;\n  return cloudProviders.length ? /*#__PURE__*/_react[\"default\"].createElement(StyledProviderSection, null, cloudProviders.map(function (provider) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_cloudTile[\"default\"], {\n      key: provider.name,\n      onSelect: function onSelect() {\n        return _onSelect(provider.name);\n      },\n      onSetCloudProvider: onSetCloudProvider,\n      cloudProvider: provider,\n      isSelected: provider.name === currentProvider,\n      isConnected: Boolean(provider.getAccessToken && provider.getAccessToken())\n    });\n  })) : /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"No storage provider available\");\n};\nexports.ProviderSelect = ProviderSelect;\nfunction LoadStorageMapFactory() {\n  var LoadStorageMap = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(LoadStorageMap, _Component);\n    var _super = _createSuper(LoadStorageMap);\n    function LoadStorageMap() {\n      var _this;\n      (0, _classCallCheck2[\"default\"])(this, LoadStorageMap);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n        showProviderSelect: true\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_getProvider\", function () {\n        var _this$props = _this.props,\n          currentProvider = _this$props.currentProvider,\n          cloudProviders = _this$props.cloudProviders;\n        return (cloudProviders || []).find(function (p) {\n          return p.name === currentProvider;\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_clickBack\", function () {\n        _this.setState({\n          showProviderSelect: true\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_selectProvider\", function (providerName) {\n        _this.props.onSetCloudProvider(providerName);\n        var provider = (_this.props.cloudProviders || []).find(function (p) {\n          return p.name === providerName;\n        });\n        _this.props.getSavedMaps(provider);\n        _this.setState({\n          showProviderSelect: false\n        });\n      });\n      return _this;\n    }\n    (0, _createClass2[\"default\"])(LoadStorageMap, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this._getSavedMaps();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        if (prevProps.currentProvider !== this.props.currentProvider) {\n          this._getSavedMaps();\n        }\n      }\n    }, {\n      key: \"_getSavedMaps\",\n      value: function _getSavedMaps() {\n        var provider = this._getProvider();\n        if (provider) {\n          this.props.getSavedMaps(provider);\n          this.setState({\n            showProviderSelect: false\n          });\n        }\n      }\n    }, {\n      key: \"_onLoadCloudMap\",\n      value: function _onLoadCloudMap(provider, vis) {\n        this.props.onLoadCloudMap({\n          loadParams: vis.loadParams,\n          provider: provider\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n        var _this$props2 = this.props,\n          visualizations = _this$props2.visualizations,\n          cloudProviders = _this$props2.cloudProviders,\n          currentProvider = _this$props2.currentProvider,\n          isProviderLoading = _this$props2.isProviderLoading,\n          onSetCloudProvider = _this$props2.onSetCloudProvider;\n        var provider = this._getProvider();\n        return /*#__PURE__*/_react[\"default\"].createElement(_providerModalContainer[\"default\"], {\n          onSetCloudProvider: onSetCloudProvider,\n          cloudProviders: cloudProviders,\n          currentProvider: currentProvider\n        }, this.state.showProviderSelect ? /*#__PURE__*/_react[\"default\"].createElement(ProviderSelect, {\n          onSelect: this._selectProvider,\n          cloudProviders: cloudProviders,\n          onSetCloudProvider: onSetCloudProvider,\n          currentProvider: currentProvider\n        }) : /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, isProviderLoading && /*#__PURE__*/_react[\"default\"].createElement(StyledSpinner, null, /*#__PURE__*/_react[\"default\"].createElement(_loadingDialog[\"default\"], {\n          size: 64\n        })), !isProviderLoading && visualizations && /*#__PURE__*/_react[\"default\"].createElement(StyledVisualizationSection, null, /*#__PURE__*/_react[\"default\"].createElement(StyledStorageHeader, null, /*#__PURE__*/_react[\"default\"].createElement(StyledBackBtn, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.Button, {\n          link: true,\n          onClick: this._clickBack\n        }, /*#__PURE__*/_react[\"default\"].createElement(_icons.ArrowLeft, {\n          height: \"14px\"\n        }), /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n          id: 'modal.loadStorageMap.back'\n        }))), provider.getManagementUrl && /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n          key: 1,\n          href: provider.getManagementUrl(),\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          style: {\n            textDecoration: 'underline'\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n          id: 'modal.loadStorageMap.back',\n          values: {\n            displayName: provider.displayName\n          }\n        }))), /*#__PURE__*/_react[\"default\"].createElement(StyledProviderVisSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: \"title\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, currentProvider), /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n          id: 'modal.loadStorageMap.storageMaps'\n        })), /*#__PURE__*/_react[\"default\"].createElement(StyledSeparator, null), /*#__PURE__*/_react[\"default\"].createElement(StyledVisualizationList, null, visualizations.length ? visualizations.map(function (vis) {\n          return /*#__PURE__*/_react[\"default\"].createElement(VisualizationItem, {\n            key: vis.id,\n            onClick: function onClick() {\n              return _this2._onLoadCloudMap(provider, vis);\n            },\n            vis: vis\n          });\n        }) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"visualization-list__message\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n          id: 'modal.loadStorageMap.noSavedMaps'\n        })))))));\n      }\n    }]);\n    return LoadStorageMap;\n  }(_react.Component);\n  return LoadStorageMap;\n}\nvar _default = LoadStorageMapFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/modals/load-storage-map.js"],"names":["StyledProviderSection","div","attrs","className","StyledSpinner","styled","StyledVisualizationSection","StyledStorageHeader","StyledBackBtn","a","StyledProviderVisSection","StyledSeparator","hr","StyledVisualizationList","StyledVisualizationItem","MapIcon","props","children","PrivacyBadge","privateMap","VisualizationItem","vis","onClick","thumbnail","backgroundImage","hasOwnProperty","title","description","length","moment","utc","lastModification","fromNow","ProviderSelect","cloudProviders","onSelect","onSetCloudProvider","currentProvider","map","provider","name","Boolean","getAccessToken","LoadStorageMapFactory","LoadStorageMap","Component","showProviderSelect","_getSavedMaps","prevProps","find","p","_getProvider","getSavedMaps","setState","onLoadCloudMap","loadParams","providerName","visualizations","isProviderLoading","state","_selectProvider","_clickBack","getManagementUrl","textDecoration","displayName","id","_onLoadCloudMap"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component} from 'react';\nimport styled from 'styled-components';\nimport moment from 'moment';\n\nimport LoadingDialog from './loading-dialog';\nimport {Button} from 'components/common/styled-components';\nimport CloudTile from './cloud-tile';\nimport {Base, ArrowLeft} from 'components/common/icons';\nimport ProviderModalContainer from './provider-modal-container';\nimport {FormattedMessage} from 'localization';\n\nconst StyledProviderSection = styled.div.attrs({\n  className: 'provider-selection'\n})`\n  display: flex;\n`;\n\nconst StyledSpinner = styled.div`\n  text-align: center;\n  span {\n    margin: 0 auto;\n  }\n`;\n\nconst StyledVisualizationSection = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n`;\n\nconst StyledStorageHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  font-size: 12px;\n  line-height: 14px;\n`;\n\nconst StyledBackBtn = styled.a`\n  margin-bottom: 16px;\n  color: #3a414c;\n  cursor: pointer;\n\n  &:hover {\n    font-weight: 500;\n  }\n`;\n\nconst StyledProviderVisSection = styled.div`\n  flex: 1 1 auto;\n  background-color: #f8f8f9;\n  padding: 20px 24px;\n  min-height: 280px;\n\n  .title {\n    font-size: 14px;\n    line-height: 16px;\n    font-weight: 500;\n    margin-bottom: 16px;\n\n    span {\n      text-transform: capitalize;\n    }\n  }\n`;\n\nconst StyledSeparator = styled.hr`\n  border: solid #bfbfbf;\n  border-width: 0 0 1px 0;\n  margin-bottom: 16px;\n`;\n\nconst StyledVisualizationList = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  align-items: stretch;\n  justify-content: space-between;\n`;\n\nconst StyledVisualizationItem = styled.div`\n  flex: 0 0 auto;\n  width: 208px;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 8px;\n  color: #3a414c;\n  cursor: pointer;\n  font-size: 12px;\n  line-height: 18px;\n\n  &:hover {\n    .vis_item-icon,\n    .vis_item-thumb,\n    .vis_item-description,\n    .vis_item-modification-date {\n      opacity: 1;\n    }\n  }\n\n  .vis_item-icon,\n  .vis_item-thumb,\n  .vis_item-description,\n  .vis_item-modification-date {\n    opacity: 0.9;\n    transition: opacity 0.4s ease;\n  }\n\n  .vis_item-icon {\n    position: relative;\n    flex: 0 0 108px;\n    background-color: #6a7484;\n    border-radius: 4px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .vis_item-thumb {\n    position: relative;\n    flex: 0 0 108px;\n    background-size: cover;\n    background-position: center;\n    border-radius: 4px;\n  }\n\n  .vis_item-privacy {\n    position: absolute;\n    top: 0;\n    left: 0;\n    padding: 3px 6px;\n    border-radius: 4px 0;\n    background-color: rgba(58, 65, 76, 0.7);\n    color: #fff;\n    font-size: 11px;\n    line-height: 18px;\n  }\n\n  .vis_item-title {\n    margin-top: 16px;\n    font-weight: 500;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .vis_item-description {\n    flex: 1 1 auto;\n    margin-top: 8px;\n  }\n\n  .vis_item-modification-date {\n    margin-top: 16px;\n    flex: 1 0 auto;\n    color: #6a7484;\n    line-height: 15px;\n  }\n`;\n\nconst MapIcon = props => {\n  return (\n    <div {...props}>\n      {props.children}\n      <Base height=\"32px\" viewBox={'0 0 16 16'}>\n        <path\n          fill=\"#d3d8d6\"\n          d=\"m13.6 11.572-3.2 2.1336v-9.2776l3.2-2.1336zm-12-7.144 3.2-2.1336v9.2776l-3.2 2.1336zm13.244 8.2376c0.2224-0.148 0.356-0.3984 0.356-0.6656v-11.2c0-0.2952-0.1624-0.5664-0.4224-0.7048-0.26-0.14-0.576-0.1248-0.8216 0.0392l-4.3128 2.876-3.5432-2.8352c-0.1208-0.0936-0.2952-0.1624-0.472-0.1688-0.1648-0.0064-0.348 0.0464-0.472 0.128l-4.8 3.2c-0.2224 0.1488-0.356 0.3984-0.356 0.6656v11.2c0 0.2952 0.1624 0.5664 0.4224 0.7056 0.1184 0.0632 0.248 0.0944 0.3776 0.0944 0.1552 0 0.3096-0.0448 0.444-0.1344l4.3128-2.876 3.5432 2.8352c0.1448 0.116 0.3216 0.1752 0.5 0.1752 0.1184 0 0.236-0.0248 0.3464-0.0784z\"\n        />\n      </Base>\n    </div>\n  );\n};\n\nconst PrivacyBadge = ({privateMap}) => (\n  <span className=\"vis_item-privacy\">{privateMap ? 'Private' : 'Public'}</span>\n);\n\nconst VisualizationItem = ({vis, onClick}) => {\n  return (\n    <StyledVisualizationItem onClick={onClick}>\n      {vis.thumbnail ? (\n        <div className=\"vis_item-thumb\" style={{backgroundImage: `url(${vis.thumbnail})`}}>\n          {vis.hasOwnProperty('privateMap') ? <PrivacyBadge privateMap={vis.privateMap} /> : null}\n        </div>\n      ) : (\n        <MapIcon className=\"vis_item-icon\">\n          {vis.hasOwnProperty('privateMap') ? <PrivacyBadge privateMap={vis.privateMap} /> : null}\n        </MapIcon>\n      )}\n      <span className=\"vis_item-title\">{vis.title}</span>\n      {vis.description && vis.description.length && (\n        <span className=\"vis_item-description\">{vis.description}</span>\n      )}\n      <span className=\"vis_item-modification-date\">\n        Last modified {moment.utc(vis.lastModification).fromNow()}\n      </span>\n    </StyledVisualizationItem>\n  );\n};\n\nexport const ProviderSelect = ({\n  cloudProviders = [],\n  onSelect,\n  onSetCloudProvider,\n  currentProvider\n}) =>\n  cloudProviders.length ? (\n    <StyledProviderSection>\n      {cloudProviders.map(provider => (\n        <CloudTile\n          key={provider.name}\n          onSelect={() => onSelect(provider.name)}\n          onSetCloudProvider={onSetCloudProvider}\n          cloudProvider={provider}\n          isSelected={provider.name === currentProvider}\n          isConnected={Boolean(provider.getAccessToken && provider.getAccessToken())}\n        />\n      ))}\n    </StyledProviderSection>\n  ) : (\n    <p>No storage provider available</p>\n  );\n\nfunction LoadStorageMapFactory() {\n  class LoadStorageMap extends Component {\n    state = {\n      showProviderSelect: true\n    };\n\n    componentDidMount() {\n      this._getSavedMaps();\n    }\n\n    componentDidUpdate(prevProps) {\n      if (prevProps.currentProvider !== this.props.currentProvider) {\n        this._getSavedMaps();\n      }\n    }\n\n    _getProvider = () => {\n      const {currentProvider, cloudProviders} = this.props;\n      return (cloudProviders || []).find(p => p.name === currentProvider);\n    };\n\n    _getSavedMaps() {\n      const provider = this._getProvider();\n      if (provider) {\n        this.props.getSavedMaps(provider);\n        this.setState({showProviderSelect: false});\n      }\n    }\n\n    _onLoadCloudMap(provider, vis) {\n      this.props.onLoadCloudMap({\n        loadParams: vis.loadParams,\n        provider\n      });\n    }\n\n    _clickBack = () => {\n      this.setState({showProviderSelect: true});\n    };\n\n    _selectProvider = providerName => {\n      this.props.onSetCloudProvider(providerName);\n      const provider = (this.props.cloudProviders || []).find(p => p.name === providerName);\n      this.props.getSavedMaps(provider);\n      this.setState({showProviderSelect: false});\n    };\n\n    render() {\n      const {\n        visualizations,\n        cloudProviders,\n        currentProvider,\n        isProviderLoading,\n        onSetCloudProvider\n      } = this.props;\n\n      const provider = this._getProvider();\n\n      return (\n        <ProviderModalContainer\n          onSetCloudProvider={onSetCloudProvider}\n          cloudProviders={cloudProviders}\n          currentProvider={currentProvider}\n        >\n          {this.state.showProviderSelect ? (\n            <ProviderSelect\n              onSelect={this._selectProvider}\n              cloudProviders={cloudProviders}\n              onSetCloudProvider={onSetCloudProvider}\n              currentProvider={currentProvider}\n            />\n          ) : (\n            <>\n              {isProviderLoading && (\n                <StyledSpinner>\n                  <LoadingDialog size={64} />\n                </StyledSpinner>\n              )}\n              {!isProviderLoading && visualizations && (\n                <StyledVisualizationSection>\n                  <StyledStorageHeader>\n                    <StyledBackBtn>\n                      <Button link onClick={this._clickBack}>\n                        <ArrowLeft height=\"14px\" />\n                        <FormattedMessage id={'modal.loadStorageMap.back'} />\n                      </Button>\n                    </StyledBackBtn>\n                    {provider.getManagementUrl && (\n                      <a\n                        key={1}\n                        href={provider.getManagementUrl()}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        style={{textDecoration: 'underline'}}\n                      >\n                        <FormattedMessage\n                          id={'modal.loadStorageMap.back'}\n                          values={{displayName: provider.displayName}}\n                        />\n                      </a>\n                    )}\n                  </StyledStorageHeader>\n                  <StyledProviderVisSection>\n                    <span className=\"title\">\n                      <span>{currentProvider}</span>\n                      <FormattedMessage id={'modal.loadStorageMap.storageMaps'} />\n                    </span>\n                    <StyledSeparator />\n                    <StyledVisualizationList>\n                      {visualizations.length ? (\n                        visualizations.map(vis => (\n                          <VisualizationItem\n                            key={vis.id}\n                            onClick={() => this._onLoadCloudMap(provider, vis)}\n                            vis={vis}\n                          />\n                        ))\n                      ) : (\n                        <div className=\"visualization-list__message\">\n                          <FormattedMessage id={'modal.loadStorageMap.noSavedMaps'} />\n                        </div>\n                      )}\n                    </StyledVisualizationList>\n                  </StyledProviderVisSection>\n                </StyledVisualizationSection>\n              )}\n            </>\n          )}\n        </ProviderModalContainer>\n      );\n    }\n  }\n  return LoadStorageMap;\n}\n\nexport default LoadStorageMapFactory;\n"]},"metadata":{},"sourceType":"script"}