{"ast":null,"code":"import _get from \"@babel/runtime/helpers/esm/get\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { clamp } from 'math.gl';\nimport Controller from './controller';\nimport { MapState } from './map-controller';\nimport { mod } from '../utils/math-utils';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport { TRANSITION_EVENTS } from './transition-manager';\nvar LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(['longitude', 'latitude', 'zoom']),\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nvar GlobeState = function (_MapState) {\n  _inherits(GlobeState, _MapState);\n  function GlobeState() {\n    _classCallCheck(this, GlobeState);\n    return _possibleConstructorReturn(this, _getPrototypeOf(GlobeState).apply(this, arguments));\n  }\n  _createClass(GlobeState, [{\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      var maxZoom = props.maxZoom,\n        minZoom = props.minZoom,\n        zoom = props.zoom;\n      props.zoom = clamp(zoom, minZoom, maxZoom);\n      var longitude = props.longitude,\n        latitude = props.latitude;\n      if (longitude < -180 || longitude > 180) {\n        props.longitude = mod(longitude + 180, 360) - 180;\n      }\n      props.latitude = clamp(latitude, -89, 89);\n      return props;\n    }\n  }]);\n  return GlobeState;\n}(MapState);\nvar GlobeController = function (_Controller) {\n  _inherits(GlobeController, _Controller);\n  function GlobeController(props) {\n    var _this;\n    _classCallCheck(this, GlobeController);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GlobeController).call(this, GlobeState, props));\n    _this.invertPan = true;\n    return _this;\n  }\n  _createClass(GlobeController, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      _get(_getPrototypeOf(GlobeController.prototype), \"setProps\", this).call(this, props);\n      this.dragRotate = false;\n      this.touchRotate = false;\n    }\n  }, {\n    key: \"_getTransitionProps\",\n    value: function _getTransitionProps() {\n      return LINEAR_TRANSITION_PROPS;\n    }\n  }]);\n  return GlobeController;\n}(Controller);\nexport { GlobeController as default };","map":{"version":3,"sources":["../../../src/controllers/globe-controller.js"],"names":["clamp","Controller","MapState","mod","LinearInterpolator","TRANSITION_EVENTS","LINEAR_TRANSITION_PROPS","transitionDuration","transitionEasing","t","transitionInterpolator","transitionInterruption","BREAK","GlobeState","props","maxZoom","minZoom","zoom","longitude","latitude","GlobeController","invertPan","dragRotate","touchRotate"],"mappings":";;;;;;AAAA,SAAQA,KAAR,QAAoB,SAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AAEA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,SAAQC,GAAR,QAAkB,qBAAlB;AACA,OAAOC,kBAAP,MAA+B,oCAA/B;AACA,SAAQC,iBAAR,QAAgC,sBAAhC;AAEA,IAAMC,uBAAuB,GAAG;EAC9BC,kBAAkB,EAAE,GADU;EAE9BC,gBAAgB,EAAE,SAAA,gBAAA,CAAA,CAAC,EAAA;IAAA,OAAIC,CAAJ;EAAA,CAFW;EAG9BC,sBAAsB,EAAE,IAAIN,kBAAJ,CAAuB,CAAC,WAAD,EAAc,UAAd,EAA0B,MAA1B,CAAvB,CAHM;EAI9BO,sBAAsB,EAAEN,iBAAiB,CAACO;AAJZ,CAAhC;IAOMC,U;;;;;;;;sCAEcC,K,EAAO;MAAA,IAEhBC,OAFgB,GAEUD,KAFV,CAEhBC,OAFgB;QAEPC,OAFO,GAEUF,KAFV,CAEPE,OAFO;QAEEC,IAFF,GAEUH,KAFV,CAEEG,IAFF;MAGvBH,KAAK,CAACG,IAANH,GAAad,KAAK,CAACiB,IAAD,EAAOD,OAAP,EAAgBD,OAAhB,CAAlBD;MAHuB,IAKhBI,SALgB,GAKOJ,KALP,CAKhBI,SALgB;QAKLC,QALK,GAKOL,KALP,CAKLK,QALK;MAMvB,IAAID,SAAS,GAAG,CAAC,GAAbA,IAAoBA,SAAS,GAAG,GAApC,EAAyC;QACvCJ,KAAK,CAACI,SAANJ,GAAkBX,GAAG,CAACe,SAAS,GAAG,GAAb,EAAkB,GAAlB,CAAHf,GAA4B,GAA9CW;MACD;MACDA,KAAK,CAACK,QAANL,GAAiBd,KAAK,CAACmB,QAAD,EAAW,CAAC,EAAZ,EAAgB,EAAhB,CAAtBL;MAEA,OAAOA,KAAP;IACD;;;EAdsBZ,Q;IAiBJkB,e;;EACnB,SAAA,eAAA,CAAYN,KAAZ,EAAmB;IAAA,IAAA,KAAA;IAAA,eAAA,CAAA,IAAA,EAAA,eAAA,CAAA;IACjB,KAAA,GAAA,0BAAA,CAAA,IAAA,EAAA,eAAA,CAAA,eAAA,CAAA,CAAA,IAAA,CAAA,IAAA,EAAMD,UAAN,EAAkBC,KAAlB,CAAA,CAAA;IACA,KAAA,CAAKO,SAAL,GAAiB,IAAjB;IAFiB,OAAA,KAAA;EAGlB;;;6BAEQP,K,EAAO;MACd,IAAA,CAAA,eAAA,CAAA,eAAA,CAAA,SAAA,CAAA,EAAA,UAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,IAAA,EAAeA,KAAf,CAAA;MAGA,IAAA,CAAKQ,UAAL,GAAkB,KAAlB;MACA,IAAA,CAAKC,WAAL,GAAmB,KAAnB;IACD;;;0CAEqB;MAEpB,OAAOjB,uBAAP;IACD;;;EAjB0CL,U;SAAxBmB,e","sourcesContent":["import {clamp} from 'math.gl';\nimport Controller from './controller';\n\nimport {MapState} from './map-controller';\nimport {mod} from '../utils/math-utils';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport {TRANSITION_EVENTS} from './transition-manager';\n\nconst LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: t => t,\n  transitionInterpolator: new LinearInterpolator(['longitude', 'latitude', 'zoom']),\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\n\nclass GlobeState extends MapState {\n  // Apply any constraints (mathematical or defined by _viewportProps) to map state\n  _applyConstraints(props) {\n    // Ensure zoom is within specified range\n    const {maxZoom, minZoom, zoom} = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n\n    const {longitude, latitude} = props;\n    if (longitude < -180 || longitude > 180) {\n      props.longitude = mod(longitude + 180, 360) - 180;\n    }\n    props.latitude = clamp(latitude, -89, 89);\n\n    return props;\n  }\n}\n\nexport default class GlobeController extends Controller {\n  constructor(props) {\n    super(GlobeState, props);\n    this.invertPan = true;\n  }\n\n  setProps(props) {\n    super.setProps(props);\n\n    // TODO - support pitching?\n    this.dragRotate = false;\n    this.touchRotate = false;\n  }\n\n  _getTransitionProps() {\n    // Enables Transitions on double-tap and key-down events.\n    return LINEAR_TRANSITION_PROPS;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}