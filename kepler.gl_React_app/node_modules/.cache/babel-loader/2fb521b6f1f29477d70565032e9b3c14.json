{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _icons = require(\"../common/icons\");\nvar _localization = require(\"../../localization\");\nvar _styledComponents = require(\"../common/styled-components\");\nvar _mapControlTooltip = _interopRequireDefault(require(\"./map-control-tooltip\"));\nvar _mapControlPanel = _interopRequireDefault(require(\"./map-control-panel\"));\nvar _mapLegend = _interopRequireDefault(require(\"./map-legend\"));\n\n// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nvar MapLegendTooltip = function MapLegendTooltip(_ref) {\n  var id = _ref.id,\n    message = _ref.message;\n  return /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.Tooltip, {\n    id: id,\n    place: \"left\",\n    effect: \"solid\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n    id: message\n  })));\n};\nMapLegendPanelFactory.deps = [_mapControlTooltip[\"default\"], _mapControlPanel[\"default\"], _mapLegend[\"default\"]];\nfunction MapLegendPanelFactory(MapControlTooltip, MapControlPanel, MapLegend) {\n  var defaultActionIcons = {\n    legend: _icons.Legend\n  };\n  /** @type {import('./map-legend-panel').MapLegendPanelComponent} */\n\n  var MapLegendPanel = function MapLegendPanel(_ref2) {\n    var layers = _ref2.layers,\n      mapControls = _ref2.mapControls,\n      scale = _ref2.scale,\n      onToggleMapControl = _ref2.onToggleMapControl,\n      isExport = _ref2.isExport,\n      logoComponent = _ref2.logoComponent,\n      _ref2$actionIcons = _ref2.actionIcons,\n      actionIcons = _ref2$actionIcons === void 0 ? defaultActionIcons : _ref2$actionIcons;\n    var mapLegend = (mapControls === null || mapControls === void 0 ? void 0 : mapControls.mapLegend) || {};\n    var _ref3 = mapLegend || {},\n      isActive = _ref3.active,\n      disableClose = _ref3.disableClose;\n    var onToggleMenuPanel = (0, _react.useCallback)(function () {\n      return onToggleMapControl('mapLegend');\n    }, [onToggleMapControl]);\n    var onClick = (0, _react.useCallback)(function (e) {\n      e.preventDefault();\n      onToggleMenuPanel();\n    }, [onToggleMenuPanel]);\n    if (!mapLegend.show) {\n      return null;\n    }\n    return !isActive ? /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.MapControlButton, {\n      \"data-tip\": true,\n      \"data-for\": \"show-legend\",\n      className: (0, _classnames[\"default\"])('map-control-button', 'show-legend', {\n        isActive: isActive\n      }),\n      onClick: onClick\n    }, /*#__PURE__*/_react[\"default\"].createElement(actionIcons.legend, {\n      height: \"22px\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(MapLegendTooltip, {\n      id: \"show-legend\",\n      message: 'tooltip.showLegend'\n    })) : /*#__PURE__*/_react[\"default\"].createElement(MapControlPanel, {\n      scale: scale,\n      header: 'header.layerLegend',\n      onClick: onToggleMenuPanel,\n      isExport: isExport,\n      disableClose: disableClose,\n      logoComponent: logoComponent\n    }, /*#__PURE__*/_react[\"default\"].createElement(MapLegend, {\n      layers: layers\n    }));\n  };\n  MapLegendPanel.displayName = 'MapLegendPanel';\n  return MapLegendPanel;\n}\nvar _default = MapLegendPanelFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/map/map-legend-panel.js"],"names":["MapLegendTooltip","id","message","MapLegendPanelFactory","deps","MapControlTooltipFactory","MapControlPanelFactory","MapLegendFactory","MapControlTooltip","MapControlPanel","MapLegend","defaultActionIcons","legend","Legend","MapLegendPanel","layers","mapControls","scale","onToggleMapControl","isExport","logoComponent","actionIcons","mapLegend","active","isActive","disableClose","onToggleMenuPanel","onClick","e","preventDefault","show","displayName"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback} from 'react';\nimport classnames from 'classnames';\nimport {Legend} from 'components/common/icons';\nimport {FormattedMessage} from 'localization';\nimport {MapControlButton, Tooltip} from 'components/common/styled-components';\nimport MapControlTooltipFactory from './map-control-tooltip';\nimport MapControlPanelFactory from './map-control-panel';\nimport MapLegendFactory from './map-legend';\n\nconst MapLegendTooltip = ({id, message}) => (\n  <Tooltip id={id} place=\"left\" effect=\"solid\">\n    <span>\n      <FormattedMessage id={message} />\n    </span>\n  </Tooltip>\n);\n\nMapLegendPanelFactory.deps = [MapControlTooltipFactory, MapControlPanelFactory, MapLegendFactory];\n\nfunction MapLegendPanelFactory(MapControlTooltip, MapControlPanel, MapLegend) {\n  const defaultActionIcons = {\n    legend: Legend\n  };\n\n  /** @type {import('./map-legend-panel').MapLegendPanelComponent} */\n  const MapLegendPanel = ({\n    layers,\n    mapControls,\n    scale,\n    onToggleMapControl,\n    isExport,\n    logoComponent,\n    actionIcons = defaultActionIcons\n  }) => {\n    const mapLegend = mapControls?.mapLegend || {};\n    const {active: isActive, disableClose} = mapLegend || {};\n    const onToggleMenuPanel = useCallback(() => onToggleMapControl('mapLegend'), [\n      onToggleMapControl\n    ]);\n\n    const onClick = useCallback(\n      e => {\n        e.preventDefault();\n        onToggleMenuPanel();\n      },\n      [onToggleMenuPanel]\n    );\n\n    if (!mapLegend.show) {\n      return null;\n    }\n    return !isActive ? (\n      (<MapControlButton\n        data-tip\n        data-for=\"show-legend\"\n        className={classnames('map-control-button', 'show-legend', {isActive})}\n        onClick={onClick}\n      >\n        <actionIcons.legend height=\"22px\" />\n        <MapLegendTooltip id=\"show-legend\" message={'tooltip.showLegend'} />\n      </MapControlButton>)\n    ) : (\n      (<MapControlPanel\n        scale={scale}\n        header={'header.layerLegend'}\n        onClick={onToggleMenuPanel}\n        isExport={isExport}\n        disableClose={disableClose}\n        logoComponent={logoComponent}\n      >\n        <MapLegend layers={layers} />\n      </MapControlPanel>)\n    );\n  };\n\n  MapLegendPanel.displayName = 'MapLegendPanel';\n  return MapLegendPanel;\n}\n\nexport default MapLegendPanelFactory;\n"]},"metadata":{},"sourceType":"script"}