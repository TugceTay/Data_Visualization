{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _defaultSettings = require(\"../../constants/default-settings\");\nvar _icons = require(\"../common/icons\");\nvar _styledComponents = require(\"../common/styled-components\");\nvar _toolbarItem = _interopRequireDefault(require(\"../common/toolbar-item\"));\nvar _mapControlTooltip = _interopRequireDefault(require(\"./map-control-tooltip\"));\nvar _mapControlPanel = _interopRequireDefault(require(\"./map-control-panel\"));\nvar _mapControlToolbar = _interopRequireDefault(require(\"./map-control-toolbar\"));\n\n// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nMapDrawPanelFactory.deps = [_mapControlTooltip[\"default\"], _mapControlPanel[\"default\"], _mapControlToolbar[\"default\"]];\nfunction MapDrawPanelFactory(MapControlTooltip, MapControlPanel, MapControlToolbar) {\n  var defaultActionIcons = {\n    visible: _icons.EyeSeen,\n    hidden: _icons.EyeUnseen,\n    polygon: _icons.DrawPolygon,\n    cursor: _icons.CursorClick,\n    innerPolygon: _icons.Polygon,\n    rectangle: _icons.Rectangle\n  };\n  /** @type {import('./map-draw-panel').MapDrawPanelComponent} */\n\n  var MapDrawPanel = /*#__PURE__*/_react[\"default\"].memo(function (_ref) {\n    var _mapControls$mapDraw, _mapControls$mapDraw2;\n    var editor = _ref.editor,\n      mapControls = _ref.mapControls,\n      onToggleMapControl = _ref.onToggleMapControl,\n      onSetEditorMode = _ref.onSetEditorMode,\n      onToggleEditorVisibility = _ref.onToggleEditorVisibility,\n      _ref$actionIcons = _ref.actionIcons,\n      actionIcons = _ref$actionIcons === void 0 ? defaultActionIcons : _ref$actionIcons;\n    var isActive = mapControls === null || mapControls === void 0 ? void 0 : (_mapControls$mapDraw = mapControls.mapDraw) === null || _mapControls$mapDraw === void 0 ? void 0 : _mapControls$mapDraw.active;\n    var onToggleMenuPanel = (0, _react.useCallback)(function () {\n      return onToggleMapControl('mapDraw');\n    }, [onToggleMapControl]);\n    if (!(mapControls !== null && mapControls !== void 0 && (_mapControls$mapDraw2 = mapControls.mapDraw) !== null && _mapControls$mapDraw2 !== void 0 && _mapControls$mapDraw2.show)) {\n      return null;\n    }\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"map-draw-controls\",\n      style: {\n        position: 'relative'\n      }\n    }, isActive ? /*#__PURE__*/_react[\"default\"].createElement(MapControlToolbar, {\n      show: isActive\n    }, /*#__PURE__*/_react[\"default\"].createElement(_toolbarItem[\"default\"], {\n      className: \"edit-feature\",\n      onClick: function onClick() {\n        return onSetEditorMode(_defaultSettings.EDITOR_MODES.EDIT);\n      },\n      label: \"toolbar.select\",\n      icon: actionIcons.cursor,\n      active: editor.mode === _defaultSettings.EDITOR_MODES.EDIT\n    }), /*#__PURE__*/_react[\"default\"].createElement(_toolbarItem[\"default\"], {\n      className: \"draw-feature\",\n      onClick: function onClick() {\n        return onSetEditorMode(_defaultSettings.EDITOR_MODES.DRAW_POLYGON);\n      },\n      label: \"toolbar.polygon\",\n      icon: actionIcons.innerPolygon,\n      active: editor.mode === _defaultSettings.EDITOR_MODES.DRAW_POLYGON\n    }), /*#__PURE__*/_react[\"default\"].createElement(_toolbarItem[\"default\"], {\n      className: \"draw-rectangle\",\n      onClick: function onClick() {\n        return onSetEditorMode(_defaultSettings.EDITOR_MODES.DRAW_RECTANGLE);\n      },\n      label: \"toolbar.rectangle\",\n      icon: actionIcons.rectangle,\n      active: editor.mode === _defaultSettings.EDITOR_MODES.DRAW_RECTANGLE\n    }), /*#__PURE__*/_react[\"default\"].createElement(_toolbarItem[\"default\"], {\n      className: \"toggle-features\",\n      onClick: onToggleEditorVisibility,\n      label: editor.visible ? 'toolbar.hide' : 'toolbar.show',\n      icon: editor.visible ? actionIcons.visible : actionIcons.hidden\n    })) : null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.MapControlButton, {\n      onClick: function onClick(e) {\n        e.preventDefault();\n        onToggleMenuPanel();\n      },\n      active: isActive,\n      className: (0, _classnames[\"default\"])('map-control-button', 'map-draw', {\n        isActive: isActive\n      }),\n      \"data-tip\": true,\n      \"data-for\": \"map-draw\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(actionIcons.polygon, {\n      height: \"22px\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(MapControlTooltip, {\n      id: \"map-draw\",\n      message: \"tooltip.DrawOnMap\"\n    })));\n  });\n  MapDrawPanel.displayName = 'MapDrawPanel';\n  return MapDrawPanel;\n}\nvar _default = MapDrawPanelFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/map/map-draw-panel.js"],"names":["MapDrawPanelFactory","deps","MapControlTooltipFactory","MapControlPanelFactory","MapControlToolbarFactory","MapControlTooltip","MapControlPanel","MapControlToolbar","defaultActionIcons","visible","EyeSeen","hidden","EyeUnseen","polygon","DrawPolygon","cursor","CursorClick","innerPolygon","Polygon","rectangle","Rectangle","MapDrawPanel","memo","editor","mapControls","onToggleMapControl","onSetEditorMode","onToggleEditorVisibility","actionIcons","isActive","mapDraw","active","onToggleMenuPanel","show","position","EDITOR_MODES","EDIT","mode","DRAW_POLYGON","DRAW_RECTANGLE","e","preventDefault","displayName"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback} from 'react';\nimport classnames from 'classnames';\n\nimport {EDITOR_MODES} from 'constants/default-settings';\nimport {\n  CursorClick,\n  DrawPolygon,\n  EyeSeen,\n  EyeUnseen,\n  Polygon,\n  Rectangle\n} from 'components/common/icons';\nimport {MapControlButton} from 'components/common/styled-components';\nimport ToolbarItem from 'components/common/toolbar-item';\nimport MapControlTooltipFactory from './map-control-tooltip';\nimport MapControlPanelFactory from './map-control-panel';\nimport MapControlToolbarFactory from './map-control-toolbar';\n\nMapDrawPanelFactory.deps = [\n  MapControlTooltipFactory,\n  MapControlPanelFactory,\n  MapControlToolbarFactory\n];\nfunction MapDrawPanelFactory(MapControlTooltip, MapControlPanel, MapControlToolbar) {\n  const defaultActionIcons = {\n    visible: EyeSeen,\n    hidden: EyeUnseen,\n    polygon: DrawPolygon,\n    cursor: CursorClick,\n    innerPolygon: Polygon,\n    rectangle: Rectangle\n  };\n  /** @type {import('./map-draw-panel').MapDrawPanelComponent} */\n  const MapDrawPanel = React.memo(\n    ({\n      editor,\n      mapControls,\n      onToggleMapControl,\n      onSetEditorMode,\n      onToggleEditorVisibility,\n      actionIcons = defaultActionIcons\n    }) => {\n      const isActive = mapControls?.mapDraw?.active;\n      const onToggleMenuPanel = useCallback(() => onToggleMapControl('mapDraw'), [\n        onToggleMapControl\n      ]);\n      if (!mapControls?.mapDraw?.show) {\n        return null;\n      }\n      return (\n        <div className=\"map-draw-controls\" style={{position: 'relative'}}>\n          {isActive ? (\n            <MapControlToolbar show={isActive}>\n              <ToolbarItem\n                className=\"edit-feature\"\n                onClick={() => onSetEditorMode(EDITOR_MODES.EDIT)}\n                label=\"toolbar.select\"\n                icon={actionIcons.cursor}\n                active={editor.mode === EDITOR_MODES.EDIT}\n              />\n              <ToolbarItem\n                className=\"draw-feature\"\n                onClick={() => onSetEditorMode(EDITOR_MODES.DRAW_POLYGON)}\n                label=\"toolbar.polygon\"\n                icon={actionIcons.innerPolygon}\n                active={editor.mode === EDITOR_MODES.DRAW_POLYGON}\n              />\n              <ToolbarItem\n                className=\"draw-rectangle\"\n                onClick={() => onSetEditorMode(EDITOR_MODES.DRAW_RECTANGLE)}\n                label=\"toolbar.rectangle\"\n                icon={actionIcons.rectangle}\n                active={editor.mode === EDITOR_MODES.DRAW_RECTANGLE}\n              />\n              <ToolbarItem\n                className=\"toggle-features\"\n                onClick={onToggleEditorVisibility}\n                label={editor.visible ? 'toolbar.hide' : 'toolbar.show'}\n                icon={editor.visible ? actionIcons.visible : actionIcons.hidden}\n              />\n            </MapControlToolbar>\n          ) : null}\n          <MapControlButton\n            onClick={e => {\n              e.preventDefault();\n              onToggleMenuPanel();\n            }}\n            active={isActive}\n            className={classnames('map-control-button', 'map-draw', {isActive})}\n            data-tip\n            data-for=\"map-draw\"\n          >\n            <actionIcons.polygon height=\"22px\" />\n            <MapControlTooltip id=\"map-draw\" message=\"tooltip.DrawOnMap\" />\n          </MapControlButton>\n        </div>\n      );\n    }\n  );\n\n  MapDrawPanel.displayName = 'MapDrawPanel';\n  return MapDrawPanel;\n}\n\nexport default MapDrawPanelFactory;\n"]},"metadata":{},"sourceType":"script"}