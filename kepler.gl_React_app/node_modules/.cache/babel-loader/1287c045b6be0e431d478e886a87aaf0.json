{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FieldListItemFactoryFactory = FieldListItemFactoryFactory;\nexports[\"default\"] = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reselect = require(\"reselect\");\nvar _itemSelector = _interopRequireDefault(require(\"./item-selector/item-selector\"));\nvar _dropdownList = require(\"./item-selector/dropdown-list\");\nvar _utils = require(\"../../utils/utils\");\nvar _dataUtils = require(\"../../utils/data-utils\");\nvar _fieldToken = _interopRequireDefault(require(\"../common/field-token\"));\nvar _templateObject, _templateObject2;\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar defaultDisplayOption = function defaultDisplayOption(d) {\n  return d.displayName || d.name;\n};\nvar defaultValueOption = function defaultValueOption(d) {\n  return d.name;\n};\nvar StyledToken = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: inline-block;\\n  margin: 0 \", \"px 0 0;\\n\"])), function (props) {\n  return props.theme.fieldTokenRightMargin;\n});\nvar StyledFieldListItem = _styledComponents[\"default\"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  line-height: 0;\\n\"])));\nFieldListItemFactoryFactory.deps = [_fieldToken[\"default\"]]; // custom list Item\n\nfunction FieldListItemFactoryFactory(FieldToken) {\n  var FieldListItemFactory = function FieldListItemFactory() {\n    var showToken = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var FieldListItem = function FieldListItem(_ref) {\n      var value = _ref.value,\n        _ref$displayOption = _ref.displayOption,\n        displayOption = _ref$displayOption === void 0 ? defaultDisplayOption : _ref$displayOption;\n      return /*#__PURE__*/_react[\"default\"].createElement(StyledFieldListItem, {\n        className: \"field-selector_list-item\"\n      }, showToken ? /*#__PURE__*/_react[\"default\"].createElement(StyledToken, null, /*#__PURE__*/_react[\"default\"].createElement(FieldToken, {\n        type: value.type\n      })) : null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: _dropdownList.classList.listItemAnchor\n      }, displayOption(value)));\n    };\n    return FieldListItem;\n  };\n  return FieldListItemFactory;\n}\nvar SuggestedFieldHeader = function SuggestedFieldHeader() {\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, \"Suggested Field\");\n};\nvar FieldType = _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].string), _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n  name: _propTypes[\"default\"].string,\n  format: _propTypes[\"default\"].string\n})), _propTypes[\"default\"].shape({\n  format: _propTypes[\"default\"].string,\n  id: _propTypes[\"default\"].string,\n  name: _propTypes[\"default\"].string,\n  fieldIdx: _propTypes[\"default\"].number,\n  type: _propTypes[\"default\"].number\n})]);\nfunction FieldSelectorFactory(FieldListItemFactory) {\n  var FieldSelector = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(FieldSelector, _Component);\n    var _super = _createSuper(FieldSelector);\n    function FieldSelector() {\n      var _this;\n      (0, _classCallCheck2[\"default\"])(this, FieldSelector);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"fieldsSelector\", function (props) {\n        return props.fields;\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"filteredFieldsSelector\", function (props) {\n        return props.fields.filter(function (field) {\n          return !(0, _utils.toArray)(props.value).find(function (d) {\n            return d.name ? d.name === field.name : d === field.name;\n          });\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"valueSelector\", function (props) {\n        return props.value;\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"filterFieldTypesSelector\", function (props) {\n        return props.filterFieldTypes;\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"showTokenSelector\", function (props) {\n        return props.showToken;\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"selectedItemsSelector\", (0, _reselect.createSelector)(_this.fieldsSelector, _this.valueSelector, function (fields, value) {\n        return (0, _utils.toArray)(value).map(function (d) {\n          return fields.find(function (f) {\n            return (0, _dataUtils.notNullorUndefined)(d) && d.name ? d.name === defaultValueOption(f) : d === defaultValueOption(f);\n          });\n        }).filter(function (d) {\n          return d;\n        });\n      }));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"fieldOptionsSelector\", (0, _reselect.createSelector)(_this.filteredFieldsSelector, _this.filterFieldTypesSelector, function (fields, filterFieldTypes) {\n        if (!filterFieldTypes) {\n          return fields;\n        }\n        var filters = Array.isArray(filterFieldTypes) ? filterFieldTypes : [filterFieldTypes];\n        return fields.filter(function (f) {\n          return filters.includes(f.type);\n        });\n      }));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"fieldListItemSelector\", (0, _reselect.createSelector)(_this.showTokenSelector, FieldListItemFactory));\n      return _this;\n    }\n    (0, _createClass2[\"default\"])(FieldSelector, [{\n      key: \"render\",\n      value: function render() {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"field-selector\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(_itemSelector[\"default\"], {\n          getOptionValue: function getOptionValue(d) {\n            return d;\n          },\n          closeOnSelect: this.props.closeOnSelect,\n          displayOption: defaultDisplayOption,\n          filterOption: \"displayName\",\n          fixedOptions: this.props.suggested,\n          inputTheme: this.props.inputTheme,\n          size: this.props.size,\n          isError: this.props.error,\n          selectedItems: this.selectedItemsSelector(this.props),\n          erasable: this.props.erasable,\n          options: this.fieldOptionsSelector(this.props),\n          multiSelect: this.props.multiSelect,\n          placeholder: this.props.placeholder,\n          placement: this.props.placement,\n          onChange: this.props.onSelect,\n          DropDownLineItemRenderComponent: this.fieldListItemSelector(this.props),\n          DropdownHeaderComponent: this.props.suggested ? SuggestedFieldHeader : null,\n          CustomChickletComponent: this.props.CustomChickletComponent\n        }));\n      }\n    }]);\n    return FieldSelector;\n  }(_react.Component);\n  (0, _defineProperty2[\"default\"])(FieldSelector, \"propTypes\", {\n    fields: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].array, _propTypes[\"default\"].arrayOf(FieldType)]),\n    onSelect: _propTypes[\"default\"].func.isRequired,\n    placement: _propTypes[\"default\"].string,\n    value: FieldType,\n    filterFieldTypes: _propTypes[\"default\"].oneOfType([FieldType, _propTypes[\"default\"].arrayOf(FieldType)]),\n    inputTheme: _propTypes[\"default\"].string,\n    placeholder: _propTypes[\"default\"].string,\n    erasable: _propTypes[\"default\"].bool,\n    error: _propTypes[\"default\"].bool,\n    multiSelect: _propTypes[\"default\"].bool,\n    closeOnSelect: _propTypes[\"default\"].bool,\n    showToken: _propTypes[\"default\"].bool,\n    suggested: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any),\n    CustomChickletComponent: _propTypes[\"default\"].func\n  });\n  (0, _defineProperty2[\"default\"])(FieldSelector, \"defaultProps\", {\n    erasable: true,\n    error: false,\n    fields: [],\n    onSelect: function onSelect() {},\n    placement: 'bottom',\n    value: null,\n    multiSelect: false,\n    closeOnSelect: true,\n    showToken: true,\n    placeholder: 'placeholder.selectField'\n  });\n  return FieldSelector;\n}\nFieldSelectorFactory.deps = [FieldListItemFactoryFactory];\nvar _default = FieldSelectorFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/common/field-selector.js"],"names":["defaultDisplayOption","d","displayName","name","defaultValueOption","StyledToken","styled","div","props","theme","fieldTokenRightMargin","StyledFieldListItem","FieldListItemFactoryFactory","deps","FieldTokenFactory","FieldToken","FieldListItemFactory","showToken","FieldListItem","value","displayOption","type","classList","listItemAnchor","SuggestedFieldHeader","FieldType","oneOfType","PropTypes","string","arrayOf","shape","format","id","fieldIdx","number","FieldSelectorFactory","FieldSelector","Component","fields","array","onSelect","func","isRequired","placement","filterFieldTypes","inputTheme","placeholder","erasable","bool","error","multiSelect","closeOnSelect","suggested","any","CustomChickletComponent","filter","find","field","fieldsSelector","valueSelector","map","f","filteredFieldsSelector","filterFieldTypesSelector","filters","Array","isArray","includes","showTokenSelector","size","selectedItemsSelector","fieldOptionsSelector","fieldListItemSelector"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component} from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport {createSelector} from 'reselect';\n\nimport ItemSelector from './item-selector/item-selector';\nimport {classList} from './item-selector/dropdown-list';\nimport {toArray} from 'utils/utils';\nimport {notNullorUndefined} from 'utils/data-utils';\nimport FieldTokenFactory from '../common/field-token';\n\nconst defaultDisplayOption = d => d.displayName || d.name;\nconst defaultValueOption = d => d.name;\n\nconst StyledToken = styled.div`\n  display: inline-block;\n  margin: 0 ${props => props.theme.fieldTokenRightMargin}px 0 0;\n`;\nconst StyledFieldListItem = styled.div`\n  line-height: 0;\n`;\n\nFieldListItemFactoryFactory.deps = [FieldTokenFactory];\n// custom list Item\nexport function FieldListItemFactoryFactory(FieldToken) {\n  const FieldListItemFactory = (showToken = true) => {\n    const FieldListItem = ({value, displayOption = defaultDisplayOption}) => (\n      <StyledFieldListItem className=\"field-selector_list-item\">\n        {showToken ? (\n          <StyledToken>\n            <FieldToken type={value.type} />\n          </StyledToken>\n        ) : null}\n        <span className={classList.listItemAnchor}>{displayOption(value)}</span>\n      </StyledFieldListItem>\n    );\n    return FieldListItem;\n  };\n  return FieldListItemFactory;\n}\n\nconst SuggestedFieldHeader = () => <div>Suggested Field</div>;\n\nconst FieldType = PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.arrayOf(PropTypes.string),\n  PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string,\n      format: PropTypes.string\n    })\n  ),\n  PropTypes.shape({\n    format: PropTypes.string,\n    id: PropTypes.string,\n    name: PropTypes.string,\n    fieldIdx: PropTypes.number,\n    type: PropTypes.number\n  })\n]);\n\nfunction FieldSelectorFactory(FieldListItemFactory) {\n  class FieldSelector extends Component {\n    static propTypes = {\n      fields: PropTypes.oneOfType([PropTypes.array, PropTypes.arrayOf(FieldType)]),\n      onSelect: PropTypes.func.isRequired,\n      placement: PropTypes.string,\n      value: FieldType,\n      filterFieldTypes: PropTypes.oneOfType([FieldType, PropTypes.arrayOf(FieldType)]),\n      inputTheme: PropTypes.string,\n      placeholder: PropTypes.string,\n      erasable: PropTypes.bool,\n      error: PropTypes.bool,\n      multiSelect: PropTypes.bool,\n      closeOnSelect: PropTypes.bool,\n      showToken: PropTypes.bool,\n      suggested: PropTypes.arrayOf(PropTypes.any),\n      CustomChickletComponent: PropTypes.func\n    };\n\n    static defaultProps = {\n      erasable: true,\n      error: false,\n      fields: [],\n      onSelect: () => {},\n      placement: 'bottom',\n      value: null,\n      multiSelect: false,\n      closeOnSelect: true,\n      showToken: true,\n      placeholder: 'placeholder.selectField'\n    };\n\n    fieldsSelector = props => props.fields;\n    filteredFieldsSelector = props =>\n      props.fields.filter(\n        field =>\n          !toArray(props.value).find(d => (d.name ? d.name === field.name : d === field.name))\n      );\n    valueSelector = props => props.value;\n    filterFieldTypesSelector = props => props.filterFieldTypes;\n    showTokenSelector = props => props.showToken;\n\n    selectedItemsSelector = createSelector(\n      this.fieldsSelector,\n      this.valueSelector,\n      (fields, value) =>\n        toArray(value)\n          .map(d =>\n            fields.find(f =>\n              notNullorUndefined(d) && d.name\n                ? d.name === defaultValueOption(f)\n                : d === defaultValueOption(f)\n            )\n          )\n          .filter(d => d)\n    );\n\n    fieldOptionsSelector = createSelector(\n      this.filteredFieldsSelector,\n      this.filterFieldTypesSelector,\n      (fields, filterFieldTypes) => {\n        if (!filterFieldTypes) {\n          return fields;\n        }\n        const filters = Array.isArray(filterFieldTypes) ? filterFieldTypes : [filterFieldTypes];\n        return fields.filter(f => filters.includes(f.type));\n      }\n    );\n\n    fieldListItemSelector = createSelector(this.showTokenSelector, FieldListItemFactory);\n\n    render() {\n      return (\n        <div className=\"field-selector\">\n          <ItemSelector\n            getOptionValue={d => d}\n            closeOnSelect={this.props.closeOnSelect}\n            displayOption={defaultDisplayOption}\n            filterOption=\"displayName\"\n            fixedOptions={this.props.suggested}\n            inputTheme={this.props.inputTheme}\n            size={this.props.size}\n            isError={this.props.error}\n            selectedItems={this.selectedItemsSelector(this.props)}\n            erasable={this.props.erasable}\n            options={this.fieldOptionsSelector(this.props)}\n            multiSelect={this.props.multiSelect}\n            placeholder={this.props.placeholder}\n            placement={this.props.placement}\n            onChange={this.props.onSelect}\n            DropDownLineItemRenderComponent={this.fieldListItemSelector(this.props)}\n            DropdownHeaderComponent={this.props.suggested ? SuggestedFieldHeader : null}\n            CustomChickletComponent={this.props.CustomChickletComponent}\n          />\n        </div>\n      );\n    }\n  }\n  return FieldSelector;\n}\n\nFieldSelectorFactory.deps = [FieldListItemFactoryFactory];\nexport default FieldSelectorFactory;\n"]},"metadata":{},"sourceType":"script"}