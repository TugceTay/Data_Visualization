{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _imagePreview = _interopRequireDefault(require(\"../common/image-preview\"));\nvar _defaultSettings = require(\"../../constants/default-settings\");\nvar _styledComponents2 = require(\"../common/styled-components\");\nvar _switch = _interopRequireDefault(require(\"../common/switch\"));\nvar _reactIntl = require(\"react-intl\");\nvar _localization = require(\"../../localization\");\nvar _templateObject;\nvar ImageOptionList = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-around;\\n  width: 250px;\\n\\n  .image-option-section {\\n    .image-option-section-title {\\n      font-weight: 500;\\n      font-size: 14px;\\n    }\\n  }\\n\\n  .button-list {\\n    display: flex;\\n    flex-direction: row;\\n    padding: 8px 0px;\\n  }\\n\\n  input {\\n    margin-right: 8px;\\n  }\\n\"])));\nvar ExportImageModalFactory = function ExportImageModalFactory() {\n  /** @type {typeof import('./export-image-modal').ExportImageModal} */\n  var ExportImageModal = function ExportImageModal(_ref) {\n    var mapW = _ref.mapW,\n      mapH = _ref.mapH,\n      exportImage = _ref.exportImage,\n      onUpdateImageSetting = _ref.onUpdateImageSetting,\n      cleanupExportImage = _ref.cleanupExportImage,\n      intl = _ref.intl;\n    var legend = exportImage.legend,\n      ratio = exportImage.ratio,\n      resolution = exportImage.resolution;\n    (0, _react.useEffect)(function () {\n      onUpdateImageSetting({\n        exporting: true\n      });\n      return cleanupExportImage;\n    }, [onUpdateImageSetting, cleanupExportImage]);\n    (0, _react.useEffect)(function () {\n      if (mapH !== exportImage.mapH || mapW !== exportImage.mapW) {\n        onUpdateImageSetting({\n          mapH: mapH,\n          mapW: mapW\n        });\n      }\n    }, [mapH, mapW, exportImage, onUpdateImageSetting]);\n    return /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalContent, {\n      className: \"export-image-modal\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(ImageOptionList, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"image-option-section\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"image-option-section-title\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.exportImage.ratioTitle'\n    })), /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.exportImage.ratioDescription'\n    }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"button-list\",\n      id: \"export-image-modal__option_ratio\"\n    }, _defaultSettings.EXPORT_IMG_RATIO_OPTIONS.filter(function (op) {\n      return !op.hidden;\n    }).map(function (op) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.SelectionButton, {\n        key: op.id,\n        selected: ratio === op.id,\n        onClick: function onClick() {\n          return onUpdateImageSetting({\n            ratio: op.id\n          });\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n        id: op.label\n      }), ratio === op.id && /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.CheckMark, null));\n    }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"image-option-section\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"image-option-section-title\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.exportImage.resolutionTitle'\n    })), /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.exportImage.resolutionDescription'\n    }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"button-list\",\n      id: \"export-image-modal__option_resolution\"\n    }, _defaultSettings.EXPORT_IMG_RESOLUTION_OPTIONS.map(function (op) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.SelectionButton, {\n        key: op.id,\n        selected: resolution === op.id,\n        onClick: function onClick() {\n          return op.available && onUpdateImageSetting({\n            resolution: op.id\n          });\n        }\n      }, op.label, resolution === op.id && /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.CheckMark, null));\n    }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"image-option-section\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"image-option-section-title\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.exportImage.mapLegendTitle'\n    })), /*#__PURE__*/_react[\"default\"].createElement(_switch[\"default\"], {\n      type: \"checkbox\",\n      id: \"add-map-legend\",\n      checked: legend,\n      label: intl.formatMessage({\n        id: 'modal.exportImage.mapLegendAdd'\n      }),\n      onChange: function onChange() {\n        return onUpdateImageSetting({\n          legend: !legend\n        });\n      }\n    }))), /*#__PURE__*/_react[\"default\"].createElement(_imagePreview[\"default\"], {\n      exportImage: exportImage\n    }));\n  };\n  return (0, _reactIntl.injectIntl)(ExportImageModal);\n};\nvar _default = ExportImageModalFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/modals/export-image-modal.js"],"names":["ImageOptionList","styled","div","ExportImageModalFactory","ExportImageModal","mapW","mapH","exportImage","onUpdateImageSetting","cleanupExportImage","intl","legend","ratio","resolution","exporting","filter","op","hidden","map","id","label","available","formatMessage"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useEffect} from 'react';\nimport styled from 'styled-components';\nimport ImagePreview from 'components/common/image-preview';\n\nimport {EXPORT_IMG_RATIO_OPTIONS, EXPORT_IMG_RESOLUTION_OPTIONS} from 'constants/default-settings';\n\nimport {StyledModalContent, SelectionButton, CheckMark} from 'components/common/styled-components';\nimport Switch from 'components/common/switch';\nimport {injectIntl} from 'react-intl';\nimport {FormattedMessage} from 'localization';\n\nconst ImageOptionList = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  width: 250px;\n\n  .image-option-section {\n    .image-option-section-title {\n      font-weight: 500;\n      font-size: 14px;\n    }\n  }\n\n  .button-list {\n    display: flex;\n    flex-direction: row;\n    padding: 8px 0px;\n  }\n\n  input {\n    margin-right: 8px;\n  }\n`;\n\nconst ExportImageModalFactory = () => {\n  /** @type {typeof import('./export-image-modal').ExportImageModal} */\n  const ExportImageModal = ({\n    mapW,\n    mapH,\n    exportImage,\n    onUpdateImageSetting,\n    cleanupExportImage,\n    intl\n  }) => {\n    const {legend, ratio, resolution} = exportImage;\n\n    useEffect(() => {\n      onUpdateImageSetting({\n        exporting: true\n      });\n      return cleanupExportImage;\n    }, [onUpdateImageSetting, cleanupExportImage]);\n\n    useEffect(() => {\n      if (mapH !== exportImage.mapH || mapW !== exportImage.mapW) {\n        onUpdateImageSetting({\n          mapH,\n          mapW\n        });\n      }\n    }, [mapH, mapW, exportImage, onUpdateImageSetting]);\n\n    return (\n      <StyledModalContent className=\"export-image-modal\">\n        <ImageOptionList>\n          <div className=\"image-option-section\">\n            <div className=\"image-option-section-title\">\n              <FormattedMessage id={'modal.exportImage.ratioTitle'} />\n            </div>\n            <FormattedMessage id={'modal.exportImage.ratioDescription'} />\n            <div className=\"button-list\" id=\"export-image-modal__option_ratio\">\n              {EXPORT_IMG_RATIO_OPTIONS.filter(op => !op.hidden).map(op => (\n                <SelectionButton\n                  key={op.id}\n                  selected={ratio === op.id}\n                  onClick={() => onUpdateImageSetting({ratio: op.id})}\n                >\n                  <FormattedMessage id={op.label} />\n                  {ratio === op.id && <CheckMark />}\n                </SelectionButton>\n              ))}\n            </div>\n          </div>\n          <div className=\"image-option-section\">\n            <div className=\"image-option-section-title\">\n              <FormattedMessage id={'modal.exportImage.resolutionTitle'} />\n            </div>\n            <FormattedMessage id={'modal.exportImage.resolutionDescription'} />\n            <div className=\"button-list\" id=\"export-image-modal__option_resolution\">\n              {EXPORT_IMG_RESOLUTION_OPTIONS.map(op => (\n                <SelectionButton\n                  key={op.id}\n                  selected={resolution === op.id}\n                  onClick={() => op.available && onUpdateImageSetting({resolution: op.id})}\n                >\n                  {op.label}\n                  {resolution === op.id && <CheckMark />}\n                </SelectionButton>\n              ))}\n            </div>\n          </div>\n          <div className=\"image-option-section\">\n            <div className=\"image-option-section-title\">\n              <FormattedMessage id={'modal.exportImage.mapLegendTitle'} />\n            </div>\n            <Switch\n              type=\"checkbox\"\n              id=\"add-map-legend\"\n              checked={legend}\n              label={intl.formatMessage({id: 'modal.exportImage.mapLegendAdd'})}\n              onChange={() => onUpdateImageSetting({legend: !legend})}\n            />\n          </div>\n        </ImageOptionList>\n        <ImagePreview exportImage={exportImage} />\n      </StyledModalContent>\n    );\n  };\n\n  return injectIntl(ExportImageModal);\n};\n\nexport default ExportImageModalFactory;\n"]},"metadata":{},"sourceType":"script"}