{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _localization = require(\"../../../localization\");\nvar _styledComponents2 = require(\"../../common/styled-components\");\nvar _columnSelector = _interopRequireDefault(require(\"./column-selector\"));\nvar _templateObject;\nvar TopRow = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  justify-content: space-between;\\n\"])));\nLayerColumnConfigFactory.deps = [_columnSelector[\"default\"]];\nfunction LayerColumnConfigFactory(ColumnSelector) {\n  var LayerColumnConfig = function LayerColumnConfig(_ref) {\n    var columnPairs = _ref.columnPairs,\n      fieldPairs = _ref.fieldPairs,\n      columns = _ref.columns,\n      columnLabels = _ref.columnLabels,\n      fields = _ref.fields,\n      updateLayerConfig = _ref.updateLayerConfig,\n      assignColumn = _ref.assignColumn,\n      assignColumnPairs = _ref.assignColumnPairs;\n    var enhancedFieldPairs = (0, _react.useMemo)(function () {\n      return columnPairs && fieldPairs ? fieldPairs.map(function (fp) {\n        return {\n          name: fp.defaultName,\n          type: 'point',\n          pair: fp.pair\n        };\n      }) : null;\n    }, [columnPairs, fieldPairs]);\n    var onUpdateColumn = (0, _react.useCallback)(function (key, value) {\n      var assignedColumns = value && value.pair && columnPairs ? assignColumnPairs(key, value.pair) : assignColumn(key, value);\n      updateLayerConfig({\n        columns: assignedColumns\n      });\n    }, [updateLayerConfig, columnPairs, assignColumnPairs, assignColumn]);\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.SidePanelSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"layer-config__column\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(TopRow, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.PanelLabel, null, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'columns.title'\n    })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.PanelLabel, null, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: \"layer.required\"\n    }))), Object.keys(columns).map(function (key) {\n      return /*#__PURE__*/_react[\"default\"].createElement(ColumnSelector, {\n        column: columns[key],\n        columns: columns,\n        label: columnLabels && columnLabels[key] || key,\n        key: key,\n        allFields: fields,\n        fieldPairs: enhancedFieldPairs,\n        onSelect: function onSelect(val) {\n          return onUpdateColumn(key, val);\n        }\n      });\n    }))));\n  };\n  LayerColumnConfig.propTypes = {\n    columns: _propTypes[\"default\"].object.isRequired,\n    fields: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any).isRequired,\n    assignColumnPairs: _propTypes[\"default\"].func.isRequired,\n    assignColumn: _propTypes[\"default\"].func.isRequired,\n    updateLayerConfig: _propTypes[\"default\"].func.isRequired,\n    columnPairs: _propTypes[\"default\"].object,\n    fieldPairs: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any),\n    columnLabels: _propTypes[\"default\"].object\n  };\n  return LayerColumnConfig;\n}\nvar _default = LayerColumnConfigFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../../src/components/side-panel/layer-panel/layer-column-config.js"],"names":["TopRow","styled","div","LayerColumnConfigFactory","deps","ColumnSelectorFactory","ColumnSelector","LayerColumnConfig","columnPairs","fieldPairs","columns","columnLabels","fields","updateLayerConfig","assignColumn","assignColumnPairs","enhancedFieldPairs","map","name","fp","defaultName","type","pair","onUpdateColumn","key","value","assignedColumns","keys","val","propTypes","PropTypes","object","isRequired","arrayOf","any","func"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, useMemo} from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport {FormattedMessage} from 'localization';\nimport {PanelLabel, SidePanelSection} from 'components/common/styled-components';\nimport ColumnSelectorFactory from './column-selector';\n\nconst TopRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nLayerColumnConfigFactory.deps = [ColumnSelectorFactory];\n\nfunction LayerColumnConfigFactory(ColumnSelector) {\n  const LayerColumnConfig = ({\n    columnPairs,\n    fieldPairs,\n    columns,\n    columnLabels,\n    fields,\n    updateLayerConfig,\n    assignColumn,\n    assignColumnPairs\n  }) => {\n    const enhancedFieldPairs = useMemo(\n      () =>\n        columnPairs && fieldPairs\n          ? fieldPairs.map(fp => ({\n              name: fp.defaultName,\n              type: 'point',\n              pair: fp.pair\n            }))\n          : null,\n      [columnPairs, fieldPairs]\n    );\n\n    const onUpdateColumn = useCallback(\n      (key, value) => {\n        const assignedColumns =\n          value && value.pair && columnPairs\n            ? assignColumnPairs(key, value.pair)\n            : assignColumn(key, value);\n\n        updateLayerConfig({columns: assignedColumns});\n      },\n      [updateLayerConfig, columnPairs, assignColumnPairs, assignColumn]\n    );\n\n    return (\n      <div>\n        <SidePanelSection>\n          <div className=\"layer-config__column\">\n            <TopRow>\n              <PanelLabel>\n                <FormattedMessage id={'columns.title'} />\n              </PanelLabel>\n              <PanelLabel>\n                <FormattedMessage id=\"layer.required\" />\n              </PanelLabel>\n            </TopRow>\n            {Object.keys(columns).map(key => (\n              <ColumnSelector\n                column={columns[key]}\n                columns={columns}\n                label={(columnLabels && columnLabels[key]) || key}\n                key={key}\n                allFields={fields}\n                fieldPairs={enhancedFieldPairs}\n                onSelect={val => onUpdateColumn(key, val)}\n              />\n            ))}\n          </div>\n        </SidePanelSection>\n      </div>\n    );\n  };\n\n  LayerColumnConfig.propTypes = {\n    columns: PropTypes.object.isRequired,\n    fields: PropTypes.arrayOf(PropTypes.any).isRequired,\n    assignColumnPairs: PropTypes.func.isRequired,\n    assignColumn: PropTypes.func.isRequired,\n    updateLayerConfig: PropTypes.func.isRequired,\n    columnPairs: PropTypes.object,\n    fieldPairs: PropTypes.arrayOf(PropTypes.any),\n    columnLabels: PropTypes.object\n  };\n\n  return LayerColumnConfig;\n}\n\nexport default LayerColumnConfigFactory;\n"]},"metadata":{},"sourceType":"script"}