{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\nvar _defaultSettings = require(\"../../constants/default-settings\");\n\n// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/** @typedef {import('./image-modal-container').ImageModalContainerProps} ImageModalContainerProps */\n\n/**\n * A wrapper component in modals contain a image preview of the map with cloud providers\n * It sets export image size based on provider thumbnail size\n * @type {React.FunctionComponent<ImageModalContainerProps>}\n */\nvar ImageModalContainer = function ImageModalContainer(_ref) {\n  var onUpdateImageSetting = _ref.onUpdateImageSetting,\n    cleanupExportImage = _ref.cleanupExportImage,\n    cloudProviders = _ref.cloudProviders,\n    currentProvider = _ref.currentProvider,\n    children = _ref.children;\n  (0, _react.useEffect)(function () {\n    onUpdateImageSetting({\n      exporting: true\n    });\n    return function () {\n      cleanupExportImage();\n    };\n  }, [onUpdateImageSetting, cleanupExportImage]);\n  (0, _react.useEffect)(function () {\n    if (currentProvider && cloudProviders && cloudProviders.length) {\n      var provider = cloudProviders.find(function (p) {\n        return p.name === currentProvider;\n      });\n      if (provider && provider.thumbnail) {\n        onUpdateImageSetting({\n          mapW: (0, _lodash[\"default\"])(provider, ['thumbnail', 'width']) || _defaultSettings.MAP_THUMBNAIL_DIMENSION.width,\n          mapH: (0, _lodash[\"default\"])(provider, ['thumbnail', 'height']) || _defaultSettings.MAP_THUMBNAIL_DIMENSION.height,\n          ratio: _defaultSettings.EXPORT_IMG_RATIOS.CUSTOM,\n          legend: false\n        });\n      }\n    } else {\n      onUpdateImageSetting({\n        mapW: _defaultSettings.MAP_THUMBNAIL_DIMENSION.width,\n        mapH: _defaultSettings.MAP_THUMBNAIL_DIMENSION.height,\n        ratio: _defaultSettings.EXPORT_IMG_RATIOS.CUSTOM,\n        legend: false\n      });\n    }\n  }, [currentProvider, cloudProviders, onUpdateImageSetting]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, children);\n};\nImageModalContainer.defaultProps = {\n  cloudProviders: []\n};\nvar _default = ImageModalContainer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/modals/image-modal-container.js"],"names":["ImageModalContainer","onUpdateImageSetting","cleanupExportImage","cloudProviders","currentProvider","children","exporting","length","provider","find","p","name","thumbnail","mapW","MAP_THUMBNAIL_DIMENSION","width","mapH","height","ratio","EXPORT_IMG_RATIOS","CUSTOM","legend","defaultProps"],"mappings":";;;;;;;;AAoBA,IAAA,MAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AACA,IAAA,OAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AAEA,IAAA,gBAAA,GAAA,OAAA,CAAA,kCAAA,CAAA;;AAvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAOA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAMA,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAA,IAAA,EAMtB;EAAA,IALJC,oBAKI,GAAA,IAAA,CALJA,oBAKI;IAJJC,kBAII,GAAA,IAAA,CAJJA,kBAII;IAHJC,cAGI,GAAA,IAAA,CAHJA,cAGI;IAFJC,eAEI,GAAA,IAAA,CAFJA,eAEI;IADJC,QACI,GAAA,IAAA,CADJA,QACI;EACJ,CAAA,CAAA,EAAA,MAAA,CAAA,SAAA,EAAU,YAAM;IACdJ,oBAAoB,CAAC;MAACK,SAAS,EAAE;IAAZ,CAAD,CAApBL;IACA,OAAO,YAAM;MACXC,kBAAkB,EAAA;IACnB,CAFD;EAGD,CALD,EAKG,CAACD,oBAAD,EAAuBC,kBAAvB,CALH,CAAA;EAOA,CAAA,CAAA,EAAA,MAAA,CAAA,SAAA,EAAU,YAAM;IACd,IAAIE,eAAe,IAAID,cAAnBC,IAAqCD,cAAc,CAACI,MAAxD,EAAgE;MAC9D,IAAMC,QAAQ,GAAG,cAAc,CAACC,IAAf,CAAoB,UAAA,CAAC,EAAA;QAAA,OAAIC,CAAC,CAACC,IAAFD,KAAWN,eAAf;MAAA,CAArB,CAAjB;MAEA,IAAII,QAAQ,IAAIA,QAAQ,CAACI,SAAzB,EAAoC;QAClCX,oBAAoB,CAAC;UACnBY,IAAI,EAAE,CAAA,CAAA,EAAA,OAAA,CAAA,SAAA,CAAA,EAAIL,QAAJ,EAAc,CAAC,WAAD,EAAc,OAAd,CAAd,CAAA,IAAyCM,gBAAAA,CAAAA,uBAAAA,CAAwBC,KADpD;UAEnBC,IAAI,EAAE,CAAA,CAAA,EAAA,OAAA,CAAA,SAAA,CAAA,EAAIR,QAAJ,EAAc,CAAC,WAAD,EAAc,QAAd,CAAd,CAAA,IAA0CM,gBAAAA,CAAAA,uBAAAA,CAAwBG,MAFrD;UAGnBC,KAAK,EAAEC,gBAAAA,CAAAA,iBAAAA,CAAkBC,MAHN;UAInBC,MAAM,EAAE;QAJW,CAAD,CAApBpB;MAMD;IACF,CAXD,MAWO;MACLA,oBAAoB,CAAC;QACnBY,IAAI,EAAEC,gBAAAA,CAAAA,uBAAAA,CAAwBC,KADX;QAEnBC,IAAI,EAAEF,gBAAAA,CAAAA,uBAAAA,CAAwBG,MAFX;QAGnBC,KAAK,EAAEC,gBAAAA,CAAAA,iBAAAA,CAAkBC,MAHN;QAInBC,MAAM,EAAE;MAJW,CAAD,CAApBpB;IAMD;EACF,CApBD,EAoBG,CAACG,eAAD,EAAkBD,cAAlB,EAAkCF,oBAAlC,CApBH,CAAA;EAsBA,OAAA,aAAO,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,MAAA,CAAA,SAAA,CAAA,CAAA,QAAA,EAAA,IAAA,EAAGI,QAAH,CAAP;AACD,CArCD;AAuCAL,mBAAmB,CAACsB,YAApBtB,GAAmC;EACjCG,cAAc,EAAE;AADiB,CAAnCH;eAIeA,mB","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useEffect} from 'react';\nimport get from 'lodash.get';\n\nimport {MAP_THUMBNAIL_DIMENSION, EXPORT_IMG_RATIOS} from 'constants/default-settings';\n\n/** @typedef {import('./image-modal-container').ImageModalContainerProps} ImageModalContainerProps */\n\n/**\n * A wrapper component in modals contain a image preview of the map with cloud providers\n * It sets export image size based on provider thumbnail size\n * @type {React.FunctionComponent<ImageModalContainerProps>}\n */\nconst ImageModalContainer = ({\n  onUpdateImageSetting,\n  cleanupExportImage,\n  cloudProviders,\n  currentProvider,\n  children\n}) => {\n  useEffect(() => {\n    onUpdateImageSetting({exporting: true});\n    return () => {\n      cleanupExportImage();\n    };\n  }, [onUpdateImageSetting, cleanupExportImage]);\n\n  useEffect(() => {\n    if (currentProvider && cloudProviders && cloudProviders.length) {\n      const provider = cloudProviders.find(p => p.name === currentProvider);\n\n      if (provider && provider.thumbnail) {\n        onUpdateImageSetting({\n          mapW: get(provider, ['thumbnail', 'width']) || MAP_THUMBNAIL_DIMENSION.width,\n          mapH: get(provider, ['thumbnail', 'height']) || MAP_THUMBNAIL_DIMENSION.height,\n          ratio: EXPORT_IMG_RATIOS.CUSTOM,\n          legend: false\n        });\n      }\n    } else {\n      onUpdateImageSetting({\n        mapW: MAP_THUMBNAIL_DIMENSION.width,\n        mapH: MAP_THUMBNAIL_DIMENSION.height,\n        ratio: EXPORT_IMG_RATIOS.CUSTOM,\n        legend: false\n      });\n    }\n  }, [currentProvider, cloudProviders, onUpdateImageSetting]);\n\n  return <>{children}</>;\n};\n\nImageModalContainer.defaultProps = {\n  cloudProviders: []\n};\n\nexport default ImageModalContainer;\n"]},"metadata":{},"sourceType":"script"}