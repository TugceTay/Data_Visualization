{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _sliderHandle = _interopRequireDefault(require(\"./slider-handle\"));\nvar _sliderBarHandle = _interopRequireDefault(require(\"./slider-bar-handle\"));\nvar _dataUtils = require(\"../../../utils/data-utils\");\nvar _templateObject, _templateObject2;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction noop() {}\nvar StyledRangeSlider = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  position: relative;\\n  background-color: \", \";\\n  \", \";\\n  \", \";\\n\"])), function (props) {\n  return props.theme.sliderBarBgd;\n}, function (props) {\n  return \"\".concat(props.vertical ? 'width' : 'height', \": \").concat(props.theme.sliderBarHeight, \"px\");\n}, function (props) {\n  return \"\".concat(props.vertical ? 'height' : 'width', \": 100%\");\n});\nvar SliderWrapper = _styledComponents[\"default\"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  flex-grow: 1;\\n\"])));\nvar Slider = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(Slider, _Component);\n  var _super = _createSuper(Slider);\n  function Slider() {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, Slider);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"ref\", /*#__PURE__*/(0, _react.createRef)());\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"track\", /*#__PURE__*/(0, _react.createRef)());\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_setAnchor\", function (x) {\n      // used to calculate delta\n      _this._anchor = x;\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"slide0Listener\", function (x) {\n      var _this$props = _this.props,\n        value1 = _this$props.value1,\n        minValue = _this$props.minValue;\n      var val = _this._getValue(minValue, x);\n      _this.props.onSlider0Change((0, _dataUtils.clamp)([minValue, value1], val));\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"slide1Listener\", function (x) {\n      var _this$props2 = _this.props,\n        minValue = _this$props2.minValue,\n        maxValue = _this$props2.maxValue,\n        value0 = _this$props2.value0;\n      var val = _this._getValue(minValue, x);\n      _this.props.onSlider1Change((0, _dataUtils.clamp)([value0, maxValue], val));\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"sliderBarListener\", function (x) {\n      var _this$props3 = _this.props,\n        value0 = _this$props3.value0,\n        value1 = _this$props3.value1,\n        minValue = _this$props3.minValue,\n        maxValue = _this$props3.maxValue; // for slider bar, we use distance delta\n\n      var anchor = _this._anchor;\n      var length = value1 - value0; // the length of the selected range shouldn't change when clamping\n\n      var val0 = (0, _dataUtils.clamp)([minValue, maxValue - length], _this._getValue(value0, x - anchor));\n      var val1 = (0, _dataUtils.clamp)([val0 + length, maxValue], _this._getValue(value1, x - anchor));\n      var deltaX = _this._getDeltaX(val0 - _this.props.value0);\n      _this.props.onSliderBarChange(val0, val1); // update anchor\n\n      _this._anchor = _this._anchor + deltaX;\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"calcHandleLeft0\", function (w, l, num) {\n      return w === 0 ? \"calc(\".concat(l, \"% - \").concat(_this.props.sliderHandleWidth / 2, \"px)\") : \"calc(\".concat(l, \"% - \").concat(_this.props.sliderHandleWidth / 2, \"px)\");\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"calcHandleLeft1\", function (w, l) {\n      return _this.props.isRanged && w === 0 ? \"\".concat(l, \"%\") : \"calc(\".concat(l + w, \"% - \").concat(_this.props.sliderHandleWidth / 2, \"px)\");\n    });\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(Slider, [{\n    key: \"_getBaseDistance\",\n    value: function _getBaseDistance() {\n      return this.props.vertical ? this.ref.current.offsetHeight : this.ref.current.offsetWidth;\n    }\n  }, {\n    key: \"_getDeltaVal\",\n    value: function _getDeltaVal(x) {\n      var percent = x / this._getBaseDistance();\n      var maxDelta = this.props.maxValue - this.props.minValue;\n      return percent * maxDelta;\n    }\n  }, {\n    key: \"_getDeltaX\",\n    value: function _getDeltaX(v) {\n      var percent = v / (this.props.maxValue - this.props.minValue);\n      var maxDelta = this._getBaseDistance();\n      return percent * maxDelta;\n    }\n  }, {\n    key: \"_getValue\",\n    value: function _getValue(baseV, offset) {\n      // offset is the distance between slider handle and track left\n      var rawValue = baseV + this._getDeltaVal(offset);\n      return this._normalizeValue(rawValue);\n    }\n  }, {\n    key: \"_normalizeValue\",\n    value: function _normalizeValue(val) {\n      var _this$props4 = this.props,\n        minValue = _this$props4.minValue,\n        step = _this$props4.step,\n        marks = _this$props4.marks;\n      return (0, _dataUtils.normalizeSliderValue)(val, minValue, step, marks);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props5 = this.props,\n        classSet = _this$props5.classSet,\n        disabled = _this$props5.disabled,\n        isRanged = _this$props5.isRanged,\n        maxValue = _this$props5.maxValue,\n        minValue = _this$props5.minValue,\n        value1 = _this$props5.value1,\n        vertical = _this$props5.vertical,\n        sliderHandleWidth = _this$props5.sliderHandleWidth,\n        showTooltip = _this$props5.showTooltip;\n      var value0 = !isRanged && minValue > 0 ? minValue : this.props.value0;\n      var currValDelta = value1 - value0;\n      var maxDelta = maxValue - minValue;\n      var width = currValDelta / maxDelta * 100;\n      var v0Left = (value0 - minValue) / maxDelta * 100;\n      return /*#__PURE__*/_react[\"default\"].createElement(SliderWrapper, {\n        className: (0, _classnames[\"default\"])('kg-slider', _objectSpread(_objectSpread({}, classSet), {}, {\n          disabled: disabled\n        })),\n        ref: this.ref,\n        isRanged: isRanged,\n        vertical: vertical\n      }, /*#__PURE__*/_react[\"default\"].createElement(StyledRangeSlider, {\n        className: \"kg-range-slider\",\n        vertical: vertical,\n        ref: this.track\n      }, /*#__PURE__*/_react[\"default\"].createElement(_sliderHandle[\"default\"], {\n        left: this.calcHandleLeft0(width, v0Left),\n        valueListener: this.slide0Listener,\n        sliderHandleWidth: sliderHandleWidth,\n        display: isRanged,\n        vertical: vertical,\n        showTooltip: showTooltip,\n        track: this.track\n      }), /*#__PURE__*/_react[\"default\"].createElement(_sliderHandle[\"default\"], {\n        left: this.calcHandleLeft1(width, v0Left),\n        valueListener: this.slide1Listener,\n        sliderHandleWidth: sliderHandleWidth,\n        vertical: vertical,\n        value: value1,\n        showTooltip: showTooltip,\n        track: this.track\n      }), /*#__PURE__*/_react[\"default\"].createElement(_sliderBarHandle[\"default\"], {\n        width: width,\n        v0Left: v0Left,\n        enableBarDrag: this.props.enableBarDrag,\n        sliderBarListener: this.sliderBarListener,\n        vertical: vertical,\n        track: this.track,\n        setAnchor: this._setAnchor\n      })));\n    }\n  }]);\n  return Slider;\n}(_react.Component);\nexports[\"default\"] = Slider;\n(0, _defineProperty2[\"default\"])(Slider, \"propTypes\", {\n  title: _propTypes[\"default\"].string,\n  isRanged: _propTypes[\"default\"].bool,\n  value0: _propTypes[\"default\"].number,\n  value1: _propTypes[\"default\"].number,\n  minValue: _propTypes[\"default\"].number,\n  maxValue: _propTypes[\"default\"].number,\n  sliderHandleWidth: _propTypes[\"default\"].number,\n  onSlider0Change: _propTypes[\"default\"].func,\n  onInput0Change: _propTypes[\"default\"].func,\n  onSlider1Change: _propTypes[\"default\"].func,\n  onInput1Change: _propTypes[\"default\"].func,\n  onSliderBarChange: _propTypes[\"default\"].func,\n  step: _propTypes[\"default\"].number,\n  enableBarDrag: _propTypes[\"default\"].bool,\n  showTooltip: _propTypes[\"default\"].bool\n});\n(0, _defineProperty2[\"default\"])(Slider, \"defaultProps\", {\n  title: '',\n  isRanged: true,\n  value0: 0,\n  value1: 100,\n  minValue: 0,\n  maxValue: 100,\n  step: 1,\n  sliderHandleWidth: 12,\n  enableBarDrag: false,\n  onSlider0Change: noop,\n  onInput0Change: noop,\n  onSlider1Change: noop,\n  onInput1Change: noop,\n  onSliderBarChange: noop,\n  disabled: false,\n  vertical: false,\n  showTooltip: false\n});","map":{"version":3,"sources":["../../../../src/components/common/slider/slider.js"],"names":["noop","StyledRangeSlider","styled","div","props","theme","sliderBarBgd","vertical","sliderBarHeight","SliderWrapper","Slider","Component","title","PropTypes","string","isRanged","bool","value0","number","value1","minValue","maxValue","sliderHandleWidth","onSlider0Change","func","onInput0Change","onSlider1Change","onInput1Change","onSliderBarChange","step","enableBarDrag","showTooltip","disabled","_anchor","x","ref","current","offsetHeight","offsetWidth","percent","_getBaseDistance","maxDelta","v","baseV","offset","rawValue","_getDeltaVal","_normalizeValue","val","marks","_getValue","anchor","length","val0","val1","deltaX","_getDeltaX","w","l","num","classSet","currValDelta","width","v0Left","track","calcHandleLeft0","slide0Listener","calcHandleLeft1","slide1Listener","sliderBarListener","_setAnchor"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component, createRef} from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\n\nimport SliderHandle from './slider-handle';\nimport SliderBarHandle from './slider-bar-handle';\nimport {normalizeSliderValue, clamp} from 'utils/data-utils';\n\nfunction noop() {}\n\nconst StyledRangeSlider = styled.div`\n  position: relative;\n  background-color: ${props => props.theme.sliderBarBgd};\n  ${props => `${props.vertical ? 'width' : 'height'}: ${props.theme.sliderBarHeight}px`};\n  ${props => `${props.vertical ? 'height' : 'width'}: 100%`};\n`;\n\nconst SliderWrapper = styled.div`\n  flex-grow: 1;\n`;\n\nexport default class Slider extends Component {\n  static propTypes = {\n    title: PropTypes.string,\n    isRanged: PropTypes.bool,\n    value0: PropTypes.number,\n    value1: PropTypes.number,\n    minValue: PropTypes.number,\n    maxValue: PropTypes.number,\n    sliderHandleWidth: PropTypes.number,\n    onSlider0Change: PropTypes.func,\n    onInput0Change: PropTypes.func,\n    onSlider1Change: PropTypes.func,\n    onInput1Change: PropTypes.func,\n    onSliderBarChange: PropTypes.func,\n    step: PropTypes.number,\n    enableBarDrag: PropTypes.bool,\n    showTooltip: PropTypes.bool\n  };\n\n  static defaultProps = {\n    title: '',\n    isRanged: true,\n    value0: 0,\n    value1: 100,\n    minValue: 0,\n    maxValue: 100,\n    step: 1,\n    sliderHandleWidth: 12,\n    enableBarDrag: false,\n    onSlider0Change: noop,\n    onInput0Change: noop,\n    onSlider1Change: noop,\n    onInput1Change: noop,\n    onSliderBarChange: noop,\n    disabled: false,\n    vertical: false,\n    showTooltip: false\n  };\n\n  ref = createRef();\n  track = createRef();\n\n  _setAnchor = x => {\n    // used to calculate delta\n    this._anchor = x;\n  };\n\n  _getBaseDistance() {\n    return this.props.vertical ? this.ref.current.offsetHeight : this.ref.current.offsetWidth;\n  }\n\n  _getDeltaVal(x) {\n    const percent = x / this._getBaseDistance();\n    const maxDelta = this.props.maxValue - this.props.minValue;\n    return percent * maxDelta;\n  }\n  _getDeltaX(v) {\n    const percent = v / (this.props.maxValue - this.props.minValue);\n    const maxDelta = this._getBaseDistance();\n    return percent * maxDelta;\n  }\n\n  _getValue(baseV, offset) {\n    // offset is the distance between slider handle and track left\n    const rawValue = baseV + this._getDeltaVal(offset);\n\n    return this._normalizeValue(rawValue);\n  }\n\n  _normalizeValue(val) {\n    const {minValue, step, marks} = this.props;\n    return normalizeSliderValue(val, minValue, step, marks);\n  }\n\n  slide0Listener = x => {\n    const {value1, minValue} = this.props;\n    const val = this._getValue(minValue, x);\n    this.props.onSlider0Change(clamp([minValue, value1], val));\n  };\n\n  slide1Listener = x => {\n    const {minValue, maxValue, value0} = this.props;\n    const val = this._getValue(minValue, x);\n    this.props.onSlider1Change(clamp([value0, maxValue], val));\n  };\n\n  sliderBarListener = x => {\n    const {value0, value1, minValue, maxValue} = this.props;\n    // for slider bar, we use distance delta\n    const anchor = this._anchor;\n    const length = value1 - value0; // the length of the selected range shouldn't change when clamping\n    const val0 = clamp([minValue, maxValue - length], this._getValue(value0, x - anchor));\n    const val1 = clamp([val0 + length, maxValue], this._getValue(value1, x - anchor));\n\n    const deltaX = this._getDeltaX(val0 - this.props.value0);\n    this.props.onSliderBarChange(val0, val1);\n    // update anchor\n    this._anchor = this._anchor + deltaX;\n  };\n\n  calcHandleLeft0 = (w, l, num) => {\n    return w === 0\n      ? `calc(${l}% - ${this.props.sliderHandleWidth / 2}px)`\n      : `calc(${l}% - ${this.props.sliderHandleWidth / 2}px)`;\n  };\n\n  calcHandleLeft1 = (w, l) => {\n    return this.props.isRanged && w === 0\n      ? `${l}%`\n      : `calc(${l + w}% - ${this.props.sliderHandleWidth / 2}px)`;\n  };\n\n  render() {\n    const {\n      classSet,\n      disabled,\n      isRanged,\n      maxValue,\n      minValue,\n      value1,\n      vertical,\n      sliderHandleWidth,\n      showTooltip\n    } = this.props;\n    const value0 = !isRanged && minValue > 0 ? minValue : this.props.value0;\n    const currValDelta = value1 - value0;\n    const maxDelta = maxValue - minValue;\n    const width = (currValDelta / maxDelta) * 100;\n\n    const v0Left = ((value0 - minValue) / maxDelta) * 100;\n\n    return (\n      <SliderWrapper\n        className={classnames('kg-slider', {...classSet, disabled})}\n        ref={this.ref}\n        isRanged={isRanged}\n        vertical={vertical}\n      >\n        <StyledRangeSlider className=\"kg-range-slider\" vertical={vertical} ref={this.track}>\n          <SliderHandle\n            left={this.calcHandleLeft0(width, v0Left)}\n            valueListener={this.slide0Listener}\n            sliderHandleWidth={sliderHandleWidth}\n            display={isRanged}\n            vertical={vertical}\n            showTooltip={showTooltip}\n            track={this.track}\n          />\n          <SliderHandle\n            left={this.calcHandleLeft1(width, v0Left)}\n            valueListener={this.slide1Listener}\n            sliderHandleWidth={sliderHandleWidth}\n            vertical={vertical}\n            value={value1}\n            showTooltip={showTooltip}\n            track={this.track}\n          />\n          <SliderBarHandle\n            width={width}\n            v0Left={v0Left}\n            enableBarDrag={this.props.enableBarDrag}\n            sliderBarListener={this.sliderBarListener}\n            vertical={vertical}\n            track={this.track}\n            setAnchor={this._setAnchor}\n          />\n        </StyledRangeSlider>\n      </SliderWrapper>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"script"}