{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _window = _interopRequireDefault(require(\"global/window\"));\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/** @typedef {import('./file-drop').FileDropProps} FileDropProps */\n\n/** @augments React.PureComponent<FileDropProps> */\nvar FileDrop = /*#__PURE__*/function (_React$PureComponent) {\n  (0, _inherits2[\"default\"])(FileDrop, _React$PureComponent);\n  var _super = _createSuper(FileDrop);\n  function FileDrop(props) {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, FileDrop);\n    _this = _super.call(this, props);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"resetDragging\", function () {\n      _this.frameDragCounter = 0;\n      _this.setState({\n        draggingOverFrame: false,\n        draggingOverTarget: false\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleWindowDragOverOrDrop\", function (event) {\n      // This prevents the browser from trying to load whatever file the user dropped on the window\n      event.preventDefault();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleFrameDrag\", function (event) {\n      // Only allow dragging of files\n      if (!FileDrop.eventHasFiles(event)) return; // We are listening for events on the 'frame', so every time the user drags over any element in the frame's tree,\n      // the event bubbles up to the frame. By keeping count of how many \"dragenters\" we get, we can tell if they are still\n      // \"draggingOverFrame\" (b/c you get one \"dragenter\" initially, and one \"dragenter\"/one \"dragleave\" for every bubble)\n      // This is far better than a \"dragover\" handler, which would be calling `setState` continuously.\n\n      _this.frameDragCounter += event.type === 'dragenter' ? 1 : -1;\n      if (_this.frameDragCounter === 1) {\n        _this.setState({\n          draggingOverFrame: true\n        });\n        if (_this.props.onFrameDragEnter) _this.props.onFrameDragEnter(event);\n        return;\n      }\n      if (_this.frameDragCounter === 0) {\n        _this.setState({\n          draggingOverFrame: false\n        });\n        if (_this.props.onFrameDragLeave) _this.props.onFrameDragLeave(event);\n        return;\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleFrameDrop\", function (event) {\n      event.preventDefault();\n      if (!_this.state.draggingOverTarget) {\n        _this.resetDragging();\n        if (_this.props.onFrameDrop) _this.props.onFrameDrop(event);\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleDragOver\", function (event) {\n      if (FileDrop.eventHasFiles(event)) {\n        _this.setState({\n          draggingOverTarget: true\n        });\n        if (!FileDrop.isIE() && _this.props.dropEffect) event.dataTransfer.dropEffect = _this.props.dropEffect;\n        if (_this.props.onDragOver) _this.props.onDragOver(event);\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleDragLeave\", function (event) {\n      _this.setState({\n        draggingOverTarget: false\n      });\n      if (_this.props.onDragLeave) _this.props.onDragLeave(event);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleDrop\", function (event) {\n      if (_this.props.onDrop && FileDrop.eventHasFiles(event)) {\n        var files = event.dataTransfer ? event.dataTransfer.files : null;\n        _this.props.onDrop(files, event);\n      }\n      _this.resetDragging();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"stopFrameListeners\", function (frame) {\n      if (frame) {\n        frame.removeEventListener('dragenter', _this.handleFrameDrag);\n        frame.removeEventListener('dragleave', _this.handleFrameDrag);\n        frame.removeEventListener('drop', _this.handleFrameDrop);\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"startFrameListeners\", function (frame) {\n      if (frame) {\n        frame.addEventListener('dragenter', _this.handleFrameDrag);\n        frame.addEventListener('dragleave', _this.handleFrameDrag);\n        frame.addEventListener('drop', _this.handleFrameDrop);\n      }\n    });\n    _this.frameDragCounter = 0;\n    _this.state = {\n      draggingOverFrame: false,\n      draggingOverTarget: false\n    };\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(FileDrop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.startFrameListeners(this.props.frame);\n      this.resetDragging();\n      _window[\"default\"].addEventListener('dragover', this.handleWindowDragOverOrDrop);\n      _window[\"default\"].addEventListener('drop', this.handleWindowDragOverOrDrop);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.frame !== this.props.frame) {\n        this.resetDragging();\n        this.stopFrameListeners(prevProps.frame);\n        this.startFrameListeners(this.props.frame);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopFrameListeners(this.props.frame);\n      _window[\"default\"].removeEventListener('dragover', this.handleWindowDragOverOrDrop);\n      _window[\"default\"].removeEventListener('drop', this.handleWindowDragOverOrDrop);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        children = _this$props.children,\n        className = _this$props.className,\n        targetClassName = _this$props.targetClassName,\n        draggingOverFrameClassName = _this$props.draggingOverFrameClassName,\n        draggingOverTargetClassName = _this$props.draggingOverTargetClassName;\n      var _this$state = this.state,\n        draggingOverTarget = _this$state.draggingOverTarget,\n        draggingOverFrame = _this$state.draggingOverFrame;\n      var fileDropTargetClassName = targetClassName;\n      if (draggingOverFrame) fileDropTargetClassName += \" \".concat(draggingOverFrameClassName);\n      if (draggingOverTarget) fileDropTargetClassName += \" \".concat(draggingOverTargetClassName);\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: className,\n        onDragOver: this.handleDragOver,\n        onDragLeave: this.handleDragLeave,\n        onDrop: this.handleDrop\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: fileDropTargetClassName\n      }, children));\n    }\n  }]);\n  return FileDrop;\n}(_react[\"default\"].PureComponent);\n(0, _defineProperty2[\"default\"])(FileDrop, \"isIE\", function () {\n  return _window[\"default\"] && _window[\"default\"].navigator && ((_window[\"default\"].navigator.userAgent || []).includes('MSIE') || (_window[\"default\"].navigator.appVersion || []).includes('Trident/'));\n});\n(0, _defineProperty2[\"default\"])(FileDrop, \"eventHasFiles\", function (event) {\n  // In most browsers this is an array, but in IE11 it's an Object :(\n  var hasFiles = false;\n  if (event.dataTransfer) {\n    var types = event.dataTransfer.types;\n    for (var keyOrIndex in types) {\n      if (types[keyOrIndex] === 'Files') {\n        hasFiles = true;\n        break;\n      }\n    }\n  }\n  return hasFiles;\n});\n(0, _defineProperty2[\"default\"])(FileDrop, \"defaultProps\", {\n  dropEffect: 'copy',\n  frame: _window[\"default\"] ? _window[\"default\"].document : undefined,\n  className: 'file-drop',\n  targetClassName: 'file-drop-target',\n  draggingOverFrameClassName: 'file-drop-dragging-over-frame',\n  draggingOverTargetClassName: 'file-drop-dragging-over-target'\n});\nvar _default = FileDrop;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../../src/components/common/file-uploader/file-drop.js"],"names":["FileDrop","React","PureComponent","window","navigator","userAgent","includes","appVersion","hasFiles","event","dataTransfer","types","keyOrIndex","dropEffect","frame","document","undefined","className","targetClassName","draggingOverFrameClassName","draggingOverTargetClassName","props","frameDragCounter","state","draggingOverFrame","draggingOverTarget","startFrameListeners","resetDragging","addEventListener","handleWindowDragOverOrDrop","prevProps","stopFrameListeners","removeEventListener","setState","preventDefault","eventHasFiles","type","onFrameDragEnter","onFrameDragLeave","onFrameDrop","isIE","onDragOver","onDragLeave","onDrop","files","handleFrameDrag","handleFrameDrop","children","fileDropTargetClassName","handleDragOver","handleDragLeave","handleDrop"],"mappings":";;;;;;;;;;;;;;AAwBA,IAAA,MAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AACA,IAAA,OAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;AAEA;IACMA,Q;;;EAgCJ,SAAA,QAAA,CAAYqB,KAAZ,EAAmB;IAAA,IAAA,KAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,IAAA,EAAA,QAAA,CAAA;IACjB,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAMA,KAAN,CAAA;IADiB,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,eAAA,EA2BH,YAAM;MACpB,KAAA,CAAKC,gBAAL,GAAwB,CAAxB;MACA,KAAA,CAAKW,QAAL,CAAc;QAACT,iBAAiB,EAAE,KAApB;QAA2BC,kBAAkB,EAAE;MAA/C,CAAd,CAAA;IACD,CA9BkB,CAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,4BAAA,EAgCU,UAAA,KAAK,EAAI;MACpC;MACAhB,KAAK,CAACyB,cAANzB,EAAAA;IACD,CAnCkB,CAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,iBAAA,EAqCD,UAAA,KAAK,EAAI;MACzB;MACA,IAAI,CAACT,QAAQ,CAACmC,aAATnC,CAAuBS,KAAvBT,CAAL,EAAoC,OAFX,CAIzB;MACA;MACA;MACA;;MACA,KAAA,CAAKsB,gBAAL,IAAyBb,KAAK,CAAC2B,IAAN3B,KAAe,WAAfA,GAA6B,CAA7BA,GAAiC,CAAC,CAA3D;MAEA,IAAI,KAAA,CAAKa,gBAAL,KAA0B,CAA9B,EAAiC;QAC/B,KAAA,CAAKW,QAAL,CAAc;UAACT,iBAAiB,EAAE;QAApB,CAAd,CAAA;QACA,IAAI,KAAA,CAAKH,KAAL,CAAWgB,gBAAf,EAAiC,KAAA,CAAKhB,KAAL,CAAWgB,gBAAX,CAA4B5B,KAA5B,CAAA;QACjC;MACD;MAED,IAAI,KAAA,CAAKa,gBAAL,KAA0B,CAA9B,EAAiC;QAC/B,KAAA,CAAKW,QAAL,CAAc;UAACT,iBAAiB,EAAE;QAApB,CAAd,CAAA;QACA,IAAI,KAAA,CAAKH,KAAL,CAAWiB,gBAAf,EAAiC,KAAA,CAAKjB,KAAL,CAAWiB,gBAAX,CAA4B7B,KAA5B,CAAA;QACjC;MACD;IACF,CA1DkB,CAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,iBAAA,EA4DD,UAAA,KAAK,EAAI;MACzBA,KAAK,CAACyB,cAANzB,EAAAA;MACA,IAAI,CAAC,KAAA,CAAKc,KAAL,CAAWE,kBAAhB,EAAoC;QAClC,KAAA,CAAKE,aAAL,EAAA;QACA,IAAI,KAAA,CAAKN,KAAL,CAAWkB,WAAf,EAA4B,KAAA,CAAKlB,KAAL,CAAWkB,WAAX,CAAuB9B,KAAvB,CAAA;MAC7B;IACF,CAlEkB,CAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,gBAAA,EAoEF,UAAA,KAAK,EAAI;MACxB,IAAIT,QAAQ,CAACmC,aAATnC,CAAuBS,KAAvBT,CAAJ,EAAmC;QACjC,KAAA,CAAKiC,QAAL,CAAc;UAACR,kBAAkB,EAAE;QAArB,CAAd,CAAA;QACA,IAAI,CAACzB,QAAQ,CAACwC,IAATxC,EAAD,IAAoB,KAAA,CAAKqB,KAAL,CAAWR,UAAnC,EACEJ,KAAK,CAACC,YAAND,CAAmBI,UAAnBJ,GAAgC,KAAA,CAAKY,KAAL,CAAWR,UAA3CJ;QACF,IAAI,KAAA,CAAKY,KAAL,CAAWoB,UAAf,EAA2B,KAAA,CAAKpB,KAAL,CAAWoB,UAAX,CAAsBhC,KAAtB,CAAA;MAC5B;IACF,CA3EkB,CAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,iBAAA,EA6ED,UAAA,KAAK,EAAI;MACzB,KAAA,CAAKwB,QAAL,CAAc;QAACR,kBAAkB,EAAE;MAArB,CAAd,CAAA;MACA,IAAI,KAAA,CAAKJ,KAAL,CAAWqB,WAAf,EAA4B,KAAA,CAAKrB,KAAL,CAAWqB,WAAX,CAAuBjC,KAAvB,CAAA;IAC7B,CAhFkB,CAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA,EAkFN,UAAA,KAAK,EAAI;MACpB,IAAI,KAAA,CAAKY,KAAL,CAAWsB,MAAX,IAAqB3C,QAAQ,CAACmC,aAATnC,CAAuBS,KAAvBT,CAAzB,EAAwD;QACtD,IAAM4C,KAAK,GAAGnC,KAAK,CAACC,YAAND,GAAqBA,KAAK,CAACC,YAAND,CAAmBmC,KAAxCnC,GAAgD,IAA9D;QACA,KAAA,CAAKY,KAAL,CAAWsB,MAAX,CAAkBC,KAAlB,EAAyBnC,KAAzB,CAAA;MACD;MACD,KAAA,CAAKkB,aAAL,EAAA;IACD,CAxFkB,CAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,oBAAA,EA0FE,UAAA,KAAK,EAAI;MAC5B,IAAIb,KAAJ,EAAW;QACTA,KAAK,CAACkB,mBAANlB,CAA0B,WAA1BA,EAAuC,KAAA,CAAK+B,eAA5C/B,CAAAA;QACAA,KAAK,CAACkB,mBAANlB,CAA0B,WAA1BA,EAAuC,KAAA,CAAK+B,eAA5C/B,CAAAA;QACAA,KAAK,CAACkB,mBAANlB,CAA0B,MAA1BA,EAAkC,KAAA,CAAKgC,eAAvChC,CAAAA;MACD;IACF,CAhGkB,CAAA;IAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,qBAAA,EAkGG,UAAA,KAAK,EAAI;MAC7B,IAAIA,KAAJ,EAAW;QACTA,KAAK,CAACc,gBAANd,CAAuB,WAAvBA,EAAoC,KAAA,CAAK+B,eAAzC/B,CAAAA;QACAA,KAAK,CAACc,gBAANd,CAAuB,WAAvBA,EAAoC,KAAA,CAAK+B,eAAzC/B,CAAAA;QACAA,KAAK,CAACc,gBAANd,CAAuB,MAAvBA,EAA+B,KAAA,CAAKgC,eAApChC,CAAAA;MACD;IACF,CAxGkB,CAAA;IAEjB,KAAA,CAAKQ,gBAAL,GAAwB,CAAxB;IACA,KAAA,CAAKC,KAAL,GAAa;MAACC,iBAAiB,EAAE,KAApB;MAA2BC,kBAAkB,EAAE;IAA/C,CAAb;IAHiB,OAAA,KAAA;EAIlB;;;WAED,SAAA,iBAAA,GAAoB;MAClB,IAAA,CAAKC,mBAAL,CAAyB,IAAA,CAAKL,KAAL,CAAWP,KAApC,CAAA;MACA,IAAA,CAAKa,aAAL,EAAA;MACAxB,OAAAA,CAAAA,SAAAA,CAAAA,CAAOyB,gBAAPzB,CAAwB,UAAxBA,EAAoC,IAAA,CAAK0B,0BAAzC1B,CAAAA;MACAA,OAAAA,CAAAA,SAAAA,CAAAA,CAAOyB,gBAAPzB,CAAwB,MAAxBA,EAAgC,IAAA,CAAK0B,0BAArC1B,CAAAA;IACD;;;WAED,SAAA,kBAAA,CAAmB2B,SAAnB,EAA8B;MAC5B,IAAIA,SAAS,CAAChB,KAAVgB,KAAoB,IAAA,CAAKT,KAAL,CAAWP,KAAnC,EAA0C;QACxC,IAAA,CAAKa,aAAL,EAAA;QACA,IAAA,CAAKI,kBAAL,CAAwBD,SAAS,CAAChB,KAAlC,CAAA;QACA,IAAA,CAAKY,mBAAL,CAAyB,IAAA,CAAKL,KAAL,CAAWP,KAApC,CAAA;MACD;IACF;;;WAED,SAAA,oBAAA,GAAuB;MACrB,IAAA,CAAKiB,kBAAL,CAAwB,IAAA,CAAKV,KAAL,CAAWP,KAAnC,CAAA;MACAX,OAAAA,CAAAA,SAAAA,CAAAA,CAAO6B,mBAAP7B,CAA2B,UAA3BA,EAAuC,IAAA,CAAK0B,0BAA5C1B,CAAAA;MACAA,OAAAA,CAAAA,SAAAA,CAAAA,CAAO6B,mBAAP7B,CAA2B,MAA3BA,EAAmC,IAAA,CAAK0B,0BAAxC1B,CAAAA;IACD;;;WAiFD,SAAA,MAAA,GAAS;MAAA,IAAA,WAAA,GAOH,IAAA,CAAKkB,KAPF;QAEL0B,QAFK,GAAA,WAAA,CAELA,QAFK;QAGL9B,SAHK,GAAA,WAAA,CAGLA,SAHK;QAILC,eAJK,GAAA,WAAA,CAILA,eAJK;QAKLC,0BALK,GAAA,WAAA,CAKLA,0BALK;QAMLC,2BANK,GAAA,WAAA,CAMLA,2BANK;MAAA,IAAA,WAAA,GAQyC,IAAA,CAAKG,KAR9C;QAQAE,kBARA,GAAA,WAAA,CAQAA,kBARA;QAQoBD,iBARpB,GAAA,WAAA,CAQoBA,iBARpB;MAUP,IAAIwB,uBAAuB,GAAG9B,eAA9B;MACA,IAAIM,iBAAJ,EAAuBwB,uBAAuB,IAAA,GAAA,CAAA,MAAA,CAAQ7B,0BAAR,CAAvB6B;MACvB,IAAIvB,kBAAJ,EAAwBuB,uBAAuB,IAAA,GAAA,CAAA,MAAA,CAAQ5B,2BAAR,CAAvB4B;MAExB,OAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;QACE,SAAS,EAAE/B,SADb;QAEE,UAAU,EAAE,IAAA,CAAKgC,cAFnB;QAGE,WAAW,EAAE,IAAA,CAAKC,eAHpB;QAIE,MAAM,EAAE,IAAA,CAAKC;MAJf,CAAA,EAAA,aAME,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;QAAK,SAAS,EAAEH;MAAhB,CAAA,EAA0CD,QAA1C,CANF,CADF;IAUD;;;EAlKoB9C,MAAAA,CAAAA,SAAAA,CAAAA,CAAMC,a;iCAAvBF,Q,UACU,YAAA;EAAA,OACZG,OAAAA,CAAAA,SAAAA,CAAAA,IACAA,OAAAA,CAAAA,SAAAA,CAAAA,CAAOC,SADPD,KAEC,CAACA,OAAAA,CAAAA,SAAAA,CAAAA,CAAOC,SAAPD,CAAiBE,SAAjBF,IAA8B,EAA/B,EAAmCG,QAAnC,CAA4C,MAA5C,CAAA,IACC,CAACH,OAAAA,CAAAA,SAAAA,CAAAA,CAAOC,SAAPD,CAAiBI,UAAjBJ,IAA+B,EAAhC,EAAoCG,QAApC,CAA6C,UAA7C,CAHFH,CADY;AAAA,C;iCADVH,Q,mBAOmB,UAAA,KAAK,EAAI;EAC9B;EAEA,IAAIQ,QAAQ,GAAG,KAAf;EACA,IAAIC,KAAK,CAACC,YAAV,EAAwB;IACtB,IAAMC,KAAK,GAAGF,KAAK,CAACC,YAAND,CAAmBE,KAAjC;IACA,KAAK,IAAMC,UAAX,IAAyBD,KAAzB,EAAgC;MAC9B,IAAIA,KAAK,CAACC,UAAD,CAALD,KAAsB,OAA1B,EAAmC;QACjCH,QAAQ,GAAG,IAAXA;QACA;MACD;IACF;EACF;EACD,OAAOA,QAAP;AACD,C;iCArBGR,Q,kBAuBkB;EACpBa,UAAU,EAAE,MADQ;EAEpBC,KAAK,EAAEX,OAAAA,CAAAA,SAAAA,CAAAA,GAASA,OAAAA,CAAAA,SAAAA,CAAAA,CAAOY,QAAhBZ,GAA2Ba,SAFd;EAGpBC,SAAS,EAAE,WAHS;EAIpBC,eAAe,EAAE,kBAJG;EAKpBC,0BAA0B,EAAE,+BALR;EAMpBC,2BAA2B,EAAE;AANT,C;eA8ITpB,Q","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * Copied from https://github.com/sarink/react-file-drop\n * For React 16.8 compatibility\n */\nimport React from 'react';\nimport window from 'global/window';\n\n/** @typedef {import('./file-drop').FileDropProps} FileDropProps */\n\n/** @augments React.PureComponent<FileDropProps> */\nclass FileDrop extends React.PureComponent {\n  static isIE = () =>\n    window &&\n    window.navigator &&\n    ((window.navigator.userAgent || []).includes('MSIE') ||\n      (window.navigator.appVersion || []).includes('Trident/'));\n\n  static eventHasFiles = event => {\n    // In most browsers this is an array, but in IE11 it's an Object :(\n\n    let hasFiles = false;\n    if (event.dataTransfer) {\n      const types = event.dataTransfer.types;\n      for (const keyOrIndex in types) {\n        if (types[keyOrIndex] === 'Files') {\n          hasFiles = true;\n          break;\n        }\n      }\n    }\n    return hasFiles;\n  };\n\n  static defaultProps = {\n    dropEffect: 'copy',\n    frame: window ? window.document : undefined,\n    className: 'file-drop',\n    targetClassName: 'file-drop-target',\n    draggingOverFrameClassName: 'file-drop-dragging-over-frame',\n    draggingOverTargetClassName: 'file-drop-dragging-over-target'\n  };\n\n  constructor(props) {\n    super(props);\n    this.frameDragCounter = 0;\n    this.state = {draggingOverFrame: false, draggingOverTarget: false};\n  }\n\n  componentDidMount() {\n    this.startFrameListeners(this.props.frame);\n    this.resetDragging();\n    window.addEventListener('dragover', this.handleWindowDragOverOrDrop);\n    window.addEventListener('drop', this.handleWindowDragOverOrDrop);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.frame !== this.props.frame) {\n      this.resetDragging();\n      this.stopFrameListeners(prevProps.frame);\n      this.startFrameListeners(this.props.frame);\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopFrameListeners(this.props.frame);\n    window.removeEventListener('dragover', this.handleWindowDragOverOrDrop);\n    window.removeEventListener('drop', this.handleWindowDragOverOrDrop);\n  }\n\n  resetDragging = () => {\n    this.frameDragCounter = 0;\n    this.setState({draggingOverFrame: false, draggingOverTarget: false});\n  };\n\n  handleWindowDragOverOrDrop = event => {\n    // This prevents the browser from trying to load whatever file the user dropped on the window\n    event.preventDefault();\n  };\n\n  handleFrameDrag = event => {\n    // Only allow dragging of files\n    if (!FileDrop.eventHasFiles(event)) return;\n\n    // We are listening for events on the 'frame', so every time the user drags over any element in the frame's tree,\n    // the event bubbles up to the frame. By keeping count of how many \"dragenters\" we get, we can tell if they are still\n    // \"draggingOverFrame\" (b/c you get one \"dragenter\" initially, and one \"dragenter\"/one \"dragleave\" for every bubble)\n    // This is far better than a \"dragover\" handler, which would be calling `setState` continuously.\n    this.frameDragCounter += event.type === 'dragenter' ? 1 : -1;\n\n    if (this.frameDragCounter === 1) {\n      this.setState({draggingOverFrame: true});\n      if (this.props.onFrameDragEnter) this.props.onFrameDragEnter(event);\n      return;\n    }\n\n    if (this.frameDragCounter === 0) {\n      this.setState({draggingOverFrame: false});\n      if (this.props.onFrameDragLeave) this.props.onFrameDragLeave(event);\n      return;\n    }\n  };\n\n  handleFrameDrop = event => {\n    event.preventDefault();\n    if (!this.state.draggingOverTarget) {\n      this.resetDragging();\n      if (this.props.onFrameDrop) this.props.onFrameDrop(event);\n    }\n  };\n\n  handleDragOver = event => {\n    if (FileDrop.eventHasFiles(event)) {\n      this.setState({draggingOverTarget: true});\n      if (!FileDrop.isIE() && this.props.dropEffect)\n        event.dataTransfer.dropEffect = this.props.dropEffect;\n      if (this.props.onDragOver) this.props.onDragOver(event);\n    }\n  };\n\n  handleDragLeave = event => {\n    this.setState({draggingOverTarget: false});\n    if (this.props.onDragLeave) this.props.onDragLeave(event);\n  };\n\n  handleDrop = event => {\n    if (this.props.onDrop && FileDrop.eventHasFiles(event)) {\n      const files = event.dataTransfer ? event.dataTransfer.files : null;\n      this.props.onDrop(files, event);\n    }\n    this.resetDragging();\n  };\n\n  stopFrameListeners = frame => {\n    if (frame) {\n      frame.removeEventListener('dragenter', this.handleFrameDrag);\n      frame.removeEventListener('dragleave', this.handleFrameDrag);\n      frame.removeEventListener('drop', this.handleFrameDrop);\n    }\n  };\n\n  startFrameListeners = frame => {\n    if (frame) {\n      frame.addEventListener('dragenter', this.handleFrameDrag);\n      frame.addEventListener('dragleave', this.handleFrameDrag);\n      frame.addEventListener('drop', this.handleFrameDrop);\n    }\n  };\n\n  render() {\n    const {\n      children,\n      className,\n      targetClassName,\n      draggingOverFrameClassName,\n      draggingOverTargetClassName\n    } = this.props;\n    const {draggingOverTarget, draggingOverFrame} = this.state;\n\n    let fileDropTargetClassName = targetClassName;\n    if (draggingOverFrame) fileDropTargetClassName += ` ${draggingOverFrameClassName}`;\n    if (draggingOverTarget) fileDropTargetClassName += ` ${draggingOverTargetClassName}`;\n\n    return (\n      <div\n        className={className}\n        onDragOver={this.handleDragOver}\n        onDragLeave={this.handleDragLeave}\n        onDrop={this.handleDrop}\n      >\n        <div className={fileDropTargetClassName}>{children}</div>\n      </div>\n    );\n  }\n}\n\nexport default FileDrop;\n"]},"metadata":{},"sourceType":"script"}