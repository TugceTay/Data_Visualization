{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport * as PropTypes from 'prop-types';\nimport MapState from '../utils/map-state';\nimport { LINEAR_TRANSITION_PROPS } from '../utils/map-controller';\nimport { compareVersions } from '../utils/version';\nimport useMapControl, { mapControlDefaultProps, mapControlPropTypes } from './use-map-control';\nvar noop = function noop() {};\nvar propTypes = Object.assign({}, mapControlPropTypes, {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  showCompass: PropTypes.bool,\n  showZoom: PropTypes.bool,\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  compassLabel: PropTypes.string\n});\nvar defaultProps = Object.assign({}, mapControlDefaultProps, {\n  className: '',\n  showCompass: true,\n  showZoom: true,\n  zoomInLabel: 'Zoom In',\n  zoomOutLabel: 'Zoom Out',\n  compassLabel: 'Reset North'\n});\nvar VERSION_LEGACY = 1;\nvar VERSION_1_6 = 2;\nfunction getUIVersion(mapboxVersion) {\n  return compareVersions(mapboxVersion, '1.6.0') >= 0 ? VERSION_1_6 : VERSION_LEGACY;\n}\nfunction updateViewport(context, props, opts) {\n  var viewport = context.viewport;\n  var mapState = new MapState(Object.assign({}, viewport, opts));\n  var viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n  var onViewportChange = props.onViewportChange || context.onViewportChange || noop;\n  var onViewStateChange = props.onViewStateChange || context.onViewStateChange || noop;\n  onViewStateChange({\n    viewState: viewState\n  });\n  onViewportChange(viewState);\n}\nfunction renderButton(type, label, callback, children) {\n  return React.createElement(\"button\", {\n    key: type,\n    className: \"mapboxgl-ctrl-icon mapboxgl-ctrl-\".concat(type),\n    type: \"button\",\n    title: label,\n    onClick: callback\n  }, children || React.createElement(\"span\", {\n    className: \"mapboxgl-ctrl-icon\",\n    \"aria-hidden\": \"true\"\n  }));\n}\nfunction renderCompass(context) {\n  var uiVersion = useMemo(function () {\n    return context.map ? getUIVersion(context.map.version) : VERSION_1_6;\n  }, [context.map]);\n  var bearing = context.viewport.bearing;\n  var style = {\n    transform: \"rotate(\".concat(-bearing, \"deg)\")\n  };\n  return uiVersion === VERSION_1_6 ? React.createElement(\"span\", {\n    className: \"mapboxgl-ctrl-icon\",\n    \"aria-hidden\": \"true\",\n    style: style\n  }) : React.createElement(\"span\", {\n    className: \"mapboxgl-ctrl-compass-arrow\",\n    style: style\n  });\n}\nfunction NavigationControl(props) {\n  var _useMapControl = useMapControl(props),\n    context = _useMapControl.context,\n    containerRef = _useMapControl.containerRef;\n  var onZoomIn = function onZoomIn() {\n    updateViewport(context, props, {\n      zoom: context.viewport.zoom + 1\n    });\n  };\n  var onZoomOut = function onZoomOut() {\n    updateViewport(context, props, {\n      zoom: context.viewport.zoom - 1\n    });\n  };\n  var onResetNorth = function onResetNorth() {\n    updateViewport(context, props, {\n      bearing: 0,\n      pitch: 0\n    });\n  };\n  var className = props.className,\n    showCompass = props.showCompass,\n    showZoom = props.showZoom,\n    zoomInLabel = props.zoomInLabel,\n    zoomOutLabel = props.zoomOutLabel,\n    compassLabel = props.compassLabel;\n  var style = useMemo(function () {\n    return _objectSpread({\n      position: 'absolute'\n    }, props.style);\n  }, [props.style]);\n  return React.createElement(\"div\", {\n    style: style,\n    className: className\n  }, React.createElement(\"div\", {\n    className: \"mapboxgl-ctrl mapboxgl-ctrl-group\",\n    ref: containerRef\n  }, showZoom && renderButton('zoom-in', zoomInLabel, onZoomIn), showZoom && renderButton('zoom-out', zoomOutLabel, onZoomOut), showCompass && renderButton('compass', compassLabel, onResetNorth, renderCompass(context))));\n}\nNavigationControl.propTypes = propTypes;\nNavigationControl.defaultProps = defaultProps;\nexport default React.memo(NavigationControl);","map":{"version":3,"sources":["../../../src/components/navigation-control.js"],"names":["React","useMemo","PropTypes","MapState","LINEAR_TRANSITION_PROPS","compareVersions","useMapControl","mapControlDefaultProps","mapControlPropTypes","noop","propTypes","assign","className","string","style","object","onViewStateChange","func","onViewportChange","showCompass","bool","showZoom","zoomInLabel","zoomOutLabel","compassLabel","defaultProps","VERSION_LEGACY","VERSION_1_6","getUIVersion","mapboxVersion","updateViewport","context","props","opts","viewport","mapState","Object","viewState","getViewportProps","renderButton","type","label","callback","children","renderCompass","uiVersion","map","version","bearing","transform","NavigationControl","containerRef","onZoomIn","zoom","onZoomOut","onResetNorth","pitch","position","memo"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {useMemo} from 'react';\nimport * as PropTypes from 'prop-types';\n\nimport MapState from '../utils/map-state';\nimport {LINEAR_TRANSITION_PROPS} from '../utils/map-controller';\n\nimport {compareVersions} from '../utils/version';\n\nimport useMapControl, {mapControlDefaultProps, mapControlPropTypes} from './use-map-control';\n\nconst noop = () => {};\n\nconst propTypes = Object.assign({}, mapControlPropTypes, {\n  // Custom className\n  className: PropTypes.string,\n  style: PropTypes.object,\n  // Callbacks fired when the user interacted with the map. The object passed to the callbacks\n  // contains viewport properties such as `longitude`, `latitude`, `zoom` etc.\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  // Show/hide compass button\n  showCompass: PropTypes.bool,\n  // Show/hide zoom buttons\n  showZoom: PropTypes.bool,\n  // Custom labels assigned to the controls\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  compassLabel: PropTypes.string\n});\n\nconst defaultProps = Object.assign({}, mapControlDefaultProps, {\n  className: '',\n  showCompass: true,\n  showZoom: true,\n  zoomInLabel: 'Zoom In',\n  zoomOutLabel: 'Zoom Out',\n  compassLabel: 'Reset North'\n});\n\n// Mapbox version flags. CSS classes were changed in certain versions.\nconst VERSION_LEGACY = 1;\nconst VERSION_1_6 = 2;\n\nfunction getUIVersion(mapboxVersion) {\n  return compareVersions(mapboxVersion, '1.6.0') >= 0 ? VERSION_1_6 : VERSION_LEGACY;\n}\n\nfunction updateViewport(context, props, opts) {\n  const {viewport} = context;\n  const mapState = new MapState(Object.assign({}, viewport, opts));\n  const viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n\n  const onViewportChange = props.onViewportChange || context.onViewportChange || noop;\n  const onViewStateChange = props.onViewStateChange || context.onViewStateChange || noop;\n\n  // Call new style callback\n  onViewStateChange({viewState});\n\n  // Call old style callback\n  onViewportChange(viewState);\n}\n\nfunction renderButton(type, label, callback, children) {\n  return (\n    <button\n      key={type}\n      className={`mapboxgl-ctrl-icon mapboxgl-ctrl-${type}`}\n      type=\"button\"\n      title={label}\n      onClick={callback}\n    >\n      {children || <span className=\"mapboxgl-ctrl-icon\" aria-hidden=\"true\" />}\n    </button>\n  );\n}\n\nfunction renderCompass(context) {\n  const uiVersion = useMemo(() => (context.map ? getUIVersion(context.map.version) : VERSION_1_6), [\n    context.map\n  ]);\n\n  const {bearing} = context.viewport;\n  const style = {transform: `rotate(${-bearing}deg)`};\n\n  return uiVersion === VERSION_1_6 ? (\n    <span className=\"mapboxgl-ctrl-icon\" aria-hidden=\"true\" style={style} />\n  ) : (\n    <span className=\"mapboxgl-ctrl-compass-arrow\" style={style} />\n  );\n}\n\n/*\n * PureComponent doesn't update when context changes, so\n * implementing our own shouldComponentUpdate here.\n */\nfunction NavigationControl(props) {\n  const {context, containerRef} = useMapControl(props);\n\n  const onZoomIn = () => {\n    updateViewport(context, props, {zoom: context.viewport.zoom + 1});\n  };\n\n  const onZoomOut = () => {\n    updateViewport(context, props, {zoom: context.viewport.zoom - 1});\n  };\n\n  const onResetNorth = () => {\n    updateViewport(context, props, {bearing: 0, pitch: 0});\n  };\n\n  const {className, showCompass, showZoom, zoomInLabel, zoomOutLabel, compassLabel} = props;\n  const style = useMemo(() => ({position: 'absolute', ...props.style}), [props.style]);\n\n  return (\n    <div style={style} className={className}>\n      <div className=\"mapboxgl-ctrl mapboxgl-ctrl-group\" ref={containerRef}>\n        {showZoom && renderButton('zoom-in', zoomInLabel, onZoomIn)}\n        {showZoom && renderButton('zoom-out', zoomOutLabel, onZoomOut)}\n        {showCompass && renderButton('compass', compassLabel, onResetNorth, renderCompass(context))}\n      </div>\n    </div>\n  );\n}\n\nNavigationControl.propTypes = propTypes;\nNavigationControl.defaultProps = defaultProps;\n\nexport default React.memo(NavigationControl);\n"]},"metadata":{},"sourceType":"module"}