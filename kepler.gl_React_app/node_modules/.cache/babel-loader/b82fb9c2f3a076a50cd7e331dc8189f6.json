{"ast":null,"code":"import assert from '../utils/assert';\nvar TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\nvar ARRAY_TO_COMPONENT_TYPE = new Map([[Int8Array, 5120], [Uint8Array, 5121], [Int16Array, 5122], [Uint16Array, 5123], [Uint32Array, 5125], [Float32Array, 5126]]);\nexport var ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexport function getAccessorTypeFromSize(size) {\n  var type = TYPES[size - 1];\n  return type || TYPES[0];\n}\nexport function getComponentTypeFromArray(typedArray) {\n  var componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n  return componentType;\n}\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  var bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  var length = accessor.count * components;\n  var byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {\n    ArrayType: ArrayType,\n    length: length,\n    byteLength: byteLength\n  };\n}","map":{"version":3,"sources":["../../../../src/lib/gltf-utils/gltf-utils.js"],"names":["assert","TYPES","ARRAY_TO_COMPONENT_TYPE","Map","Int8Array","Uint8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","getAccessorTypeFromSize","size","type","getComponentTypeFromArray","typedArray","componentType","get","constructor","Error","getAccessorArrayTypeAndLength","accessor","bufferView","ArrayType","components","bytesPerComponent","length","count","byteLength"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,iBAAnB;AAEA,IAAMC,KAAK,GAAG,CAAC,QAAD,EAAW,MAAX,EAAmB,MAAnB,EAA2B,MAA3B,CAAd;AAGA,IAAMC,uBAAuB,GAAG,IAAIC,GAAJ,CAAQ,CACtC,CAACC,SAAD,EAAY,IAAZ,CADsC,EAEtC,CAACC,UAAD,EAAa,IAAb,CAFsC,EAGtC,CAACC,UAAD,EAAa,IAAb,CAHsC,EAItC,CAACC,WAAD,EAAc,IAAd,CAJsC,EAKtC,CAACC,WAAD,EAAc,IAAd,CALsC,EAMtC,CAACC,YAAD,EAAe,IAAf,CANsC,CAAR,CAAhC;AASA,OAAO,IAAMC,4BAA4B,GAAG;EAC1CC,MAAM,EAAE,CADkC;EAE1CC,IAAI,EAAE,CAFoC;EAG1CC,IAAI,EAAE,CAHoC;EAI1CC,IAAI,EAAE,CAJoC;EAK1CC,IAAI,EAAE,CALoC;EAM1CC,IAAI,EAAE,CANoC;EAO1CC,IAAI,EAAE;AAPoC,CAArC;AAUP,OAAO,IAAMC,qCAAqC,GAAG;EACnD,IAAA,EAAM,CAD6C;EAEnD,IAAA,EAAM,CAF6C;EAGnD,IAAA,EAAM,CAH6C;EAInD,IAAA,EAAM,CAJ6C;EAKnD,IAAA,EAAM,CAL6C;EAMnD,IAAA,EAAM;AAN6C,CAA9C;AASP,OAAO,IAAMC,iCAAiC,GAAG;EAC/C,IAAA,EAAMf,SADyC;EAE/C,IAAA,EAAMC,UAFyC;EAG/C,IAAA,EAAMC,UAHyC;EAI/C,IAAA,EAAMC,WAJyC;EAK/C,IAAA,EAAMC,WALyC;EAM/C,IAAA,EAAMC;AANyC,CAA1C;AASP,OAAO,SAASW,uBAAT,CAAiCC,IAAjC,EAAuC;EAC5C,IAAMC,IAAI,GAAGrB,KAAK,CAACoB,IAAI,GAAG,CAAR,CAAlB;EACA,OAAOC,IAAI,IAAIrB,KAAK,CAAC,CAAD,CAApB;AACD;AAED,OAAO,SAASsB,yBAAT,CAAmCC,UAAnC,EAA+C;EACpD,IAAMC,aAAa,GAAGvB,uBAAuB,CAACwB,GAAxBxB,CAA4BsB,UAAU,CAACG,WAAvCzB,CAAtB;EACA,IAAI,CAACuB,aAAL,EAAoB;IAClB,MAAM,IAAIG,KAAJ,CAAU,qBAAV,CAAN;EACD;EACD,OAAOH,aAAP;AACD;AAED,OAAO,SAASI,6BAAT,CAAuCC,QAAvC,EAAiDC,UAAjD,EAA6D;EAClE,IAAMC,SAAS,GAAGb,iCAAiC,CAACW,QAAQ,CAACL,aAAV,CAAnD;EACA,IAAMQ,UAAU,GAAGvB,4BAA4B,CAACoB,QAAQ,CAACR,IAAV,CAA/C;EACA,IAAMY,iBAAiB,GAAGhB,qCAAqC,CAACY,QAAQ,CAACL,aAAV,CAA/D;EACA,IAAMU,MAAM,GAAGL,QAAQ,CAACM,KAATN,GAAiBG,UAAhC;EACA,IAAMI,UAAU,GAAGP,QAAQ,CAACM,KAATN,GAAiBG,UAAjBH,GAA8BI,iBAAjD;EACAlC,MAAM,CAACqC,UAAU,IAAI,CAAdA,IAAmBA,UAAU,IAAIN,UAAU,CAACM,UAA7C,CAANrC;EACA,OAAO;IAACgC,SAAS,EAATA,SAAD;IAAYG,MAAM,EAANA,MAAZ;IAAoBE,UAAU,EAAVA;EAApB,CAAP;AACD","sourcesContent":["import assert from '../utils/assert';\n\nconst TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\n\n// @ts-ignore\nconst ARRAY_TO_COMPONENT_TYPE = new Map([\n  [Int8Array, 5120],\n  [Uint8Array, 5121],\n  [Int16Array, 5122],\n  [Uint16Array, 5123],\n  [Uint32Array, 5125],\n  [Float32Array, 5126]\n]);\n\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\n\nexport function getAccessorTypeFromSize(size) {\n  const type = TYPES[size - 1];\n  return type || TYPES[0];\n}\n\nexport function getComponentTypeFromArray(typedArray) {\n  const componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n  return componentType;\n}\n\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  const length = accessor.count * components;\n  const byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {ArrayType, length, byteLength};\n}\n"]},"metadata":{},"sourceType":"module"}