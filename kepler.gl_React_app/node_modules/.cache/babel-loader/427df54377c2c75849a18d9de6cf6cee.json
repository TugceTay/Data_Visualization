{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColorPaletteGroup = exports.PaletteConfig = exports[\"default\"] = exports.ALL_STEPS = exports.ALL_TYPES = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.uniq\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _reselect = require(\"reselect\");\nvar _itemSelector = _interopRequireDefault(require(\"../../common/item-selector/item-selector\"));\nvar _styledComponents2 = require(\"../../common/styled-components\");\nvar _switch = _interopRequireDefault(require(\"../../common/switch\"));\nvar _colorPalette = _interopRequireDefault(require(\"./color-palette\"));\nvar _customPalette = _interopRequireDefault(require(\"./custom-palette\"));\nvar _colorRanges = require(\"../../../constants/color-ranges\");\nvar _dataUtils = require(\"../../../utils/data-utils\");\nvar _colorUtils = require(\"../../../utils/color-utils\");\nvar _localization = require(\"../../../localization\");\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar ALL_TYPES = (0, _lodash[\"default\"])(_colorRanges.COLOR_RANGES.map(function (c) {\n  return c.type;\n}).filter(function (ctype) {\n  return ctype;\n}).concat(['all', 'custom']));\nexports.ALL_TYPES = ALL_TYPES;\nvar ALL_STEPS = (0, _lodash[\"default\"])(_colorRanges.COLOR_RANGES.map(function (d) {\n  return d.colors.length;\n})).sort(_dataUtils.numberSort);\nexports.ALL_STEPS = ALL_STEPS;\nvar StyledColorConfig = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  padding: 12px 12px 0 12px;\\n\"])));\nvar StyledColorRangeSelector = _styledComponents[\"default\"].div.attrs({\n  className: 'color-range-selector'\n})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  padding-bottom: 12px;\\n\"])));\nvar StyledPaletteConfig = _styledComponents[\"default\"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  margin-bottom: 8px;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  .color-palette__config__label {\\n    flex-grow: 1;\\n  }\\n  .color-palette__config__select {\\n    flex-grow: 1;\\n  }\\n  .item-selector .item-selector__dropdown {\\n    \", \";\\n  }\\n\"])), function (props) {\n  return props.theme.secondaryInput;\n});\nvar CONFIG_SETTINGS = {\n  type: {\n    type: 'select',\n    options: ALL_TYPES\n  },\n  steps: {\n    type: 'select',\n    options: ALL_STEPS\n  },\n  reversed: {\n    type: 'switch',\n    options: [true, false]\n  },\n  custom: {\n    label: 'customPalette',\n    type: 'switch',\n    options: [true, false]\n  }\n};\nvar ColorRangeSelect = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(ColorRangeSelect, _Component);\n  var _super = _createSuper(ColorRangeSelect);\n  function ColorRangeSelect() {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, ColorRangeSelect);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"colorRangesSelector\", function (props) {\n      return props.colorRanges;\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"configTypeSelector\", function (props) {\n      return props.colorPaletteUI.colorRangeConfig.type;\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"configStepSelector\", function (props) {\n      return props.colorPaletteUI.colorRangeConfig.steps;\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"filteredColorRange\", (0, _reselect.createSelector)(_this.colorRangesSelector, _this.configTypeSelector, _this.configStepSelector, function (colorRanges, type, steps) {\n      return colorRanges.filter(function (colorRange) {\n        var isType = type === 'all' || type === colorRange.type;\n        var isStep = Number(steps) === colorRange.colors.length;\n        return isType && isStep;\n      });\n    }));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_updateConfig\", function (_ref) {\n      var key = _ref.key,\n        value = _ref.value;\n      _this._setColorRangeConfig((0, _defineProperty2[\"default\"])({}, key, value));\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onSetCustomPalette\", function (config) {\n      _this.props.setColorPaletteUI({\n        customPalette: config\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_setColorRangeConfig\", function (newConfig) {\n      _this.props.setColorPaletteUI({\n        colorRangeConfig: newConfig\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onCustomPaletteCancel\", function (newConfig) {\n      _this.props.setColorPaletteUI({\n        showSketcher: false,\n        colorRangeConfig: {\n          custom: false\n        }\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onToggleSketcher\", function (val) {\n      _this.props.setColorPaletteUI({\n        showSketcher: val\n      });\n    });\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(ColorRangeSelect, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props$colorPale = this.props.colorPaletteUI,\n        customPalette = _this$props$colorPale.customPalette,\n        showSketcher = _this$props$colorPale.showSketcher,\n        colorRangeConfig = _this$props$colorPale.colorRangeConfig;\n      var filteredColorRanges = this.filteredColorRange(this.props);\n      return /*#__PURE__*/_react[\"default\"].createElement(StyledColorRangeSelector, null, /*#__PURE__*/_react[\"default\"].createElement(StyledColorConfig, null, (colorRangeConfig.custom ? ['custom'] : Object.keys(colorRangeConfig)).map(function (key) {\n        return /*#__PURE__*/_react[\"default\"].createElement(PaletteConfig, {\n          key: key,\n          label: CONFIG_SETTINGS[key].label || key,\n          config: CONFIG_SETTINGS[key],\n          value: colorRangeConfig[key],\n          onChange: function onChange(value) {\n            return _this2._updateConfig({\n              key: key,\n              value: value\n            });\n          }\n        });\n      })), colorRangeConfig.custom ? /*#__PURE__*/_react[\"default\"].createElement(_customPalette[\"default\"], {\n        customPalette: customPalette,\n        showSketcher: showSketcher,\n        selected: this.props.selectedColorRange,\n        onApply: this.props.onSelectColorRange,\n        onToggleSketcher: this._onToggleSketcher,\n        setCustomPalette: this._onSetCustomPalette,\n        onCancel: this._onCustomPaletteCancel\n      }) : /*#__PURE__*/_react[\"default\"].createElement(ColorPaletteGroup, {\n        colorRanges: filteredColorRanges,\n        onSelect: this.props.onSelectColorRange,\n        selected: this.props.selectedColorRange,\n        reversed: colorRangeConfig.reversed\n      }));\n    }\n  }]);\n  return ColorRangeSelect;\n}(_react.Component);\nexports[\"default\"] = ColorRangeSelect;\n(0, _defineProperty2[\"default\"])(ColorRangeSelect, \"propTypes\", {\n  colorPaletteUI: _propTypes[\"default\"].object.isRequired,\n  selectedColorRange: _propTypes[\"default\"].object.isRequired,\n  onSelectColorRange: _propTypes[\"default\"].func.isRequired,\n  setColorPaletteUI: _propTypes[\"default\"].func.isRequired,\n  // optional\n  colorRanges: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any)\n});\n(0, _defineProperty2[\"default\"])(ColorRangeSelect, \"defaultProps\", {\n  colorRanges: _colorRanges.COLOR_RANGES,\n  onSelectColorRange: function onSelectColorRange() {},\n  setColorPaletteUI: function setColorPaletteUI() {}\n});\nvar PaletteConfig = function PaletteConfig(_ref2) {\n  var label = _ref2.label,\n    value = _ref2.value,\n    _ref2$config = _ref2.config,\n    type = _ref2$config.type,\n    options = _ref2$config.options,\n    _onChange = _ref2.onChange;\n  return /*#__PURE__*/_react[\"default\"].createElement(StyledPaletteConfig, {\n    className: \"color-palette__config\",\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"color-palette__config__label\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.PanelLabel, null, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n    id: \"color.\".concat(label)\n  }))), type === 'select' && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"color-palette__config__select\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_itemSelector[\"default\"], {\n    selectedItems: value,\n    options: options,\n    multiSelect: false,\n    searchable: false,\n    onChange: _onChange\n  })), type === 'switch' && /*#__PURE__*/_react[\"default\"].createElement(_switch[\"default\"], {\n    checked: value,\n    id: \"\".concat(label, \"-toggle\"),\n    onChange: function onChange() {\n      return _onChange(!value);\n    },\n    secondary: true\n  }));\n};\nexports.PaletteConfig = PaletteConfig;\nvar StyledColorRange = _styledComponents[\"default\"].div.attrs({\n  className: 'color-palette-outer'\n})(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  padding: 0 8px;\\n  :hover {\\n    background-color: \", \";\\n    cursor: pointer;\\n  }\\n\"])), function (props) {\n  return props.theme.panelBackgroundHover;\n});\nvar ColorPaletteGroup = function ColorPaletteGroup(_ref3) {\n  var reversed = _ref3.reversed,\n    onSelect = _ref3.onSelect,\n    selected = _ref3.selected,\n    colorRanges = _ref3.colorRanges;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"color-palette__group\"\n  }, colorRanges.map(function (colorRange, i) {\n    return /*#__PURE__*/_react[\"default\"].createElement(StyledColorRange, {\n      key: \"\".concat(colorRange.name, \"-\").concat(i),\n      onClick: function onClick(e) {\n        return onSelect(reversed ? (0, _colorUtils.reverseColorRange)(true, colorRange) : colorRange, e);\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(_colorPalette[\"default\"], {\n      colors: colorRange.colors,\n      isReversed: reversed,\n      isSelected: colorRange.name === selected.name && reversed === Boolean(selected.reversed)\n    }));\n  }));\n};\nexports.ColorPaletteGroup = ColorPaletteGroup;","map":{"version":3,"sources":["../../../../src/components/side-panel/layer-panel/color-range-selector.js"],"names":["ALL_TYPES","map","c","type","filter","ctype","concat","ALL_STEPS","d","colors","length","sort","numberSort","StyledColorConfig","styled","div","StyledColorRangeSelector","attrs","className","StyledPaletteConfig","props","theme","secondaryInput","CONFIG_SETTINGS","options","steps","reversed","custom","label","ColorRangeSelect","Component","colorPaletteUI","PropTypes","object","isRequired","selectedColorRange","onSelectColorRange","func","setColorPaletteUI","colorRanges","arrayOf","any","COLOR_RANGES","colorRangeConfig","colorRangesSelector","configTypeSelector","configStepSelector","isType","colorRange","isStep","Number","key","value","_setColorRangeConfig","customPalette","config","newConfig","showSketcher","val","filteredColorRanges","filteredColorRange","Object","keys","_updateConfig","_onToggleSketcher","_onSetCustomPalette","_onCustomPaletteCancel","PaletteConfig","onChange","e","stopPropagation","StyledColorRange","panelBackgroundHover","ColorPaletteGroup","onSelect","selected","i","name","Boolean"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport uniq from 'lodash.uniq';\nimport styled from 'styled-components';\nimport {createSelector} from 'reselect';\n\nimport ItemSelector from 'components/common/item-selector/item-selector';\nimport {PanelLabel} from 'components/common/styled-components';\nimport Switch from 'components/common/switch';\nimport ColorPalette from './color-palette';\nimport CustomPalette from './custom-palette';\nimport {COLOR_RANGES} from 'constants/color-ranges';\nimport {numberSort} from 'utils/data-utils';\nimport {reverseColorRange} from 'utils/color-utils';\nimport {FormattedMessage} from 'localization';\n\nexport const ALL_TYPES = uniq(\n  COLOR_RANGES.map(c => c.type)\n    .filter(ctype => ctype)\n    .concat(['all', 'custom'])\n);\n\nexport const ALL_STEPS = uniq(COLOR_RANGES.map(d => d.colors.length)).sort(numberSort);\n\nconst StyledColorConfig = styled.div`\n  padding: 12px 12px 0 12px;\n`;\n\nconst StyledColorRangeSelector = styled.div.attrs({\n  className: 'color-range-selector'\n})`\n  padding-bottom: 12px;\n`;\n\nconst StyledPaletteConfig = styled.div`\n  margin-bottom: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  .color-palette__config__label {\n    flex-grow: 1;\n  }\n  .color-palette__config__select {\n    flex-grow: 1;\n  }\n  .item-selector .item-selector__dropdown {\n    ${props => props.theme.secondaryInput};\n  }\n`;\n\nconst CONFIG_SETTINGS = {\n  type: {\n    type: 'select',\n    options: ALL_TYPES\n  },\n  steps: {\n    type: 'select',\n    options: ALL_STEPS\n  },\n  reversed: {\n    type: 'switch',\n    options: [true, false]\n  },\n  custom: {\n    label: 'customPalette',\n    type: 'switch',\n    options: [true, false]\n  }\n};\n\nexport default class ColorRangeSelect extends Component {\n  static propTypes = {\n    colorPaletteUI: PropTypes.object.isRequired,\n    selectedColorRange: PropTypes.object.isRequired,\n    onSelectColorRange: PropTypes.func.isRequired,\n    setColorPaletteUI: PropTypes.func.isRequired,\n    // optional\n    colorRanges: PropTypes.arrayOf(PropTypes.any)\n  };\n\n  static defaultProps = {\n    colorRanges: COLOR_RANGES,\n    onSelectColorRange: () => {},\n    setColorPaletteUI: () => {}\n  };\n\n  colorRangesSelector = props => props.colorRanges;\n  configTypeSelector = props => props.colorPaletteUI.colorRangeConfig.type;\n  configStepSelector = props => props.colorPaletteUI.colorRangeConfig.steps;\n  filteredColorRange = createSelector(\n    this.colorRangesSelector,\n    this.configTypeSelector,\n    this.configStepSelector,\n    (colorRanges, type, steps) => {\n      return colorRanges.filter(colorRange => {\n        const isType = type === 'all' || type === colorRange.type;\n        const isStep = Number(steps) === colorRange.colors.length;\n\n        return isType && isStep;\n      });\n    }\n  );\n\n  _updateConfig = ({key, value}) => {\n    this._setColorRangeConfig({[key]: value});\n  };\n\n  _onSetCustomPalette = config => {\n    this.props.setColorPaletteUI({\n      customPalette: config\n    });\n  };\n\n  _setColorRangeConfig = newConfig => {\n    this.props.setColorPaletteUI({\n      colorRangeConfig: newConfig\n    });\n  };\n\n  _onCustomPaletteCancel = newConfig => {\n    this.props.setColorPaletteUI({\n      showSketcher: false,\n      colorRangeConfig: {custom: false}\n    });\n  };\n\n  _onToggleSketcher = val => {\n    this.props.setColorPaletteUI({\n      showSketcher: val\n    });\n  };\n\n  render() {\n    const {customPalette, showSketcher, colorRangeConfig} = this.props.colorPaletteUI;\n\n    const filteredColorRanges = this.filteredColorRange(this.props);\n\n    return (\n      <StyledColorRangeSelector>\n        <StyledColorConfig>\n          {(colorRangeConfig.custom ? ['custom'] : Object.keys(colorRangeConfig)).map(key => (\n            <PaletteConfig\n              key={key}\n              label={CONFIG_SETTINGS[key].label || key}\n              config={CONFIG_SETTINGS[key]}\n              value={colorRangeConfig[key]}\n              onChange={value => this._updateConfig({key, value})}\n            />\n          ))}\n        </StyledColorConfig>\n\n        {colorRangeConfig.custom ? (\n          <CustomPalette\n            customPalette={customPalette}\n            showSketcher={showSketcher}\n            selected={this.props.selectedColorRange}\n            onApply={this.props.onSelectColorRange}\n            onToggleSketcher={this._onToggleSketcher}\n            setCustomPalette={this._onSetCustomPalette}\n            onCancel={this._onCustomPaletteCancel}\n          />\n        ) : (\n          <ColorPaletteGroup\n            colorRanges={filteredColorRanges}\n            onSelect={this.props.onSelectColorRange}\n            selected={this.props.selectedColorRange}\n            reversed={colorRangeConfig.reversed}\n          />\n        )}\n      </StyledColorRangeSelector>\n    );\n  }\n}\n\nexport const PaletteConfig = ({label, value, config: {type, options}, onChange}) => (\n  <StyledPaletteConfig className=\"color-palette__config\" onClick={e => e.stopPropagation()}>\n    <div className=\"color-palette__config__label\">\n      <PanelLabel>\n        <FormattedMessage id={`color.${label}`} />\n      </PanelLabel>\n    </div>\n    {type === 'select' && (\n      <div className=\"color-palette__config__select\">\n        <ItemSelector\n          selectedItems={value}\n          options={options}\n          multiSelect={false}\n          searchable={false}\n          onChange={onChange}\n        />\n      </div>\n    )}\n    {type === 'switch' && (\n      <Switch checked={value} id={`${label}-toggle`} onChange={() => onChange(!value)} secondary />\n    )}\n  </StyledPaletteConfig>\n);\n\nconst StyledColorRange = styled.div.attrs({\n  className: 'color-palette-outer'\n})`\n  padding: 0 8px;\n  :hover {\n    background-color: ${props => props.theme.panelBackgroundHover};\n    cursor: pointer;\n  }\n`;\n\nexport const ColorPaletteGroup = ({reversed, onSelect, selected, colorRanges}) => (\n  <div className=\"color-palette__group\">\n    {colorRanges.map((colorRange, i) => (\n      <StyledColorRange\n        key={`${colorRange.name}-${i}`}\n        onClick={e => onSelect(reversed ? reverseColorRange(true, colorRange) : colorRange, e)}\n      >\n        <ColorPalette\n          colors={colorRange.colors}\n          isReversed={reversed}\n          isSelected={colorRange.name === selected.name && reversed === Boolean(selected.reversed)}\n        />\n      </StyledColorRange>\n    ))}\n  </div>\n);\n"]},"metadata":{},"sourceType":"script"}