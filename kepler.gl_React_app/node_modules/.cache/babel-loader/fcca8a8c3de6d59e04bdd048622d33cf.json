{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.StyledLayerName = void 0;\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _styledComponents2 = require(\"../common/styled-components\");\nvar _icons = require(\"../common/icons\");\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _dataUtils = require(\"../../utils/data-utils\");\nvar _interactionUtils = require(\"../../utils/interaction-utils\");\nvar _templateObject, _templateObject2;\nvar StyledLayerName = (0, _styledComponents[\"default\"])(_styledComponents2.CenterFlexbox)(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  color: \", \";\\n  font-size: 12px;\\n  letter-spacing: 0.43px;\\n  text-transform: capitalize;\\n\\n  svg {\\n    margin-right: 4px;\\n  }\\n\"])), function (props) {\n  return props.theme.textColorHl;\n});\nexports.StyledLayerName = StyledLayerName;\nvar StyledTable = _styledComponents[\"default\"].table(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  & .row__delta-value {\\n    text-align: right;\\n\\n    &.positive {\\n      color: \", \";\\n    }\\n\\n    &.negative {\\n      color: \", \";\\n    }\\n  }\\n\"])), function (props) {\n  return props.theme.primaryBtnBgd;\n}, function (props) {\n  return props.theme.negativeBtnActBgd;\n});\n/** @type {import('./layer-hover-info').RowComponent} */\n\nvar Row = function Row(_ref) {\n  var name = _ref.name,\n    value = _ref.value,\n    deltaValue = _ref.deltaValue,\n    url = _ref.url;\n\n  // Set 'url' to 'value' if it looks like a url\n  if (!url && value && typeof value === 'string' && value.match(/^http/)) {\n    url = value;\n  }\n  var asImg = /<img>/.test(name);\n  return /*#__PURE__*/_react[\"default\"].createElement(\"tr\", {\n    className: \"row\",\n    key: name\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    className: \"row__name\"\n  }, name), /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    className: \"row__value\"\n  }, asImg ? /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n    src: value\n  }) : url ? /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: url\n  }, value) : value), (0, _dataUtils.notNullorUndefined)(deltaValue) && /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    className: \"row__delta-value \".concat(deltaValue.toString().charAt(0) === '+' ? 'positive' : 'negative')\n  }, deltaValue));\n};\nvar EntryInfo = function EntryInfo(_ref2) {\n  var fieldsToShow = _ref2.fieldsToShow,\n    fields = _ref2.fields,\n    data = _ref2.data,\n    primaryData = _ref2.primaryData,\n    compareType = _ref2.compareType;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, fieldsToShow.map(function (item) {\n    return /*#__PURE__*/_react[\"default\"].createElement(EntryInfoRow, {\n      key: item.name,\n      item: item,\n      fields: fields,\n      data: data,\n      primaryData: primaryData,\n      compareType: compareType\n    });\n  }));\n};\nvar EntryInfoRow = function EntryInfoRow(_ref3) {\n  var item = _ref3.item,\n    fields = _ref3.fields,\n    data = _ref3.data,\n    primaryData = _ref3.primaryData,\n    compareType = _ref3.compareType;\n  var fieldIdx = fields.findIndex(function (f) {\n    return f.name === item.name;\n  });\n  if (fieldIdx < 0) {\n    return null;\n  }\n  var field = fields[fieldIdx];\n  var displayValue = (0, _interactionUtils.getTooltipDisplayValue)({\n    item: item,\n    field: field,\n    data: data,\n    fieldIdx: fieldIdx\n  });\n  var displayDeltaValue = (0, _interactionUtils.getTooltipDisplayDeltaValue)({\n    item: item,\n    field: field,\n    data: data,\n    fieldIdx: fieldIdx,\n    primaryData: primaryData,\n    compareType: compareType\n  });\n  return /*#__PURE__*/_react[\"default\"].createElement(Row, {\n    name: field.displayName || field.name,\n    value: displayValue,\n    deltaValue: displayDeltaValue\n  });\n}; // TODO: supporting comparative value for aggregated cells as well\n\nvar CellInfo = function CellInfo(_ref4) {\n  var data = _ref4.data,\n    layer = _ref4.layer;\n  var _layer$config = layer.config,\n    colorField = _layer$config.colorField,\n    sizeField = _layer$config.sizeField;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, /*#__PURE__*/_react[\"default\"].createElement(Row, {\n    name: 'total points',\n    key: \"count\",\n    value: data.points && data.points.length\n  }), colorField && layer.visualChannels.color ? /*#__PURE__*/_react[\"default\"].createElement(Row, {\n    name: layer.getVisualChannelDescription('color').measure,\n    key: \"color\",\n    value: data.colorValue || 'N/A'\n  }) : null, sizeField && layer.visualChannels.size ? /*#__PURE__*/_react[\"default\"].createElement(Row, {\n    name: layer.getVisualChannelDescription('size').measure,\n    key: \"size\",\n    value: data.elevationValue || 'N/A'\n  }) : null);\n};\nvar LayerHoverInfoFactory = function LayerHoverInfoFactory() {\n  var LayerHoverInfo = function LayerHoverInfo(props) {\n    var data = props.data,\n      layer = props.layer;\n    if (!data || !layer) {\n      return null;\n    }\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"map-popover__layer-info\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(StyledLayerName, {\n      className: \"map-popover__layer-name\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_icons.Layers, {\n      height: \"12px\"\n    }), props.layer.config.label), /*#__PURE__*/_react[\"default\"].createElement(StyledTable, null, props.layer.isAggregated ? /*#__PURE__*/_react[\"default\"].createElement(CellInfo, props) : /*#__PURE__*/_react[\"default\"].createElement(EntryInfo, props)));\n  };\n  LayerHoverInfo.propTypes = {\n    fields: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any),\n    fieldsToShow: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any),\n    layer: _propTypes[\"default\"].object,\n    data: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any), _propTypes[\"default\"].object])\n  };\n  return LayerHoverInfo;\n};\nvar _default = LayerHoverInfoFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/map/layer-hover-info.js"],"names":["StyledLayerName","CenterFlexbox","props","theme","textColorHl","StyledTable","styled","table","primaryBtnBgd","negativeBtnActBgd","Row","name","value","deltaValue","url","match","asImg","test","toString","charAt","EntryInfo","fieldsToShow","fields","data","primaryData","compareType","map","item","EntryInfoRow","fieldIdx","findIndex","f","field","displayValue","displayDeltaValue","displayName","CellInfo","layer","colorField","sizeField","config","points","length","visualChannels","color","getVisualChannelDescription","measure","colorValue","size","elevationValue","LayerHoverInfoFactory","LayerHoverInfo","label","isAggregated","propTypes","PropTypes","arrayOf","any","object","oneOfType"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport {CenterFlexbox} from 'components/common/styled-components';\nimport {Layers} from 'components/common/icons';\nimport PropTypes from 'prop-types';\nimport {notNullorUndefined} from 'utils/data-utils';\nimport {getTooltipDisplayValue, getTooltipDisplayDeltaValue} from 'utils/interaction-utils';\n\nexport const StyledLayerName = styled(CenterFlexbox)`\n  color: ${props => props.theme.textColorHl};\n  font-size: 12px;\n  letter-spacing: 0.43px;\n  text-transform: capitalize;\n\n  svg {\n    margin-right: 4px;\n  }\n`;\n\nconst StyledTable = styled.table`\n  & .row__delta-value {\n    text-align: right;\n\n    &.positive {\n      color: ${props => props.theme.primaryBtnBgd};\n    }\n\n    &.negative {\n      color: ${props => props.theme.negativeBtnActBgd};\n    }\n  }\n`;\n\n/** @type {import('./layer-hover-info').RowComponent} */\nconst Row = ({name, value, deltaValue, url}) => {\n  // Set 'url' to 'value' if it looks like a url\n  if (!url && value && typeof value === 'string' && value.match(/^http/)) {\n    url = value;\n  }\n\n  const asImg = /<img>/.test(name);\n  return (\n    <tr className=\"row\" key={name}>\n      <td className=\"row__name\">{name}</td>\n      <td className=\"row__value\">\n        {asImg ? (\n          <img src={value} />\n        ) : url ? (\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href={url}>\n            {value}\n          </a>\n        ) : (\n          value\n        )}\n      </td>\n      {notNullorUndefined(deltaValue) && (\n        <td\n          className={`row__delta-value ${\n            deltaValue.toString().charAt(0) === '+' ? 'positive' : 'negative'\n          }`}\n        >\n          {deltaValue}\n        </td>\n      )}\n    </tr>\n  );\n};\n\nconst EntryInfo = ({fieldsToShow, fields, data, primaryData, compareType}) => (\n  <tbody>\n    {fieldsToShow.map(item => (\n      <EntryInfoRow\n        key={item.name}\n        item={item}\n        fields={fields}\n        data={data}\n        primaryData={primaryData}\n        compareType={compareType}\n      />\n    ))}\n  </tbody>\n);\n\nconst EntryInfoRow = ({item, fields, data, primaryData, compareType}) => {\n  const fieldIdx = fields.findIndex(f => f.name === item.name);\n  if (fieldIdx < 0) {\n    return null;\n  }\n  const field = fields[fieldIdx];\n  const displayValue = getTooltipDisplayValue({item, field, data, fieldIdx});\n\n  const displayDeltaValue = getTooltipDisplayDeltaValue({\n    item,\n    field,\n    data,\n    fieldIdx,\n    primaryData,\n    compareType\n  });\n\n  return (\n    <Row\n      name={field.displayName || field.name}\n      value={displayValue}\n      deltaValue={displayDeltaValue}\n    />\n  );\n};\n\n// TODO: supporting comparative value for aggregated cells as well\nconst CellInfo = ({data, layer}) => {\n  const {colorField, sizeField} = layer.config;\n\n  return (\n    <tbody>\n      <Row name={'total points'} key=\"count\" value={data.points && data.points.length} />\n      {colorField && layer.visualChannels.color ? (\n        <Row\n          name={layer.getVisualChannelDescription('color').measure}\n          key=\"color\"\n          value={data.colorValue || 'N/A'}\n        />\n      ) : null}\n      {sizeField && layer.visualChannels.size ? (\n        <Row\n          name={layer.getVisualChannelDescription('size').measure}\n          key=\"size\"\n          value={data.elevationValue || 'N/A'}\n        />\n      ) : null}\n    </tbody>\n  );\n};\n\nconst LayerHoverInfoFactory = () => {\n  const LayerHoverInfo = props => {\n    const {data, layer} = props;\n\n    if (!data || !layer) {\n      return null;\n    }\n\n    return (\n      <div className=\"map-popover__layer-info\">\n        <StyledLayerName className=\"map-popover__layer-name\">\n          <Layers height=\"12px\" />\n          {props.layer.config.label}\n        </StyledLayerName>\n        <StyledTable>\n          {props.layer.isAggregated ? <CellInfo {...props} /> : <EntryInfo {...props} />}\n        </StyledTable>\n      </div>\n    );\n  };\n\n  LayerHoverInfo.propTypes = {\n    fields: PropTypes.arrayOf(PropTypes.any),\n    fieldsToShow: PropTypes.arrayOf(PropTypes.any),\n    layer: PropTypes.object,\n    data: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.any), PropTypes.object])\n  };\n  return LayerHoverInfo;\n};\n\nexport default LayerHoverInfoFactory;\n"]},"metadata":{},"sourceType":"script"}