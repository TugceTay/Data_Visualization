{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.InputBoxContainer = exports.ColorSelectorInput = exports.ColorBlock = void 0;\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _colorUtils = require(\"../../../utils/color-utils\");\nvar _singleColorPalette = _interopRequireDefault(require(\"./single-color-palette\"));\nvar _colorRangeSelector = _interopRequireDefault(require(\"./color-range-selector\"));\nvar _colorPalette = _interopRequireDefault(require(\"./color-palette\"));\nvar _styledComponents2 = require(\"../../common/styled-components\");\nvar _reactOnclickoutside = _interopRequireDefault(require(\"react-onclickoutside\"));\nvar _templateObject, _templateObject2, _templateObject3;\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar ColorBlock = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  width: 32px;\\n  height: 18px;\\n  border-radius: 1px;\\n  background-color: \", \";\\n\"])), function (props) {\n  return \"rgb(\".concat(props.color.slice(0, 3).join(','), \")\");\n});\nexports.ColorBlock = ColorBlock;\nvar ColorSelectorInput = _styledComponents[\"default\"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  \", \";\\n  height: \", \";\\n\\n  .color-selector__selector__label {\\n    text-transform: capitalize;\\n    font-size: 12px;\\n    text-align: center;\\n    color: \", \";\\n  }\\n\"])), function (props) {\n  return props.inputTheme === 'secondary' ? props.theme.secondaryInput : props.theme.input;\n}, function (props) {\n  return props.theme.inputBoxHeight;\n}, function (props) {\n  return props.theme.inputPlaceholderColor;\n});\nexports.ColorSelectorInput = ColorSelectorInput;\nvar InputBoxContainer = _styledComponents[\"default\"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  justify-content: space-between;\\n\\n  .color-select__input-group {\\n    flex-grow: 1;\\n  }\\n  .color-select__input-group:nth-child(2) {\\n    margin-left: 12px;\\n  }\\n\"])));\nexports.InputBoxContainer = InputBoxContainer;\nvar ColorSelector = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(ColorSelector, _Component);\n  var _super = _createSuper(ColorSelector);\n  function ColorSelector() {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, ColorSelector);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      showDropdown: false\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"node\", /*#__PURE__*/(0, _react.createRef)());\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleClickOutside\", function (e) {\n      if (_this.props.colorUI && Number.isInteger(_this.props.colorUI.showSketcher)) {\n        // if sketcher is open, let sketch to close itself first\n        return;\n      }\n      _this._closePanelDropdown();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_getEditing\", function () {\n      return _this.props.colorUI ? _this.props.colorUI.showDropdown : _this.state.showDropdown;\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_closePanelDropdown\", function () {\n      if (_this._getEditing() === false) {\n        return;\n      }\n      if (_this.props.setColorUI) {\n        _this.props.setColorUI({\n          showDropdown: false,\n          showSketcher: false\n        });\n      } else {\n        _this.setState({\n          showDropdown: false\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onSelectColor\", function (color, e) {\n      e.stopPropagation();\n      var editing = _this._getEditing();\n      if (_this.props.colorSets[editing]) {\n        _this.props.colorSets[editing].setColor(color);\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_showDropdown\", function (e, i) {\n      e.stopPropagation();\n      e.preventDefault();\n      if (_this.props.setColorUI) {\n        _this.props.setColorUI({\n          showDropdown: i\n        });\n      } else {\n        _this.setState({\n          showDropdown: i\n        });\n      }\n    });\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(ColorSelector, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props = this.props,\n        colorSets = _this$props.colorSets,\n        disabled = _this$props.disabled,\n        inputTheme = _this$props.inputTheme,\n        colorUI = _this$props.colorUI;\n      var editing = this._getEditing();\n      var currentEditing = colorSets[editing] && (0, _typeof2[\"default\"])(colorSets[editing]) === 'object';\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: \"color-selector\",\n        ref: this.node\n      }, /*#__PURE__*/_react[\"default\"].createElement(InputBoxContainer, null, colorSets.map(function (cSet, i) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"color-select__input-group\",\n          key: i\n        }, /*#__PURE__*/_react[\"default\"].createElement(ColorSelectorInput, {\n          className: \"color-selector__selector\",\n          active: editing === i,\n          disabled: disabled,\n          inputTheme: inputTheme,\n          onMouseDown: function onMouseDown(e) {\n            return _this2._showDropdown(e, i);\n          }\n        }, cSet.isRange ? /*#__PURE__*/_react[\"default\"].createElement(_colorPalette[\"default\"], {\n          colors: cSet.selectedColor.colors\n        }) : /*#__PURE__*/_react[\"default\"].createElement(ColorBlock, {\n          className: \"color-selector__selector__block\",\n          color: cSet.selectedColor\n        }), cSet.label ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"color-selector__selector__label\"\n        }, cSet.label) : null));\n      })), currentEditing ? /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledPanelDropdown, {\n        className: \"color-selector__dropdown\"\n      }, colorSets[editing].isRange ? /*#__PURE__*/_react[\"default\"].createElement(_colorRangeSelector[\"default\"], {\n        selectedColorRange: colorSets[editing].selectedColor,\n        onSelectColorRange: this._onSelectColor,\n        setColorPaletteUI: this.props.setColorUI,\n        colorPaletteUI: colorUI\n      }) : /*#__PURE__*/_react[\"default\"].createElement(_singleColorPalette[\"default\"], {\n        selectedColor: (0, _colorUtils.rgbToHex)(colorSets[editing].selectedColor),\n        onSelectColor: this._onSelectColor\n      })) : null);\n    }\n  }]);\n  return ColorSelector;\n}(_react.Component);\n(0, _defineProperty2[\"default\"])(ColorSelector, \"propTypes\", {\n  colorSets: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    selectedColor: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any), _propTypes[\"default\"].object]),\n    setColor: _propTypes[\"default\"].func.isRequired,\n    isRange: _propTypes[\"default\"].bool,\n    label: _propTypes[\"default\"].string\n  })),\n  colorUI: _propTypes[\"default\"].shape({\n    customPalette: _propTypes[\"default\"].object,\n    showSketcher: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].bool, _propTypes[\"default\"].number]),\n    showDropdown: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].bool, _propTypes[\"default\"].number]),\n    colorRangeConfig: _propTypes[\"default\"].object\n  }),\n  inputTheme: _propTypes[\"default\"].string,\n  disabled: _propTypes[\"default\"].bool,\n  setColorUI: _propTypes[\"default\"].func\n});\n(0, _defineProperty2[\"default\"])(ColorSelector, \"defaultProps\", {\n  colorSets: []\n});\nvar _default = (0, _reactOnclickoutside[\"default\"])(ColorSelector);\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../../src/components/side-panel/layer-panel/color-selector.js"],"names":["ColorBlock","styled","div","props","color","slice","join","ColorSelectorInput","inputTheme","theme","secondaryInput","input","inputBoxHeight","inputPlaceholderColor","InputBoxContainer","ColorSelector","Component","colorSets","arrayOf","shape","selectedColor","PropTypes","oneOfType","any","object","setColor","func","isRequired","isRange","bool","label","string","colorUI","customPalette","showSketcher","number","showDropdown","colorRangeConfig","disabled","setColorUI","Number","isInteger","_closePanelDropdown","state","_getEditing","setState","e","stopPropagation","editing","i","preventDefault","currentEditing","node","map","cSet","_showDropdown","colors","_onSelectColor"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component, createRef} from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport {rgbToHex} from 'utils/color-utils';\nimport SingleColorPalette from 'components/side-panel/layer-panel/single-color-palette';\nimport ColorRangeSelector from 'components/side-panel/layer-panel/color-range-selector';\nimport ColorPalette from 'components/side-panel/layer-panel/color-palette';\nimport {StyledPanelDropdown} from 'components/common/styled-components';\nimport onClickOutside from 'react-onclickoutside';\n\nexport const ColorBlock = styled.div`\n  width: 32px;\n  height: 18px;\n  border-radius: 1px;\n  background-color: ${props => `rgb(${props.color.slice(0, 3).join(',')})`};\n`;\n\nexport const ColorSelectorInput = styled.div`\n  ${props => (props.inputTheme === 'secondary' ? props.theme.secondaryInput : props.theme.input)};\n  height: ${props => props.theme.inputBoxHeight};\n\n  .color-selector__selector__label {\n    text-transform: capitalize;\n    font-size: 12px;\n    text-align: center;\n    color: ${props => props.theme.inputPlaceholderColor};\n  }\n`;\n\nexport const InputBoxContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  .color-select__input-group {\n    flex-grow: 1;\n  }\n  .color-select__input-group:nth-child(2) {\n    margin-left: 12px;\n  }\n`;\n\nclass ColorSelector extends Component {\n  static propTypes = {\n    colorSets: PropTypes.arrayOf(\n      PropTypes.shape({\n        selectedColor: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.any), PropTypes.object]),\n        setColor: PropTypes.func.isRequired,\n        isRange: PropTypes.bool,\n        label: PropTypes.string\n      })\n    ),\n    colorUI: PropTypes.shape({\n      customPalette: PropTypes.object,\n      showSketcher: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n      showDropdown: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n      colorRangeConfig: PropTypes.object\n    }),\n    inputTheme: PropTypes.string,\n    disabled: PropTypes.bool,\n    setColorUI: PropTypes.func\n  };\n\n  static defaultProps = {\n    colorSets: []\n  };\n\n  state = {\n    showDropdown: false\n  };\n\n  node = createRef();\n\n  handleClickOutside = e => {\n    if (this.props.colorUI && Number.isInteger(this.props.colorUI.showSketcher)) {\n      // if sketcher is open, let sketch to close itself first\n      return;\n    }\n    this._closePanelDropdown();\n  };\n\n  _getEditing = () => {\n    return this.props.colorUI ? this.props.colorUI.showDropdown : this.state.showDropdown;\n  };\n\n  _closePanelDropdown = () => {\n    if (this._getEditing() === false) {\n      return;\n    }\n    if (this.props.setColorUI) {\n      this.props.setColorUI({showDropdown: false, showSketcher: false});\n    } else {\n      this.setState({showDropdown: false});\n    }\n  };\n\n  _onSelectColor = (color, e) => {\n    e.stopPropagation();\n    const editing = this._getEditing();\n    if (this.props.colorSets[editing]) {\n      this.props.colorSets[editing].setColor(color);\n    }\n  };\n\n  _showDropdown = (e, i) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (this.props.setColorUI) {\n      this.props.setColorUI({showDropdown: i});\n    } else {\n      this.setState({showDropdown: i});\n    }\n  };\n\n  render() {\n    const {colorSets, disabled, inputTheme, colorUI} = this.props;\n\n    const editing = this._getEditing();\n    const currentEditing = colorSets[editing] && typeof colorSets[editing] === 'object';\n\n    return (\n      <div className=\"color-selector\" ref={this.node}>\n        <InputBoxContainer>\n          {colorSets.map((cSet, i) => (\n            <div className=\"color-select__input-group\" key={i}>\n              <ColorSelectorInput\n                className=\"color-selector__selector\"\n                active={editing === i}\n                disabled={disabled}\n                inputTheme={inputTheme}\n                onMouseDown={e => this._showDropdown(e, i)}\n              >\n                {cSet.isRange ? (\n                  <ColorPalette colors={cSet.selectedColor.colors} />\n                ) : (\n                  <ColorBlock\n                    className=\"color-selector__selector__block\"\n                    color={cSet.selectedColor}\n                  />\n                )}\n                {cSet.label ? (\n                  <div className=\"color-selector__selector__label\">{cSet.label}</div>\n                ) : null}\n              </ColorSelectorInput>\n            </div>\n          ))}\n        </InputBoxContainer>\n        {currentEditing ? (\n          <StyledPanelDropdown className=\"color-selector__dropdown\">\n            {colorSets[editing].isRange ? (\n              <ColorRangeSelector\n                selectedColorRange={colorSets[editing].selectedColor}\n                onSelectColorRange={this._onSelectColor}\n                setColorPaletteUI={this.props.setColorUI}\n                colorPaletteUI={colorUI}\n              />\n            ) : (\n              <SingleColorPalette\n                selectedColor={rgbToHex(colorSets[editing].selectedColor)}\n                onSelectColor={this._onSelectColor}\n              />\n            )}\n          </StyledPanelDropdown>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default onClickOutside(ColorSelector);\n"]},"metadata":{},"sourceType":"script"}