{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _slider = _interopRequireDefault(require(\"../slider/slider\"));\nvar _styledComponents2 = require(\"../styled-components\");\nvar _playbackControls = _interopRequireDefault(require(\"./playback-controls\"));\nvar _floatingTimeDisplay = _interopRequireDefault(require(\"./floating-time-display\"));\nvar _dataUtils = require(\"../../../utils/data-utils\");\nvar _defaultSettings = require(\"../../../constants/default-settings\");\nvar _templateObject, _templateObject2, _templateObject3;\nvar SliderWrapper = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  position: relative;\\n  flex-grow: 1;\\n  margin-right: 24px;\\n  margin-left: 24px;\\n\"])));\nvar AnimationWidgetInner = _styledComponents[\"default\"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  height: 32px;\\n\\n  .playback-controls {\\n    margin-left: -8px;\\n    margin-right: 16px;\\n  }\\n\"])));\nvar StyledDomain = _styledComponents[\"default\"].div.attrs({\n  className: 'animation-control__time-domain'\n})(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  color: \", \";\\n  font-weight: 400;\\n  font-size: 10px;\\n\"])), function (props) {\n  return props.theme.titleTextColor;\n});\nAnimationControlFactory.deps = [_playbackControls[\"default\"], _floatingTimeDisplay[\"default\"]];\nfunction AnimationControlFactory(PlaybackControls, FloatingTimeDisplay) {\n  var AnimationControl = function AnimationControl(_ref) {\n    var isAnimatable = _ref.isAnimatable,\n      isAnimating = _ref.isAnimating,\n      resetAnimation = _ref.resetAnimation,\n      toggleAnimation = _ref.toggleAnimation,\n      setLayerAnimationTime = _ref.setLayerAnimationTime,\n      updateAnimationSpeed = _ref.updateAnimationSpeed,\n      animationConfig = _ref.animationConfig;\n    var currentTime = animationConfig.currentTime,\n      domain = animationConfig.domain,\n      speed = animationConfig.speed,\n      step = animationConfig.step,\n      timeSteps = animationConfig.timeSteps,\n      timeFormat = animationConfig.timeFormat,\n      timezone = animationConfig.timezone,\n      defaultTimeFormat = animationConfig.defaultTimeFormat;\n    var onSlider1Change = (0, _react.useCallback)(function (val) {\n      if (Array.isArray(timeSteps)) {\n        setLayerAnimationTime((0, _dataUtils.snapToMarks)(val, timeSteps)); // TODO: merge slider in to avoid this step\n      } else if (val >= domain[0] && val <= domain[1]) {\n        setLayerAnimationTime(val);\n      }\n    }, [domain, timeSteps, setLayerAnimationTime]);\n    var dateFunc = (0, _react.useMemo)(function () {\n      var hasUserFormat = typeof timeFormat === 'string';\n      var currentFormat = (hasUserFormat ? timeFormat : defaultTimeFormat) || _defaultSettings.DEFAULT_TIME_FORMAT;\n      return (0, _dataUtils.datetimeFormatter)(timezone)(currentFormat);\n    }, [timeFormat, defaultTimeFormat, timezone]);\n    var timeStart = (0, _react.useMemo)(function () {\n      return domain ? dateFunc(domain[0]) : '';\n    }, [domain, dateFunc]);\n    var timeEnd = (0, _react.useMemo)(function () {\n      return domain ? dateFunc(domain[1]) : '';\n    }, [domain, dateFunc]);\n    return /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.BottomWidgetInner, {\n      className: \"bottom-widget--inner\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(AnimationWidgetInner, {\n      className: \"animation-widget--inner\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(PlaybackControls, {\n      className: \"animation-control-playpause\",\n      startAnimation: toggleAnimation,\n      isAnimating: isAnimating,\n      pauseAnimation: toggleAnimation,\n      resetAnimation: resetAnimation,\n      speed: speed,\n      isAnimatable: isAnimatable,\n      updateAnimationSpeed: updateAnimationSpeed\n    }), /*#__PURE__*/_react[\"default\"].createElement(StyledDomain, {\n      className: \"domain-start\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, timeStart)), /*#__PURE__*/_react[\"default\"].createElement(SliderWrapper, {\n      className: \"animation-control__slider\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_slider[\"default\"], {\n      showValues: false,\n      isRanged: false,\n      step: step,\n      minValue: domain ? domain[0] : 0,\n      maxValue: domain ? domain[1] : 1,\n      value1: currentTime,\n      onSlider1Change: onSlider1Change,\n      enableBarDrag: true\n    })), /*#__PURE__*/_react[\"default\"].createElement(StyledDomain, {\n      className: \"domain-end\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, timeEnd))), /*#__PURE__*/_react[\"default\"].createElement(FloatingTimeDisplay, {\n      currentTime: currentTime,\n      defaultTimeFormat: defaultTimeFormat,\n      timeFormat: timeFormat,\n      timezone: timezone\n    }));\n  };\n  AnimationControl.defaultProps = {\n    toggleAnimation: function toggleAnimation() {},\n    updateAnimationSpeed: function updateAnimationSpeed() {},\n    animationControlProps: {},\n    animationConfig: {}\n  };\n  return AnimationControl;\n}\nvar _default = AnimationControlFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../../src/components/common/animation-control/animation-control.js"],"names":["SliderWrapper","styled","div","AnimationWidgetInner","StyledDomain","attrs","className","props","theme","titleTextColor","AnimationControlFactory","deps","PlaybackControlsFactory","FloatingTimeDisplayFactory","PlaybackControls","FloatingTimeDisplay","AnimationControl","isAnimatable","isAnimating","resetAnimation","toggleAnimation","setLayerAnimationTime","updateAnimationSpeed","animationConfig","currentTime","domain","speed","step","timeSteps","timeFormat","timezone","defaultTimeFormat","onSlider1Change","Array","isArray","val","dateFunc","hasUserFormat","currentFormat","DEFAULT_TIME_FORMAT","timeStart","timeEnd","defaultProps","animationControlProps"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, useMemo} from 'react';\nimport styled from 'styled-components';\n\nimport Slider from 'components/common/slider/slider';\nimport {BottomWidgetInner} from 'components/common/styled-components';\nimport PlaybackControlsFactory from './playback-controls';\nimport FloatingTimeDisplayFactory from './floating-time-display';\nimport {snapToMarks, datetimeFormatter} from 'utils/data-utils';\nimport {DEFAULT_TIME_FORMAT} from 'constants/default-settings';\n\nconst SliderWrapper = styled.div`\n  display: flex;\n  position: relative;\n  flex-grow: 1;\n  margin-right: 24px;\n  margin-left: 24px;\n`;\n\nconst AnimationWidgetInner = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: 32px;\n\n  .playback-controls {\n    margin-left: -8px;\n    margin-right: 16px;\n  }\n`;\n\nconst StyledDomain = styled.div.attrs({\n  className: 'animation-control__time-domain'\n})`\n  color: ${props => props.theme.titleTextColor};\n  font-weight: 400;\n  font-size: 10px;\n`;\n\nAnimationControlFactory.deps = [PlaybackControlsFactory, FloatingTimeDisplayFactory];\n\nfunction AnimationControlFactory(PlaybackControls, FloatingTimeDisplay) {\n  const AnimationControl = ({\n    isAnimatable,\n    isAnimating,\n    resetAnimation,\n    toggleAnimation,\n    setLayerAnimationTime,\n    updateAnimationSpeed,\n    animationConfig\n  }) => {\n    const {\n      currentTime,\n      domain,\n      speed,\n      step,\n      timeSteps,\n      timeFormat,\n      timezone,\n      defaultTimeFormat\n    } = animationConfig;\n    const onSlider1Change = useCallback(\n      val => {\n        if (Array.isArray(timeSteps)) {\n          setLayerAnimationTime(snapToMarks(val, timeSteps));\n\n          // TODO: merge slider in to avoid this step\n        } else if (val >= domain[0] && val <= domain[1]) {\n          setLayerAnimationTime(val);\n        }\n      },\n      [domain, timeSteps, setLayerAnimationTime]\n    );\n\n    const dateFunc = useMemo(() => {\n      const hasUserFormat = typeof timeFormat === 'string';\n      const currentFormat = (hasUserFormat ? timeFormat : defaultTimeFormat) || DEFAULT_TIME_FORMAT;\n      return datetimeFormatter(timezone)(currentFormat);\n    }, [timeFormat, defaultTimeFormat, timezone]);\n\n    const timeStart = useMemo(() => (domain ? dateFunc(domain[0]) : ''), [domain, dateFunc]);\n    const timeEnd = useMemo(() => (domain ? dateFunc(domain[1]) : ''), [domain, dateFunc]);\n\n    return (\n      <BottomWidgetInner className=\"bottom-widget--inner\">\n        <AnimationWidgetInner className=\"animation-widget--inner\">\n          <PlaybackControls\n            className=\"animation-control-playpause\"\n            startAnimation={toggleAnimation}\n            isAnimating={isAnimating}\n            pauseAnimation={toggleAnimation}\n            resetAnimation={resetAnimation}\n            speed={speed}\n            isAnimatable={isAnimatable}\n            updateAnimationSpeed={updateAnimationSpeed}\n          />\n          <StyledDomain className=\"domain-start\">\n            <span>{timeStart}</span>\n          </StyledDomain>\n          <SliderWrapper className=\"animation-control__slider\">\n            <Slider\n              showValues={false}\n              isRanged={false}\n              step={step}\n              minValue={domain ? domain[0] : 0}\n              maxValue={domain ? domain[1] : 1}\n              value1={currentTime}\n              onSlider1Change={onSlider1Change}\n              enableBarDrag={true}\n            />\n          </SliderWrapper>\n          <StyledDomain className=\"domain-end\">\n            <span>{timeEnd}</span>\n          </StyledDomain>\n        </AnimationWidgetInner>\n        <FloatingTimeDisplay\n          currentTime={currentTime}\n          defaultTimeFormat={defaultTimeFormat}\n          timeFormat={timeFormat}\n          timezone={timezone}\n        />\n      </BottomWidgetInner>\n    );\n  };\n\n  AnimationControl.defaultProps = {\n    toggleAnimation: () => {},\n    updateAnimationSpeed: () => {},\n    animationControlProps: {},\n    animationConfig: {}\n  };\n\n  return AnimationControl;\n}\n\nexport default AnimationControlFactory;\n"]},"metadata":{},"sourceType":"script"}