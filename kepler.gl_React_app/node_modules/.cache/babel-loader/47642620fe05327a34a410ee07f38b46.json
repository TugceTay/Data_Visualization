{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.MapInfoPanel = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _cloudTile = _interopRequireDefault(require(\"./cloud-tile\"));\nvar _imageModalContainer = _interopRequireDefault(require(\"./image-modal-container\"));\nvar _providerModalContainer = _interopRequireDefault(require(\"./provider-modal-container\"));\nvar _statusPanel = _interopRequireWildcard(require(\"./status-panel\"));\nvar _defaultSettings = require(\"../../constants/default-settings\");\nvar _styledComponents2 = require(\"../common/styled-components\");\nvar _imagePreview = _interopRequireDefault(require(\"../common/image-preview\"));\nvar _localization = require(\"../../localization\");\nvar _templateObject;\n\n/** @typedef {import('./save-map-modal').SaveMapModalProps} SaveMapModalProps */\nvar StyledSaveMapModal = _styledComponents[\"default\"].div.attrs({\n  className: 'save-map-modal'\n})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  .save-map-modal-content {\\n    min-height: 400px;\\n    flex-direction: column;\\n  }\\n\\n  .description {\\n    width: 300px;\\n  }\\n\\n  .image-preview-panel {\\n    width: 300px;\\n\\n    .image-preview {\\n      padding: 0;\\n    }\\n  }\\n\\n  .map-info-panel {\\n    flex-direction: column;\\n  }\\n\\n  .save-map-modal-description {\\n    .modal-section-subtitle {\\n      margin-left: 6px;\\n    }\\n  }\\n\"])));\nvar nop = function nop(_) {};\nvar MapInfoPanel = function MapInfoPanel(_ref) {\n  var _ref$mapInfo = _ref.mapInfo,\n    mapInfo = _ref$mapInfo === void 0 ? {\n      description: '',\n      title: ''\n    } : _ref$mapInfo,\n    characterLimits = _ref.characterLimits,\n    onChangeInput = _ref.onChangeInput;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"selection map-info-panel\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalSection, {\n    className: \"save-map-modal-name\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"modal-section-title\"\n  }, \"Name*\"), /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.InputLight, {\n    id: \"map-title\",\n    type: \"text\",\n    value: mapInfo.title,\n    onChange: function onChange(e) {\n      return onChangeInput('title', e);\n    },\n    placeholder: \"Type map title\"\n  }))), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"save-map-modal-description\",\n    style: {\n      display: 'flex'\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"modal-section-title\"\n  }, \"Description\"), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"modal-section-subtitle\"\n  }, \"(optional)\")), /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.TextAreaLight, {\n    rows: \"3\",\n    id: \"map-description\",\n    style: {\n      resize: 'none'\n    },\n    value: mapInfo.description,\n    onChange: function onChange(e) {\n      return onChangeInput('description', e);\n    },\n    placeholder: \"Type map description\"\n  })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalInputFootnote, {\n    className: \"save-map-modal-description__footnote\",\n    error: characterLimits.description && mapInfo.description.length > characterLimits.description\n  }, mapInfo.description.length, \"/\", characterLimits.description || _defaultSettings.MAP_INFO_CHARACTER.description, ' ', \"characters\")));\n};\nexports.MapInfoPanel = MapInfoPanel;\nfunction SaveMapModalFactory() {\n  /**\n   * @type {React.FunctionComponent<SaveMapModalProps>}\n   */\n  var SaveMapModal = function SaveMapModal(_ref2) {\n    var mapInfo = _ref2.mapInfo,\n      exportImage = _ref2.exportImage,\n      _ref2$characterLimits = _ref2.characterLimits,\n      characterLimits = _ref2$characterLimits === void 0 ? {} : _ref2$characterLimits,\n      cloudProviders = _ref2.cloudProviders,\n      isProviderLoading = _ref2.isProviderLoading,\n      currentProvider = _ref2.currentProvider,\n      providerError = _ref2.providerError,\n      onSetCloudProvider = _ref2.onSetCloudProvider,\n      onUpdateImageSetting = _ref2.onUpdateImageSetting,\n      cleanupExportImage = _ref2.cleanupExportImage,\n      onSetMapInfo = _ref2.onSetMapInfo;\n    var onChangeInput = function onChangeInput(key, _ref3) {\n      var value = _ref3.target.value;\n      onSetMapInfo((0, _defineProperty2[\"default\"])({}, key, value));\n    };\n    var provider = currentProvider ? cloudProviders.find(function (p) {\n      return p.name === currentProvider;\n    }) : null;\n    return /*#__PURE__*/_react[\"default\"].createElement(_providerModalContainer[\"default\"], {\n      onSetCloudProvider: onSetCloudProvider,\n      cloudProviders: cloudProviders,\n      currentProvider: currentProvider\n    }, /*#__PURE__*/_react[\"default\"].createElement(_imageModalContainer[\"default\"], {\n      currentProvider: currentProvider,\n      cloudProviders: cloudProviders,\n      onUpdateImageSetting: onUpdateImageSetting,\n      cleanupExportImage: cleanupExportImage\n    }, /*#__PURE__*/_react[\"default\"].createElement(StyledSaveMapModal, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalContent, {\n      className: \"save-map-modal-content\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledExportSection, {\n      disabled: isProviderLoading\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"description\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"title\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.saveMap.title'\n    })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"subtitle\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.saveMap.subtitle'\n    }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"selection\"\n    }, cloudProviders.map(function (cloudProvider) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_cloudTile[\"default\"], {\n        key: cloudProvider.name,\n        onSelect: function onSelect() {\n          return onSetCloudProvider(cloudProvider.name);\n        },\n        onSetCloudProvider: onSetCloudProvider,\n        cloudProvider: cloudProvider,\n        isSelected: cloudProvider.name === currentProvider,\n        isConnected: Boolean(cloudProvider.getAccessToken && cloudProvider.getAccessToken())\n      });\n    }))), provider && provider.getManagementUrl && /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledExportSection, {\n      style: {\n        margin: '2px 0'\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"description\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"selection\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n      key: 1,\n      href: provider.getManagementUrl(),\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      style: {\n        textDecoration: 'underline'\n      }\n    }, \"Go to your Kepler.gl \", provider.displayName, \" page\"))), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledExportSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"description image-preview-panel\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_imagePreview[\"default\"], {\n      exportImage: exportImage,\n      width: _defaultSettings.MAP_THUMBNAIL_DIMENSION.width,\n      showDimension: false\n    })), isProviderLoading ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"selection map-saving-animation\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_statusPanel.UploadAnimation, {\n      icon: provider && provider.icon\n    })) : /*#__PURE__*/_react[\"default\"].createElement(MapInfoPanel, {\n      mapInfo: mapInfo,\n      characterLimits: characterLimits,\n      onChangeInput: onChangeInput\n    })), providerError ? /*#__PURE__*/_react[\"default\"].createElement(_statusPanel[\"default\"], {\n      isLoading: false,\n      error: providerError,\n      providerIcon: provider && provider.icon\n    }) : null))));\n  };\n  SaveMapModal.defaultProps = {\n    characterLimits: _defaultSettings.MAP_INFO_CHARACTER,\n    cloudProviders: [],\n    providerError: null,\n    isProviderLoading: false,\n    onSetCloudProvider: nop,\n    onUpdateImageSetting: nop\n  };\n  return SaveMapModal;\n}\nvar _default = SaveMapModalFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/modals/save-map-modal.js"],"names":["StyledSaveMapModal","div","attrs","className","nop","MapInfoPanel","mapInfo","description","title","characterLimits","onChangeInput","e","display","resize","length","MAP_INFO_CHARACTER","SaveMapModalFactory","SaveMapModal","exportImage","cloudProviders","isProviderLoading","currentProvider","providerError","onSetCloudProvider","onUpdateImageSetting","cleanupExportImage","onSetMapInfo","key","target","value","provider","find","p","name","map","cloudProvider","Boolean","getAccessToken","getManagementUrl","margin","textDecoration","displayName","MAP_THUMBNAIL_DIMENSION","width","icon","defaultProps"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport CloudTile from './cloud-tile';\nimport ImageModalContainer from './image-modal-container';\nimport ProviderModalContainer from './provider-modal-container';\nimport StatusPanel, {UploadAnimation} from './status-panel';\n\nimport {MAP_THUMBNAIL_DIMENSION, MAP_INFO_CHARACTER} from 'constants/default-settings';\n\nimport {\n  StyledModalContent,\n  InputLight,\n  TextAreaLight,\n  StyledExportSection,\n  StyledModalSection,\n  StyledModalInputFootnote\n} from 'components/common/styled-components';\nimport ImagePreview from 'components/common/image-preview';\nimport {FormattedMessage} from 'localization';\n\n/** @typedef {import('./save-map-modal').SaveMapModalProps} SaveMapModalProps */\n\nconst StyledSaveMapModal = styled.div.attrs({\n  className: 'save-map-modal'\n})`\n  .save-map-modal-content {\n    min-height: 400px;\n    flex-direction: column;\n  }\n\n  .description {\n    width: 300px;\n  }\n\n  .image-preview-panel {\n    width: 300px;\n\n    .image-preview {\n      padding: 0;\n    }\n  }\n\n  .map-info-panel {\n    flex-direction: column;\n  }\n\n  .save-map-modal-description {\n    .modal-section-subtitle {\n      margin-left: 6px;\n    }\n  }\n`;\n\nconst nop = _ => {};\n\nexport const MapInfoPanel = ({\n  mapInfo = {description: '', title: ''},\n  characterLimits,\n  onChangeInput\n}) => (\n  <div className=\"selection map-info-panel\">\n    <StyledModalSection className=\"save-map-modal-name\">\n      <div className=\"modal-section-title\">Name*</div>\n      <div>\n        <InputLight\n          id=\"map-title\"\n          type=\"text\"\n          value={mapInfo.title}\n          onChange={e => onChangeInput('title', e)}\n          placeholder=\"Type map title\"\n        />\n      </div>\n    </StyledModalSection>\n    <StyledModalSection>\n      <div className=\"save-map-modal-description\" style={{display: 'flex'}}>\n        <div className=\"modal-section-title\">Description</div>\n        <div className=\"modal-section-subtitle\">(optional)</div>\n      </div>\n      <div>\n        <TextAreaLight\n          rows=\"3\"\n          id=\"map-description\"\n          style={{resize: 'none'}}\n          value={mapInfo.description}\n          onChange={e => onChangeInput('description', e)}\n          placeholder=\"Type map description\"\n        />\n      </div>\n      <StyledModalInputFootnote\n        className=\"save-map-modal-description__footnote\"\n        error={\n          characterLimits.description && mapInfo.description.length > characterLimits.description\n        }\n      >\n        {mapInfo.description.length}/{characterLimits.description || MAP_INFO_CHARACTER.description}{' '}\n        characters\n      </StyledModalInputFootnote>\n    </StyledModalSection>\n  </div>\n);\n\nfunction SaveMapModalFactory() {\n  /**\n   * @type {React.FunctionComponent<SaveMapModalProps>}\n   */\n  const SaveMapModal = ({\n    mapInfo,\n    exportImage,\n    characterLimits = {},\n    cloudProviders,\n    isProviderLoading,\n    currentProvider,\n    providerError,\n    onSetCloudProvider,\n    onUpdateImageSetting,\n    cleanupExportImage,\n    onSetMapInfo\n  }) => {\n    const onChangeInput = (key, {target: {value}}) => {\n      onSetMapInfo({[key]: value});\n    };\n    const provider = currentProvider ? cloudProviders.find(p => p.name === currentProvider) : null;\n\n    return (\n      <ProviderModalContainer\n        onSetCloudProvider={onSetCloudProvider}\n        cloudProviders={cloudProviders}\n        currentProvider={currentProvider}\n      >\n        <ImageModalContainer\n          currentProvider={currentProvider}\n          cloudProviders={cloudProviders}\n          onUpdateImageSetting={onUpdateImageSetting}\n          cleanupExportImage={cleanupExportImage}\n        >\n          <StyledSaveMapModal>\n            <StyledModalContent className=\"save-map-modal-content\">\n              <StyledExportSection disabled={isProviderLoading}>\n                <div className=\"description\">\n                  <div className=\"title\">\n                    <FormattedMessage id={'modal.saveMap.title'} />\n                  </div>\n                  <div className=\"subtitle\">\n                    <FormattedMessage id={'modal.saveMap.subtitle'} />\n                  </div>\n                </div>\n                <div className=\"selection\">\n                  {cloudProviders.map(cloudProvider => (\n                    <CloudTile\n                      key={cloudProvider.name}\n                      onSelect={() => onSetCloudProvider(cloudProvider.name)}\n                      onSetCloudProvider={onSetCloudProvider}\n                      cloudProvider={cloudProvider}\n                      isSelected={cloudProvider.name === currentProvider}\n                      isConnected={Boolean(\n                        cloudProvider.getAccessToken && cloudProvider.getAccessToken()\n                      )}\n                    />\n                  ))}\n                </div>\n              </StyledExportSection>\n              {provider && provider.getManagementUrl && (\n                <StyledExportSection style={{margin: '2px 0'}}>\n                  <div className=\"description\" />\n                  <div className=\"selection\">\n                    <a\n                      key={1}\n                      href={provider.getManagementUrl()}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      style={{textDecoration: 'underline'}}\n                    >\n                      Go to your Kepler.gl {provider.displayName} page\n                    </a>\n                  </div>\n                </StyledExportSection>\n              )}\n              <StyledExportSection>\n                <div className=\"description image-preview-panel\">\n                  <ImagePreview\n                    exportImage={exportImage}\n                    width={MAP_THUMBNAIL_DIMENSION.width}\n                    showDimension={false}\n                  />\n                </div>\n                {isProviderLoading ? (\n                  <div className=\"selection map-saving-animation\">\n                    <UploadAnimation icon={provider && provider.icon} />\n                  </div>\n                ) : (\n                  <MapInfoPanel\n                    mapInfo={mapInfo}\n                    characterLimits={characterLimits}\n                    onChangeInput={onChangeInput}\n                  />\n                )}\n              </StyledExportSection>\n              {providerError ? (\n                <StatusPanel\n                  isLoading={false}\n                  error={providerError}\n                  providerIcon={provider && provider.icon}\n                />\n              ) : null}\n            </StyledModalContent>\n          </StyledSaveMapModal>\n        </ImageModalContainer>\n      </ProviderModalContainer>\n    );\n  };\n\n  SaveMapModal.defaultProps = {\n    characterLimits: MAP_INFO_CHARACTER,\n    cloudProviders: [],\n    providerError: null,\n    isProviderLoading: false,\n    onSetCloudProvider: nop,\n    onUpdateImageSetting: nop\n  };\n\n  return SaveMapModal;\n}\n\nexport default SaveMapModalFactory;\n"]},"metadata":{},"sourceType":"script"}