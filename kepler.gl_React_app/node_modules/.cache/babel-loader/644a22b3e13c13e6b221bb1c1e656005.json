{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mergeMessages = exports.flattenMessages = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _utils = require(\"./utils\");\nvar _console = require(\"global/console\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\n\n// Flat messages since react-intl does not seem to support nested structures\n// Adapted from https://medium.com/siren-apparel-press/internationalization-and-localization-of-sirenapparel-eu-sirenapparel-us-and-sirenapparel-asia-ddee266066a2\nvar flattenMessages = function flattenMessages(nestedMessages) {\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return Object.keys(nestedMessages).reduce(function (messages, key) {\n    var value = nestedMessages[key];\n    var prefixedKey = prefix ? \"\".concat(prefix, \".\").concat(key) : key;\n    if (typeof value === 'string') {\n      messages[prefixedKey] = value;\n    } else {\n      Object.assign(messages, flattenMessages(value, prefixedKey));\n    }\n    return messages;\n  }, {});\n};\nexports.flattenMessages = flattenMessages;\nvar mergeMessages = function mergeMessages(defaultMessages, userMessages) {\n  if (!(0, _utils.isObject)(userMessages) || !(0, _utils.isObject)(userMessages.en)) {\n    _console.console.error('message should be an object and contain at least the `en` translation. Read more at https://docs.kepler.gl/docs/api-reference/localization');\n    return defaultMessages;\n  }\n  var userEnFlat = flattenMessages(userMessages.en);\n  return Object.keys(defaultMessages).reduce(function (acc, key) {\n    return _objectSpread(_objectSpread({}, acc), {}, (0, _defineProperty2[\"default\"])({}, key, key === 'en' ? _objectSpread(_objectSpread({}, defaultMessages.en), userEnFlat) : _objectSpread(_objectSpread(_objectSpread({}, defaultMessages[key]), userEnFlat), flattenMessages(userMessages[key] || {}))));\n  }, {});\n};\nexports.mergeMessages = mergeMessages;","map":{"version":3,"sources":["../../src/utils/locale-utils.js"],"names":["flattenMessages","nestedMessages","prefix","keys","reduce","messages","key","value","prefixedKey","Object","assign","mergeMessages","defaultMessages","userMessages","en","Console","error","userEnFlat","acc"],"mappings":";;;;;;;;AAoBA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,gBAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACO,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,cAAD,EAAiC;EAAA,IAAhBC,MAAgB,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAP,EAAO;EAC9D,OAAO,MAAM,CAACC,IAAP,CAAYF,cAAZ,CAAA,CAA4BG,MAA5B,CAAmC,UAACC,QAAD,EAAWC,GAAX,EAAmB;IAC3D,IAAMC,KAAK,GAAGN,cAAc,CAACK,GAAD,CAA5B;IACA,IAAME,WAAW,GAAGN,MAAM,GAAA,EAAA,CAAA,MAAA,CAAMA,MAAN,EAAA,GAAA,CAAA,CAAA,MAAA,CAAgBI,GAAhB,CAAA,GAAwBA,GAAlD;IACA,IAAI,OAAOC,KAAP,KAAiB,QAArB,EAA+B;MAC7BF,QAAQ,CAACG,WAAD,CAARH,GAAwBE,KAAxBF;IACD,CAFD,MAEO;MACLI,MAAM,CAACC,MAAPD,CAAcJ,QAAdI,EAAwBT,eAAe,CAACO,KAAD,EAAQC,WAAR,CAAvCC,CAAAA;IACD;IACD,OAAOJ,QAAP;EACD,CATM,EASJ,CAAA,CATI,CAAP;AAUD,CAXM;;AAaA,IAAMM,aAAa,GAAG,SAAhBA,aAAgB,CAACC,eAAD,EAAkBC,YAAlB,EAAmC;EAC9D,IAAI,CAAC,CAAA,CAAA,EAAA,MAAA,CAAA,QAAA,EAASA,YAAT,CAAD,IAA2B,CAAC,CAAA,CAAA,EAAA,MAAA,CAAA,QAAA,EAASA,YAAY,CAACC,EAAtB,CAAhC,EAA2D;IACzDC,QAAAA,CAAAA,OAAAA,CAAQC,KAARD,CACE,4IADFA,CAAAA;IAIA,OAAOH,eAAP;EACD;EAED,IAAMK,UAAU,GAAGjB,eAAe,CAACa,YAAY,CAACC,EAAd,CAAlC;EACA,OAAO,MAAM,CAACX,IAAP,CAAYS,eAAZ,CAAA,CAA6BR,MAA7B,CACL,UAACc,GAAD,EAAMZ,GAAN,EAAA;IAAA,OAAA,aAAA,CAAA,aAAA,CAAA,CAAA,CAAA,EACKY,GADL,CAAA,EAAA,CAAA,CAAA,EAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAEGZ,GAFH,EAGIA,GAAG,KAAK,IAARA,GAAAA,aAAAA,CAAAA,aAAAA,CAAAA,CAAAA,CAAAA,EACQM,eAAe,CAACE,EADxBR,CAAAA,EAC+BW,UAD/BX,CAAAA,GAAAA,aAAAA,CAAAA,aAAAA,CAAAA,aAAAA,CAAAA,CAAAA,CAAAA,EAEQM,eAAe,CAACN,GAAD,CAFvBA,CAAAA,EAEiCW,UAFjCX,CAAAA,EAEgDN,eAAe,CAACa,YAAY,CAACP,GAAD,CAAZO,IAAqB,CAAA,CAAtB,CAF/DP,CAHJ,CAAA,CAAA;EAAA,CADK,EAQL,CAAA,CARK,CAAP;AAUD,CApBM","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {isObject} from './utils';\nimport {console as Console} from 'global/console';\n\n// Flat messages since react-intl does not seem to support nested structures\n// Adapted from https://medium.com/siren-apparel-press/internationalization-and-localization-of-sirenapparel-eu-sirenapparel-us-and-sirenapparel-asia-ddee266066a2\nexport const flattenMessages = (nestedMessages, prefix = '') => {\n  return Object.keys(nestedMessages).reduce((messages, key) => {\n    const value = nestedMessages[key];\n    const prefixedKey = prefix ? `${prefix}.${key}` : key;\n    if (typeof value === 'string') {\n      messages[prefixedKey] = value;\n    } else {\n      Object.assign(messages, flattenMessages(value, prefixedKey));\n    }\n    return messages;\n  }, {});\n};\n\nexport const mergeMessages = (defaultMessages, userMessages) => {\n  if (!isObject(userMessages) || !isObject(userMessages.en)) {\n    Console.error(\n      'message should be an object and contain at least the `en` translation. Read more at https://docs.kepler.gl/docs/api-reference/localization'\n    );\n\n    return defaultMessages;\n  }\n\n  const userEnFlat = flattenMessages(userMessages.en);\n  return Object.keys(defaultMessages).reduce(\n    (acc, key) => ({\n      ...acc,\n      [key]:\n        key === 'en'\n          ? {...defaultMessages.en, ...userEnFlat}\n          : {...defaultMessages[key], ...userEnFlat, ...flattenMessages(userMessages[key] || {})}\n    }),\n    {}\n  );\n};\n"]},"metadata":{},"sourceType":"script"}