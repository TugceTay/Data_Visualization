{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _reactMapGl = _interopRequireDefault(require(\"react-map-gl\"));\nvar _styledComponents2 = require(\"../common/styled-components\");\nvar _mediaBreakpoints = require(\"../../styles/media-breakpoints\");\nvar _mapboxUtils = require(\"../../utils/map-style-utils/mapbox-utils\");\nvar _reactIntl = require(\"react-intl\");\nvar _localization = require(\"../../localization\");\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar MapH = 190;\nvar MapW = 264;\nvar ErrorMsg = {\n  styleError: 'Failed to load map style, make sure it is published. For private style, paste in your access token.'\n};\nvar PreviewMap = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  align-items: center;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  margin-left: 116px;\\n  flex-shrink: 0;\\n\\n  .preview-title {\\n    font-weight: 500;\\n    font-size: 10px;\\n    padding: 8px 0px;\\n  }\\n\\n  .preview-title.error {\\n    color: \", \";\\n  }\\n\\n  \", \";\\n\\n  \", \";\\n\"])), function (props) {\n  return props.theme.errorColor;\n}, _mediaBreakpoints.media.portable(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n    margin-left: 32px;\\n  \"]))), _mediaBreakpoints.media.palm(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n    margin-left: unset;\\n    .preview-title {\\n      margin-top: 0px;\\n    }\\n  \"]))));\nvar StyledPreviewImage = _styledComponents[\"default\"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  background: \", \";\\n  border-radius: 4px;\\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.18);\\n  width: \", \"px;\\n  height: \", \"px;\\n  position: relative;\\n\\n  .preview-image-placeholder {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n  }\\n\\n  .preview-image-spinner {\\n    position: absolute;\\n    left: calc(50% - 25px);\\n    top: calc(50% - 25px);\\n  }\\n\"])), function (props) {\n  return props.theme.modalImagePlaceHolder;\n}, MapW, MapH);\nvar InlineLink = _styledComponents[\"default\"].a(_templateObject5 || (_templateObject5 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  font-weight: 500;\\n\\n  :hover {\\n    cursor: pointer;\\n  }\\n\"])));\nfunction AddMapStyleModalFactory() {\n  var AddMapStyleModal = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(AddMapStyleModal, _Component);\n    var _super = _createSuper(AddMapStyleModal);\n    function AddMapStyleModal() {\n      var _this;\n      (0, _classCallCheck2[\"default\"])(this, AddMapStyleModal);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n        reRenderKey: 0,\n        previousToken: null\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"loadMapStyleJson\", function (style) {\n        _this.props.loadCustomMapStyle({\n          style: style,\n          error: false\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"loadMapStyleError\", function () {\n        _this.props.loadCustomMapStyle({\n          error: true\n        });\n      });\n      return _this;\n    }\n    (0, _createClass2[\"default\"])(AddMapStyleModal, [{\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate() {\n        var _this2 = this;\n        var map = this.mapRef && this.mapRef.getMap();\n        if (map && this._map !== map) {\n          this._map = map;\n          map.on('style.load', function () {\n            var style = map.getStyle();\n            _this2.loadMapStyleJson(style);\n          });\n          map.on('error', function () {\n            _this2.loadMapStyleError();\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n        var _this$props = this.props,\n          inputStyle = _this$props.inputStyle,\n          mapState = _this$props.mapState,\n          mapboxApiUrl = _this$props.mapboxApiUrl,\n          intl = _this$props.intl;\n        var mapboxApiAccessToken = inputStyle.accessToken || this.props.mapboxApiAccessToken;\n        var mapProps = _objectSpread(_objectSpread({}, mapState), {}, {\n          mapboxApiUrl: mapboxApiUrl,\n          mapboxApiAccessToken: mapboxApiAccessToken,\n          preserveDrawingBuffer: true,\n          transformRequest: _mapboxUtils.transformRequest\n        });\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"add-map-style-modal\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalContent, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalVerticalPanel, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"modal-section-title\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n          id: 'modal.addStyle.pasteTitle'\n        })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"modal-section-subtitle\"\n        }, intl.formatMessage({\n          id: 'modal.addStyle.pasteSubtitle0'\n        }), /*#__PURE__*/_react[\"default\"].createElement(InlineLink, {\n          target: \"_blank\",\n          href: \"https://www.mapbox.com/help/studio-manual-publish/#style-url\"\n        }, ' ', intl.formatMessage({\n          id: 'modal.addStyle.pasteSubtitle2'\n        })), ' ', intl.formatMessage({\n          id: 'modal.addStyle.pasteSubtitle3'\n        }), /*#__PURE__*/_react[\"default\"].createElement(InlineLink, {\n          target: \"_blank\",\n          href: \"https://docs.mapbox.com/mapbox-gl-js/style-spec\"\n        }, ' ', intl.formatMessage({\n          id: 'modal.addStyle.pasteSubtitle4'\n        }))), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.InputLight, {\n          type: \"text\",\n          value: inputStyle.url || '',\n          onChange: function onChange(_ref) {\n            var value = _ref.target.value;\n            return _this3.props.inputMapStyle({\n              url: value\n            });\n          },\n          placeholder: \"e.g. mapbox://styles/username/style, http://my.stles.com/xxx/style.json \"\n        })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"modal-section-title\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n          id: 'modal.addStyle.publishTitle'\n        })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"modal-section-subtitle\"\n        }, intl.formatMessage({\n          id: 'modal.addStyle.publishSubtitle1'\n        }), /*#__PURE__*/_react[\"default\"].createElement(InlineLink, {\n          target: \"_blank\",\n          href: \"https://www.mapbox.com/studio/styles/\"\n        }, ' ', \"mapbox\"), ' ', intl.formatMessage({\n          id: 'modal.addStyle.publishSubtitle2'\n        }), /*#__PURE__*/_react[\"default\"].createElement(InlineLink, {\n          target: \"_blank\",\n          href: \"https://www.mapbox.com/help/studio-manual-publish/\"\n        }, ' ', intl.formatMessage({\n          id: 'modal.addStyle.publishSubtitle3'\n        })), ' ', intl.formatMessage({\n          id: 'modal.addStyle.publishSubtitle4'\n        })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"modal-section-subtitle\"\n        }, intl.formatMessage({\n          id: 'modal.addStyle.publishSubtitle5'\n        }), /*#__PURE__*/_react[\"default\"].createElement(InlineLink, {\n          target: \"_blank\",\n          href: \"https://www.mapbox.com/help/how-access-tokens-work/\"\n        }, ' ', intl.formatMessage({\n          id: 'modal.addStyle.publishSubtitle6'\n        })), ' ', intl.formatMessage({\n          id: 'modal.addStyle.publishSubtitle7'\n        })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.InputLight, {\n          type: \"text\",\n          value: inputStyle.accessToken || '',\n          onChange: function onChange(_ref2) {\n            var value = _ref2.target.value;\n            return _this3.props.inputMapStyle({\n              accessToken: value\n            });\n          },\n          placeholder: intl.formatMessage({\n            id: 'modal.addStyle.exampleToken'\n          })\n        })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledModalSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"modal-section-title\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n          id: 'modal.addStyle.namingTitle'\n        })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.InputLight, {\n          type: \"text\",\n          value: inputStyle.label || '',\n          onChange: function onChange(_ref3) {\n            var value = _ref3.target.value;\n            return _this3.props.inputMapStyle({\n              label: value\n            });\n          }\n        }))), /*#__PURE__*/_react[\"default\"].createElement(PreviewMap, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: (0, _classnames[\"default\"])('preview-title', {\n            error: inputStyle.error\n          })\n        }, inputStyle.error ? ErrorMsg.styleError : inputStyle.style && inputStyle.style.name || ''), /*#__PURE__*/_react[\"default\"].createElement(StyledPreviewImage, {\n          className: \"preview-image\"\n        }, !inputStyle.isValid ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"preview-image-spinner\"\n        }) : /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledMapContainer, null, /*#__PURE__*/_react[\"default\"].createElement(_reactMapGl[\"default\"], (0, _extends2[\"default\"])({}, mapProps, {\n          ref: function ref(el) {\n            _this3.mapRef = el;\n          },\n          key: this.state.reRenderKey,\n          width: MapW,\n          height: MapH,\n          mapStyle: inputStyle.url\n        })))))));\n      }\n    }], [{\n      key: \"getDerivedStateFromProps\",\n      value: function getDerivedStateFromProps(props, state) {\n        if (props.inputStyle && props.inputStyle.accessToken && props.inputStyle.accessToken !== state.previousToken) {\n          // toke has changed\n          // ReactMapGl doesn't re-create map when token has changed\n          // here we force the map to update\n          return {\n            reRenderKey: state.reRenderKey + 1,\n            previousToken: props.inputStyle.accessToken\n          };\n        }\n        return null;\n      }\n    }]);\n    return AddMapStyleModal;\n  }(_react.Component);\n  (0, _defineProperty2[\"default\"])(AddMapStyleModal, \"propTypes\", {\n    inputMapStyle: _propTypes[\"default\"].func.isRequired,\n    inputStyle: _propTypes[\"default\"].object.isRequired,\n    loadCustomMapStyle: _propTypes[\"default\"].func.isRequired,\n    mapboxApiAccessToken: _propTypes[\"default\"].string.isRequired,\n    mapboxApiUrl: _propTypes[\"default\"].string.isRequired,\n    mapState: _propTypes[\"default\"].object.isRequired\n  });\n  return (0, _reactIntl.injectIntl)((0, _reactLifecyclesCompat.polyfill)(AddMapStyleModal));\n}\nvar _default = AddMapStyleModalFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/modals/add-map-style-modal.js"],"names":["MapH","MapW","ErrorMsg","styleError","PreviewMap","styled","div","props","theme","errorColor","media","portable","palm","StyledPreviewImage","modalImagePlaceHolder","InlineLink","a","AddMapStyleModalFactory","AddMapStyleModal","Component","inputMapStyle","PropTypes","func","isRequired","inputStyle","object","loadCustomMapStyle","mapboxApiAccessToken","string","mapboxApiUrl","mapState","reRenderKey","previousToken","state","accessToken","map","mapRef","getMap","_map","on","style","getStyle","loadMapStyleJson","loadMapStyleError","error","intl","mapProps","preserveDrawingBuffer","transformRequest","formatMessage","id","url","target","value","label","name","isValid","el"],"mappings":";;;;;;;;;;;;;;;;;AAoBA,IAAA,MAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AACA,IAAA,sBAAA,GAAA,OAAA,CAAA,yBAAA,CAAA;AACA,IAAA,UAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,IAAA,WAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,IAAA,iBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,mBAAA,CAAA,CAAA;AACA,IAAA,WAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;AACA,IAAA,kBAAA,GAAA,OAAA,CAAA,6BAAA,CAAA;AAOA,IAAA,iBAAA,GAAA,OAAA,CAAA,gCAAA,CAAA;AAGA,IAAA,YAAA,GAAA,OAAA,CAAA,0CAAA,CAAA;AACA,IAAA,UAAA,GAAA,OAAA,CAAA,YAAA,CAAA;AACA,IAAA,aAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,IAAI,GAAG,GAAb;AACA,IAAMC,IAAI,GAAG,GAAb;AACA,IAAMC,QAAQ,GAAG;EACfC,UAAU,EACR;AAFa,CAAjB;AAKA,IAAMC,UAAU,GAAGC,iBAAAA,CAAAA,SAAAA,CAAAA,CAAOC,GAAV,CAAA,eAAA,KAAA,eAAA,GAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,qRAAA,EAAA,cAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA,EAeH,UAAA,KAAK,EAAA;EAAA,OAAIC,KAAK,CAACC,KAAND,CAAYE,UAAhB;AAAA,CAfF,EAkBZC,iBAAAA,CAAAA,KAAAA,CAAMC,QAlBM,CAAA,gBAAA,KAAA,gBAAA,GAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,8BAAA,CAAA,CAAA,CAAA,CAAA,EAsBZD,iBAAAA,CAAAA,KAAAA,CAAME,IAtBM,CAAA,gBAAA,KAAA,gBAAA,GAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,oFAAA,CAAA,CAAA,CAAA,CAAA,CAAhB;AA8BA,IAAMC,kBAAkB,GAAGR,iBAAAA,CAAAA,SAAAA,CAAAA,CAAOC,GAAV,CAAA,gBAAA,KAAA,gBAAA,GAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,kBAAA,EAAA,sFAAA,EAAA,iBAAA,EAAA,8OAAA,CAAA,CAAA,CAAA,EACR,UAAA,KAAK,EAAA;EAAA,OAAIC,KAAK,CAACC,KAAND,CAAYO,qBAAhB;AAAA,CADG,EAIbb,IAJa,EAKZD,IALY,CAAxB;AAqBA,IAAMe,UAAU,GAAGV,iBAAAA,CAAAA,SAAAA,CAAAA,CAAOW,CAAV,CAAA,gBAAA,KAAA,gBAAA,GAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,kEAAA,CAAA,CAAA,CAAA,CAAhB;AAQA,SAASC,uBAAT,GAAmC;EAAA,IAC3BC,gBAD2B,GAAA,aAAA,UAAA,UAAA,EAAA;IAAA,CAAA,CAAA,EAAA,UAAA,CAAA,SAAA,CAAA,EAAA,gBAAA,EAAA,UAAA,CAAA;IAAA,IAAA,MAAA,GAAA,YAAA,CAAA,gBAAA,CAAA;IAAA,SAAA,gBAAA,GAAA;MAAA,IAAA,KAAA;MAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,IAAA,EAAA,gBAAA,CAAA;MAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAA,IAAA,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;QAAA,IAAA,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA;MAAA;MAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,MAAA,EAAA,CAAA,IAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA;MAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,OAAA,EAWvB;QACNa,WAAW,EAAE,CADP;QAENC,aAAa,EAAE;MAFT,CAXuB,CAAA;MAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,kBAAA,EAmDZ,UAAA,KAAK,EAAI;QAC1B,KAAA,CAAKzB,KAAL,CAAWmB,kBAAX,CAA8B;UAACc,KAAK,EAALA,KAAD;UAAQI,KAAK,EAAE;QAAf,CAA9B,CAAA;MACD,CArD8B,CAAA;MAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,mBAAA,EAuDX,YAAM;QACxB,KAAA,CAAKrC,KAAL,CAAWmB,kBAAX,CAA8B;UAACkB,KAAK,EAAE;QAAR,CAA9B,CAAA;MACD,CAzD8B,CAAA;MAAA,OAAA,KAAA;IAAA;IAAA,CAAA,CAAA,EAAA,aAAA,CAAA,SAAA,CAAA,EAAA,gBAAA,EAAA,CAAA;MAAA,GAAA,EAAA,oBAAA;MAAA,KAAA,EAmC/B,SAAA,kBAAA,GAAqB;QAAA,IAAA,MAAA,GAAA,IAAA;QACnB,IAAMT,GAAG,GAAG,IAAA,CAAKC,MAAL,IAAe,IAAA,CAAKA,MAAL,CAAYC,MAAZ,EAA3B;QACA,IAAIF,GAAG,IAAI,IAAA,CAAKG,IAAL,KAAcH,GAAzB,EAA8B;UAC5B,IAAA,CAAKG,IAAL,GAAYH,GAAZ;UAEAA,GAAG,CAACI,EAAJJ,CAAO,YAAPA,EAAqB,YAAM;YACzB,IAAMK,KAAK,GAAGL,GAAG,CAACM,QAAJN,EAAd;YACA,MAAI,CAACO,gBAAL,CAAsBF,KAAtB,CAAA;UACD,CAHDL,CAAAA;UAKAA,GAAG,CAACI,EAAJJ,CAAO,OAAPA,EAAgB,YAAM;YACpB,MAAI,CAACQ,iBAAL,EAAA;UACD,CAFDR,CAAAA;QAGD;MACF;IAjD8B,CAAA,EAAA;MAAA,GAAA,EAAA,QAAA;MAAA,KAAA,EA2D/B,SAAA,MAAA,GAAS;QAAA,IAAA,MAAA,GAAA,IAAA;QAAA,IAAA,WAAA,GAC4C,IAAA,CAAK5B,KADjD;UACAiB,UADA,GAAA,WAAA,CACAA,UADA;UACYM,QADZ,GAAA,WAAA,CACYA,QADZ;UACsBD,YADtB,GAAA,WAAA,CACsBA,YADtB;UACoCgB,IADpC,GAAA,WAAA,CACoCA,IADpC;QAGP,IAAMlB,oBAAoB,GAAGH,UAAU,CAACU,WAAXV,IAA0B,IAAA,CAAKjB,KAAL,CAAWoB,oBAAlE;QACA,IAAMmB,QAAQ,GAAA,aAAA,CAAA,aAAA,CAAA,CAAA,CAAA,EACThB,QADS,CAAA,EAAA,CAAA,CAAA,EAAA;UAEZD,YAAY,EAAZA,YAFY;UAGZF,oBAAoB,EAApBA,oBAHY;UAIZoB,qBAAqB,EAAE,IAJX;UAKZC,gBAAgB,EAAhBA,YAAAA,CAAAA;QALY,CAAA,CAAd;QAQA,OAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UAAK,SAAS,EAAC;QAAf,CAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,kBAAD,EAAA,IAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,wBAAD,EAAA,IAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,kBAAD,EAAA,IAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UAAK,SAAS,EAAC;QAAf,CAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,aAAA,CAAA,gBAAD,EAAA;UAAkB,EAAE,EAAE;QAAtB,CAAA,CADF,CADF,EAAA,aAIE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UAAK,SAAS,EAAC;QAAf,CAAA,EACG,IAAI,CAACC,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CADH,EAAA,aAEE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,UAAD,EAAA;UACE,MAAM,EAAC,QADT;UAEE,IAAI,EAAC;QAFP,CAAA,EAIG,GAJH,EAKG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CALH,CAFF,EAQgB,GARhB,EASG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CATH,EAAA,aAUE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,UAAD,EAAA;UACE,MAAM,EAAC,QADT;UAEE,IAAI,EAAC;QAFP,CAAA,EAIG,GAJH,EAKG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CALH,CAVF,CAJF,EAAA,aAsBE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,UAAD,EAAA;UACE,IAAI,EAAC,MADP;UAEE,KAAK,EAAE1B,UAAU,CAAC2B,GAAX3B,IAAkB,EAF3B;UAGE,QAAQ,EAAE,SAAA,QAAA,CAAA,IAAA,EAAA;YAAA,IAAW6B,KAAX,GAAA,IAAA,CAAED,MAAF,CAAWC,KAAX;YAAA,OAAuB,MAAI,CAAC9C,KAAL,CAAWa,aAAX,CAAyB;cAAC+B,GAAG,EAAEE;YAAN,CAAzB,CAAvB;UAAA,CAHZ;UAIE,WAAW,EAAC;QAJd,CAAA,CAtBF,CADF,EAAA,aA+BE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,kBAAD,EAAA,IAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UAAK,SAAS,EAAC;QAAf,CAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,aAAA,CAAA,gBAAD,EAAA;UAAkB,EAAE,EAAE;QAAtB,CAAA,CADF,CADF,EAAA,aAIE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UAAK,SAAS,EAAC;QAAf,CAAA,EACG,IAAI,CAACJ,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CADH,EAAA,aAEE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,UAAD,EAAA;UAAY,MAAM,EAAC,QAAnB;UAA4B,IAAI,EAAC;QAAjC,CAAA,EACG,GADH,EAAA,QAAA,CAFF,EAKgB,GALhB,EAMG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CANH,EAAA,aAOE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,UAAD,EAAA;UACE,MAAM,EAAC,QADT;UAEE,IAAI,EAAC;QAFP,CAAA,EAIG,GAJH,EAKG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CALH,CAPF,EAagB,GAbhB,EAcG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CAdH,CAJF,EAAA,aAqBE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UAAK,SAAS,EAAC;QAAf,CAAA,EACG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CADH,EAAA,aAEE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,UAAD,EAAA;UACE,MAAM,EAAC,QADT;UAEE,IAAI,EAAC;QAFP,CAAA,EAIG,GAJH,EAKG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CALH,CAFF,EAQgB,GARhB,EASG,IAAI,CAACD,aAAL,CAAmB;UAACC,EAAE,EAAE;QAAL,CAAnB,CATH,CArBF,EAAA,aAgCE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,UAAD,EAAA;UACE,IAAI,EAAC,MADP;UAEE,KAAK,EAAE1B,UAAU,CAACU,WAAXV,IAA0B,EAFnC;UAGE,QAAQ,EAAE,SAAA,QAAA,CAAA,KAAA,EAAA;YAAA,IAAW6B,KAAX,GAAA,KAAA,CAAED,MAAF,CAAWC,KAAX;YAAA,OAAuB,MAAI,CAAC9C,KAAL,CAAWa,aAAX,CAAyB;cAACc,WAAW,EAAEmB;YAAd,CAAzB,CAAvB;UAAA,CAHZ;UAIE,WAAW,EAAE,IAAI,CAACJ,aAAL,CAAmB;YAACC,EAAE,EAAE;UAAL,CAAnB;QAJf,CAAA,CAhCF,CA/BF,EAAA,aAuEE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,kBAAD,EAAA,IAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UAAK,SAAS,EAAC;QAAf,CAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,aAAA,CAAA,gBAAD,EAAA;UAAkB,EAAE,EAAE;QAAtB,CAAA,CADF,CADF,EAAA,aAIE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,UAAD,EAAA;UACE,IAAI,EAAC,MADP;UAEE,KAAK,EAAE1B,UAAU,CAAC8B,KAAX9B,IAAoB,EAF7B;UAGE,QAAQ,EAAE,SAAA,QAAA,CAAA,KAAA,EAAA;YAAA,IAAW6B,KAAX,GAAA,KAAA,CAAED,MAAF,CAAWC,KAAX;YAAA,OAAuB,MAAI,CAAC9C,KAAL,CAAWa,aAAX,CAAyB;cAACkC,KAAK,EAAED;YAAR,CAAzB,CAAvB;UAAA;QAHZ,CAAA,CAJF,CAvEF,CADF,EAAA,aAmFE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,UAAD,EAAA,IAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UACE,SAAS,EAAE,CAAA,CAAA,EAAA,WAAA,CAAA,SAAA,CAAA,EAAW,eAAX,EAA4B;YACrCT,KAAK,EAAEpB,UAAU,CAACoB;UADmB,CAA5B;QADb,CAAA,EAKGpB,UAAU,CAACoB,KAAXpB,GACGtB,QAAQ,CAACC,UADZqB,GAEIA,UAAU,CAACgB,KAAXhB,IAAoBA,UAAU,CAACgB,KAAXhB,CAAiB+B,IAAtC,IAA+C,EAPrD,CADF,EAAA,aAUE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAD,EAAA;UAAoB,SAAS,EAAC;QAA9B,CAAA,EACG,CAAC/B,UAAU,CAACgC,OAAZ,GAAA,aACC,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAA,KAAA,EAAA;UAAK,SAAS,EAAC;QAAf,CAAA,CADD,GAAA,aAGC,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,kBAAA,CAAA,kBAAD,EAAA,IAAA,EAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,WAAA,CAAA,SAAA,CAAD,EAAA,CAAA,CAAA,EAAA,SAAA,CAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EACMV,QADN,EAAA;UAEE,GAAG,EAAE,SAAA,GAAA,CAAA,EAAE,EAAI;YACT,MAAI,CAACV,MAAL,GAAcqB,EAAd;UACD,CAJH;UAKE,GAAG,EAAE,IAAA,CAAKxB,KAAL,CAAWF,WALlB;UAME,KAAK,EAAE9B,IANT;UAOE,MAAM,EAAED,IAPV;UAQE,QAAQ,EAAEwB,UAAU,CAAC2B;QARvB,CAAA,CAAA,CADF,CAJJ,CAVF,CAnFF,CADF,CADF;MAqHD;IA5L8B,CAAA,CAAA,EAAA,CAAA;MAAA,GAAA,EAAA,0BAAA;MAAA,KAAA,EAgB/B,SAAA,wBAAA,CAAgC5C,KAAhC,EAAuC0B,KAAvC,EAA8C;QAC5C,IACE1B,KAAK,CAACiB,UAANjB,IACAA,KAAK,CAACiB,UAANjB,CAAiB2B,WADjB3B,IAEAA,KAAK,CAACiB,UAANjB,CAAiB2B,WAAjB3B,KAAiC0B,KAAK,CAACD,aAHzC,EAIE;UACA;UACA;UACA;UAEA,OAAO;YACLD,WAAW,EAAEE,KAAK,CAACF,WAANE,GAAoB,CAD5B;YAELD,aAAa,EAAEzB,KAAK,CAACiB,UAANjB,CAAiB2B;UAF3B,CAAP;QAID;QAED,OAAO,IAAP;MACD;IAjC8B,CAAA,CAAA,CAAA;IAAA,OAAA,gBAAA;EAAA,CAAA,CACFf,MAAAA,CAAAA,SADE,CAAA;EAAA,CAAA,CAAA,EAAA,gBAAA,CAAA,SAAA,CAAA,EAC3BD,gBAD2B,EAAA,WAAA,EAEZ;IACjBE,aAAa,EAAEC,UAAAA,CAAAA,SAAAA,CAAAA,CAAUC,IAAVD,CAAeE,UADb;IAEjBC,UAAU,EAAEH,UAAAA,CAAAA,SAAAA,CAAAA,CAAUI,MAAVJ,CAAiBE,UAFZ;IAGjBG,kBAAkB,EAAEL,UAAAA,CAAAA,SAAAA,CAAAA,CAAUC,IAAVD,CAAeE,UAHlB;IAIjBI,oBAAoB,EAAEN,UAAAA,CAAAA,SAAAA,CAAAA,CAAUO,MAAVP,CAAiBE,UAJtB;IAKjBM,YAAY,EAAER,UAAAA,CAAAA,SAAAA,CAAAA,CAAUO,MAAVP,CAAiBE,UALd;IAMjBO,QAAQ,EAAET,UAAAA,CAAAA,SAAAA,CAAAA,CAAUI,MAAVJ,CAAiBE;EANV,CAFY,CAAA;EA+LjC,OAAO,CAAA,CAAA,EAAA,UAAA,CAAA,UAAA,EAAW,CAAA,CAAA,EAAA,sBAAA,CAAA,QAAA,EAASL,gBAAT,CAAX,CAAP;AACD;eAEcD,uB","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component} from 'react';\nimport {polyfill} from 'react-lifecycles-compat';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styled from 'styled-components';\nimport MapboxGLMap from 'react-map-gl';\nimport {\n  StyledModalContent,\n  InputLight,\n  StyledMapContainer,\n  StyledModalVerticalPanel,\n  StyledModalSection\n} from 'components/common/styled-components';\nimport {media} from 'styles/media-breakpoints';\n\n// Utils\nimport {transformRequest} from 'utils/map-style-utils/mapbox-utils';\nimport {injectIntl} from 'react-intl';\nimport {FormattedMessage} from 'localization';\n\nconst MapH = 190;\nconst MapW = 264;\nconst ErrorMsg = {\n  styleError:\n    'Failed to load map style, make sure it is published. For private style, paste in your access token.'\n};\n\nconst PreviewMap = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-left: 116px;\n  flex-shrink: 0;\n\n  .preview-title {\n    font-weight: 500;\n    font-size: 10px;\n    padding: 8px 0px;\n  }\n\n  .preview-title.error {\n    color: ${props => props.theme.errorColor};\n  }\n\n  ${media.portable`\n    margin-left: 32px;\n  `};\n\n  ${media.palm`\n    margin-left: unset;\n    .preview-title {\n      margin-top: 0px;\n    }\n  `};\n`;\n\nconst StyledPreviewImage = styled.div`\n  background: ${props => props.theme.modalImagePlaceHolder};\n  border-radius: 4px;\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.18);\n  width: ${MapW}px;\n  height: ${MapH}px;\n  position: relative;\n\n  .preview-image-placeholder {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  .preview-image-spinner {\n    position: absolute;\n    left: calc(50% - 25px);\n    top: calc(50% - 25px);\n  }\n`;\n\nconst InlineLink = styled.a`\n  font-weight: 500;\n\n  :hover {\n    cursor: pointer;\n  }\n`;\n\nfunction AddMapStyleModalFactory() {\n  class AddMapStyleModal extends Component {\n    static propTypes = {\n      inputMapStyle: PropTypes.func.isRequired,\n      inputStyle: PropTypes.object.isRequired,\n      loadCustomMapStyle: PropTypes.func.isRequired,\n      mapboxApiAccessToken: PropTypes.string.isRequired,\n      mapboxApiUrl: PropTypes.string.isRequired,\n      mapState: PropTypes.object.isRequired\n    };\n\n    state = {\n      reRenderKey: 0,\n      previousToken: null\n    };\n\n    static getDerivedStateFromProps(props, state) {\n      if (\n        props.inputStyle &&\n        props.inputStyle.accessToken &&\n        props.inputStyle.accessToken !== state.previousToken\n      ) {\n        // toke has changed\n        // ReactMapGl doesn't re-create map when token has changed\n        // here we force the map to update\n\n        return {\n          reRenderKey: state.reRenderKey + 1,\n          previousToken: props.inputStyle.accessToken\n        };\n      }\n\n      return null;\n    }\n\n    componentDidUpdate() {\n      const map = this.mapRef && this.mapRef.getMap();\n      if (map && this._map !== map) {\n        this._map = map;\n\n        map.on('style.load', () => {\n          const style = map.getStyle();\n          this.loadMapStyleJson(style);\n        });\n\n        map.on('error', () => {\n          this.loadMapStyleError();\n        });\n      }\n    }\n\n    loadMapStyleJson = style => {\n      this.props.loadCustomMapStyle({style, error: false});\n    };\n\n    loadMapStyleError = () => {\n      this.props.loadCustomMapStyle({error: true});\n    };\n\n    render() {\n      const {inputStyle, mapState, mapboxApiUrl, intl} = this.props;\n\n      const mapboxApiAccessToken = inputStyle.accessToken || this.props.mapboxApiAccessToken;\n      const mapProps = {\n        ...mapState,\n        mapboxApiUrl,\n        mapboxApiAccessToken,\n        preserveDrawingBuffer: true,\n        transformRequest\n      };\n\n      return (\n        <div className=\"add-map-style-modal\">\n          <StyledModalContent>\n            <StyledModalVerticalPanel>\n              <StyledModalSection>\n                <div className=\"modal-section-title\">\n                  <FormattedMessage id={'modal.addStyle.pasteTitle'} />\n                </div>\n                <div className=\"modal-section-subtitle\">\n                  {intl.formatMessage({id: 'modal.addStyle.pasteSubtitle0'})}\n                  <InlineLink\n                    target=\"_blank\"\n                    href=\"https://www.mapbox.com/help/studio-manual-publish/#style-url\"\n                  >\n                    {' '}\n                    {intl.formatMessage({id: 'modal.addStyle.pasteSubtitle2'})}\n                  </InlineLink>{' '}\n                  {intl.formatMessage({id: 'modal.addStyle.pasteSubtitle3'})}\n                  <InlineLink\n                    target=\"_blank\"\n                    href=\"https://docs.mapbox.com/mapbox-gl-js/style-spec\"\n                  >\n                    {' '}\n                    {intl.formatMessage({id: 'modal.addStyle.pasteSubtitle4'})}\n                  </InlineLink>\n                </div>\n                <InputLight\n                  type=\"text\"\n                  value={inputStyle.url || ''}\n                  onChange={({target: {value}}) => this.props.inputMapStyle({url: value})}\n                  placeholder=\"e.g. mapbox://styles/username/style, http://my.stles.com/xxx/style.json \"\n                />\n              </StyledModalSection>\n\n              <StyledModalSection>\n                <div className=\"modal-section-title\">\n                  <FormattedMessage id={'modal.addStyle.publishTitle'} />\n                </div>\n                <div className=\"modal-section-subtitle\">\n                  {intl.formatMessage({id: 'modal.addStyle.publishSubtitle1'})}\n                  <InlineLink target=\"_blank\" href=\"https://www.mapbox.com/studio/styles/\">\n                    {' '}\n                    mapbox\n                  </InlineLink>{' '}\n                  {intl.formatMessage({id: 'modal.addStyle.publishSubtitle2'})}\n                  <InlineLink\n                    target=\"_blank\"\n                    href=\"https://www.mapbox.com/help/studio-manual-publish/\"\n                  >\n                    {' '}\n                    {intl.formatMessage({id: 'modal.addStyle.publishSubtitle3'})}\n                  </InlineLink>{' '}\n                  {intl.formatMessage({id: 'modal.addStyle.publishSubtitle4'})}\n                </div>\n\n                <div className=\"modal-section-subtitle\">\n                  {intl.formatMessage({id: 'modal.addStyle.publishSubtitle5'})}\n                  <InlineLink\n                    target=\"_blank\"\n                    href=\"https://www.mapbox.com/help/how-access-tokens-work/\"\n                  >\n                    {' '}\n                    {intl.formatMessage({id: 'modal.addStyle.publishSubtitle6'})}\n                  </InlineLink>{' '}\n                  {intl.formatMessage({id: 'modal.addStyle.publishSubtitle7'})}\n                </div>\n                <InputLight\n                  type=\"text\"\n                  value={inputStyle.accessToken || ''}\n                  onChange={({target: {value}}) => this.props.inputMapStyle({accessToken: value})}\n                  placeholder={intl.formatMessage({id: 'modal.addStyle.exampleToken'})}\n                />\n              </StyledModalSection>\n\n              <StyledModalSection>\n                <div className=\"modal-section-title\">\n                  <FormattedMessage id={'modal.addStyle.namingTitle'} />\n                </div>\n                <InputLight\n                  type=\"text\"\n                  value={inputStyle.label || ''}\n                  onChange={({target: {value}}) => this.props.inputMapStyle({label: value})}\n                />\n              </StyledModalSection>\n            </StyledModalVerticalPanel>\n            <PreviewMap>\n              <div\n                className={classnames('preview-title', {\n                  error: inputStyle.error\n                })}\n              >\n                {inputStyle.error\n                  ? ErrorMsg.styleError\n                  : (inputStyle.style && inputStyle.style.name) || ''}\n              </div>\n              <StyledPreviewImage className=\"preview-image\">\n                {!inputStyle.isValid ? (\n                  <div className=\"preview-image-spinner\" />\n                ) : (\n                  <StyledMapContainer>\n                    <MapboxGLMap\n                      {...mapProps}\n                      ref={el => {\n                        this.mapRef = el;\n                      }}\n                      key={this.state.reRenderKey}\n                      width={MapW}\n                      height={MapH}\n                      mapStyle={inputStyle.url}\n                    />\n                  </StyledMapContainer>\n                )}\n              </StyledPreviewImage>\n            </PreviewMap>\n          </StyledModalContent>\n        </div>\n      );\n    }\n  }\n\n  return injectIntl(polyfill(AddMapStyleModal));\n}\n\nexport default AddMapStyleModalFactory;\n"]},"metadata":{},"sourceType":"script"}