{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = ShareMapUrlModalFactory;\nexports.SharingUrl = exports.StyleSharingUrl = exports.StyledInputLabel = void 0;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\nvar _reactCopyToClipboard = require(\"react-copy-to-clipboard\");\nvar _base = require(\"../../styles/base\");\nvar _imageModalContainer = _interopRequireDefault(require(\"./image-modal-container\"));\nvar _providerModalContainer = _interopRequireDefault(require(\"./provider-modal-container\"));\nvar _styledComponents2 = require(\"../common/styled-components\");\nvar _cloudTile = _interopRequireDefault(require(\"./cloud-tile\"));\nvar _statusPanel = _interopRequireDefault(require(\"./status-panel\"));\nvar _localization = require(\"../../localization\");\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\nvar StyledInputLabel = _styledComponents[\"default\"].label(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  font-size: 12px;\\n  color: \", \";\\n  letter-spacing: 0.2px;\\n\"])), function (props) {\n  return props.theme.textColorLT;\n});\nexports.StyledInputLabel = StyledInputLabel;\nvar StyleSharingUrl = _styledComponents[\"default\"].div.attrs({\n  className: 'sharing-url'\n})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  width: 100%;\\n  display: flex;\\n  margin-bottom: 14px;\\n  flex-direction: column;\\n\\n  input {\\n    border-right: 0;\\n  }\\n\\n  .button {\\n    border-top-left-radius: 0;\\n    border-bottom-left-radius: 0;\\n  }\\n\"])));\nexports.StyleSharingUrl = StyleSharingUrl;\nvar SharingUrl = function SharingUrl(_ref) {\n  var url = _ref.url,\n    _ref$message = _ref.message,\n    message = _ref$message === void 0 ? '' : _ref$message;\n  var _useState = (0, _react.useState)(false),\n    _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n    copied = _useState2[0],\n    setCopy = _useState2[1];\n  return /*#__PURE__*/_react[\"default\"].createElement(StyleSharingUrl, null, /*#__PURE__*/_react[\"default\"].createElement(StyledInputLabel, null, message), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      display: 'flex'\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.InputLight, {\n    type: \"text\",\n    value: url,\n    readOnly: true,\n    selected: true\n  }), /*#__PURE__*/_react[\"default\"].createElement(_reactCopyToClipboard.CopyToClipboard, {\n    text: url,\n    onCopy: function onCopy() {\n      return setCopy(true);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.Button, {\n    width: \"80px\"\n  }, copied ? 'Copied!' : 'Copy'))));\n};\nexports.SharingUrl = SharingUrl;\nvar nop = function nop() {};\nvar StyledShareMapModal = (0, _styledComponents[\"default\"])(_styledComponents2.StyledModalContent)(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  padding: 24px 72px 40px 72px;\\n  margin: 0 -72px -40px -72px;\\n\"])));\nvar StyledInnerDiv = _styledComponents[\"default\"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  min-height: 500px;\\n\"])));\nfunction ShareMapUrlModalFactory() {\n  var ShareMapUrlModal = function ShareMapUrlModal(_ref2) {\n    var isProviderLoading = _ref2.isProviderLoading,\n      isReady = _ref2.isReady,\n      onExport = _ref2.onExport,\n      cloudProviders = _ref2.cloudProviders,\n      currentProvider = _ref2.currentProvider,\n      providerError = _ref2.providerError,\n      successInfo = _ref2.successInfo,\n      onSetCloudProvider = _ref2.onSetCloudProvider,\n      onUpdateImageSetting = _ref2.onUpdateImageSetting,\n      cleanupExportImage = _ref2.cleanupExportImage;\n    var shareUrl = successInfo.shareUrl,\n      folderLink = successInfo.folderLink;\n    var provider = currentProvider ? cloudProviders.find(function (p) {\n      return p.name === currentProvider;\n    }) : null;\n    return /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.ThemeProvider, {\n      theme: _base.themeLT\n    }, /*#__PURE__*/_react[\"default\"].createElement(_providerModalContainer[\"default\"], {\n      onSetCloudProvider: onSetCloudProvider,\n      cloudProviders: cloudProviders,\n      currentProvider: currentProvider\n    }, /*#__PURE__*/_react[\"default\"].createElement(_imageModalContainer[\"default\"], {\n      currentProvider: currentProvider,\n      cloudProviders: cloudProviders,\n      onUpdateImageSetting: onUpdateImageSetting,\n      cleanupExportImage: cleanupExportImage\n    }, /*#__PURE__*/_react[\"default\"].createElement(StyledShareMapModal, {\n      className: \"export-cloud-modal\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(StyledInnerDiv, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledExportSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"description\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"title\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.shareMap.shareUriTitle'\n    })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"subtitle\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.shareMap.shareUriSubtitle'\n    }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"selection\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"title warning\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.shareMap.shareDisclaimer'\n    })))), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledExportSection, {\n      disabled: isProviderLoading\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"description\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"title\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.shareMap.cloudTitle'\n    })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"subtitle\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.shareMap.cloudSubtitle'\n    }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"selection\"\n    }, cloudProviders.map(function (cloudProvider) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_cloudTile[\"default\"], {\n        key: cloudProvider.name,\n        onSelect: function onSelect() {\n          return onExport(cloudProvider);\n        },\n        onSetCloudProvider: onSetCloudProvider,\n        cloudProvider: cloudProvider,\n        actionName: \"Upload\",\n        isSelected: cloudProvider.name === currentProvider,\n        isConnected: Boolean(cloudProvider.getAccessToken()),\n        isReady: isReady\n      });\n    }))), isProviderLoading || providerError ? /*#__PURE__*/_react[\"default\"].createElement(_statusPanel[\"default\"], {\n      isLoading: isProviderLoading,\n      error: providerError,\n      providerIcon: provider && provider.icon\n    }) : null, shareUrl && /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.StyledExportSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"description\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"title\"\n    }, \"Share Url\")), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"selection\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(SharingUrl, {\n      key: 0,\n      url: shareUrl\n    }), provider && folderLink && /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n      key: 1,\n      href: folderLink,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      style: {\n        textDecoration: 'underline'\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'modal.shareMap.gotoPage',\n      values: {\n        currentProvider: currentProvider\n      }\n    })))))))));\n  };\n  ShareMapUrlModal.defaultProps = {\n    isProviderLoading: false,\n    onExport: nop,\n    cloudProviders: [],\n    currentProvider: null,\n    providerError: null,\n    successInfo: {},\n    onSetCloudProvider: nop,\n    onUpdateImageSetting: nop\n  };\n  return ShareMapUrlModal;\n}","map":{"version":3,"sources":["../../../src/components/modals/share-map-modal.js"],"names":["StyledInputLabel","styled","label","props","theme","textColorLT","StyleSharingUrl","div","attrs","className","SharingUrl","url","message","copied","setCopy","display","nop","StyledShareMapModal","StyledModalContent","StyledInnerDiv","ShareMapUrlModalFactory","ShareMapUrlModal","isProviderLoading","isReady","onExport","cloudProviders","currentProvider","providerError","successInfo","onSetCloudProvider","onUpdateImageSetting","cleanupExportImage","shareUrl","folderLink","provider","find","p","name","themeLT","map","cloudProvider","Boolean","getAccessToken","icon","textDecoration","defaultProps"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useState} from 'react';\nimport styled, {ThemeProvider} from 'styled-components';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\nimport {themeLT} from 'styles/base';\nimport ImageModalContainer from './image-modal-container';\nimport ProviderModalContainer from './provider-modal-container';\n\nimport {\n  StyledModalContent,\n  StyledExportSection,\n  InputLight,\n  Button\n} from 'components/common/styled-components';\nimport CloudTile from './cloud-tile';\nimport StatusPanel from './status-panel';\nimport {FormattedMessage} from 'localization';\n\nexport const StyledInputLabel = styled.label`\n  font-size: 12px;\n  color: ${props => props.theme.textColorLT};\n  letter-spacing: 0.2px;\n`;\n\nexport const StyleSharingUrl = styled.div.attrs({\n  className: 'sharing-url'\n})`\n  width: 100%;\n  display: flex;\n  margin-bottom: 14px;\n  flex-direction: column;\n\n  input {\n    border-right: 0;\n  }\n\n  .button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n`;\n\nexport const SharingUrl = ({url, message = ''}) => {\n  const [copied, setCopy] = useState(false);\n  return (\n    <StyleSharingUrl>\n      <StyledInputLabel>{message}</StyledInputLabel>\n      <div style={{display: 'flex'}}>\n        <InputLight type=\"text\" value={url} readOnly selected />\n        <CopyToClipboard text={url} onCopy={() => setCopy(true)}>\n          <Button width=\"80px\">{copied ? 'Copied!' : 'Copy'}</Button>\n        </CopyToClipboard>\n      </div>\n    </StyleSharingUrl>\n  );\n};\nconst nop = () => {};\n\nconst StyledShareMapModal = styled(StyledModalContent)`\n  padding: 24px 72px 40px 72px;\n  margin: 0 -72px -40px -72px;\n`;\n\nconst StyledInnerDiv = styled.div`\n  min-height: 500px;\n`;\n\nexport default function ShareMapUrlModalFactory() {\n  const ShareMapUrlModal = ({\n    isProviderLoading,\n    isReady,\n    onExport,\n    cloudProviders,\n    currentProvider,\n    providerError,\n    successInfo,\n    onSetCloudProvider,\n    onUpdateImageSetting,\n    cleanupExportImage\n  }) => {\n    const {shareUrl, folderLink} = successInfo;\n    const provider = currentProvider ? cloudProviders.find(p => p.name === currentProvider) : null;\n\n    return (\n      <ThemeProvider theme={themeLT}>\n        <ProviderModalContainer\n          onSetCloudProvider={onSetCloudProvider}\n          cloudProviders={cloudProviders}\n          currentProvider={currentProvider}\n        >\n          <ImageModalContainer\n            currentProvider={currentProvider}\n            cloudProviders={cloudProviders}\n            onUpdateImageSetting={onUpdateImageSetting}\n            cleanupExportImage={cleanupExportImage}\n          >\n            <StyledShareMapModal className=\"export-cloud-modal\">\n              <StyledInnerDiv>\n                <StyledExportSection>\n                  <div className=\"description\">\n                    <div className=\"title\">\n                      <FormattedMessage id={'modal.shareMap.shareUriTitle'} />\n                    </div>\n                    <div className=\"subtitle\">\n                      <FormattedMessage id={'modal.shareMap.shareUriSubtitle'} />\n                    </div>\n                  </div>\n                  <div className=\"selection\">\n                    <div className=\"title warning\">\n                      <FormattedMessage id={'modal.shareMap.shareDisclaimer'} />\n                    </div>\n                  </div>\n                </StyledExportSection>\n                <StyledExportSection disabled={isProviderLoading}>\n                  <div className=\"description\">\n                    <div className=\"title\">\n                      <FormattedMessage id={'modal.shareMap.cloudTitle'} />\n                    </div>\n                    <div className=\"subtitle\">\n                      <FormattedMessage id={'modal.shareMap.cloudSubtitle'} />\n                    </div>\n                  </div>\n                  <div className=\"selection\">\n                    {cloudProviders.map(cloudProvider => (\n                      <CloudTile\n                        key={cloudProvider.name}\n                        onSelect={() => onExport(cloudProvider)}\n                        onSetCloudProvider={onSetCloudProvider}\n                        cloudProvider={cloudProvider}\n                        actionName=\"Upload\"\n                        isSelected={cloudProvider.name === currentProvider}\n                        isConnected={Boolean(cloudProvider.getAccessToken())}\n                        isReady={isReady}\n                      />\n                    ))}\n                  </div>\n                </StyledExportSection>\n                {isProviderLoading || providerError ? (\n                  <StatusPanel\n                    isLoading={isProviderLoading}\n                    error={providerError}\n                    providerIcon={provider && provider.icon}\n                  />\n                ) : null}\n                {shareUrl && (\n                  <StyledExportSection>\n                    <div className=\"description\">\n                      <div className=\"title\">Share Url</div>\n                    </div>\n                    <div className=\"selection\">\n                      <SharingUrl key={0} url={shareUrl} />\n                      {provider && folderLink && (\n                        <a\n                          key={1}\n                          href={folderLink}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          style={{textDecoration: 'underline'}}\n                        >\n                          <FormattedMessage\n                            id={'modal.shareMap.gotoPage'}\n                            values={{currentProvider}}\n                          />\n                        </a>\n                      )}\n                    </div>\n                  </StyledExportSection>\n                )}\n              </StyledInnerDiv>\n            </StyledShareMapModal>\n          </ImageModalContainer>\n        </ProviderModalContainer>\n      </ThemeProvider>\n    );\n  };\n\n  ShareMapUrlModal.defaultProps = {\n    isProviderLoading: false,\n    onExport: nop,\n    cloudProviders: [],\n    currentProvider: null,\n    providerError: null,\n    successInfo: {},\n    onSetCloudProvider: nop,\n    onUpdateImageSetting: nop\n  };\n\n  return ShareMapUrlModal;\n}\n"]},"metadata":{},"sourceType":"script"}