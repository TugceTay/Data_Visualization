{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.ItemSelectorListen = exports.StyledDropdownSelect = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.uniqby\"));\nvar _reactOnclickoutside = _interopRequireDefault(require(\"react-onclickoutside\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _accessor = _interopRequireDefault(require(\"./accessor\"));\nvar _chickletedInput = _interopRequireDefault(require(\"./chickleted-input\"));\nvar _typeahead = _interopRequireDefault(require(\"./typeahead\"));\nvar _icons = require(\"../icons\");\nvar _dropdownList = _interopRequireWildcard(require(\"./dropdown-list\"));\nvar _utils = require(\"../../../utils/utils\");\nvar _reactIntl = require(\"react-intl\");\nvar _localization = require(\"../../../localization\");\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar StyledDropdownSelect = _styledComponents[\"default\"].div.attrs({\n  className: 'item-selector__dropdown'\n})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  \", \";\\n\\n  height: \", \";\\n\\n  .list__item__anchor {\\n    \", \";\\n  }\\n\"])), function (props) {\n  return props.inputTheme === 'secondary' ? props.theme.secondaryInput : props.inputTheme === 'light' ? props.theme.inputLT : props.theme.input;\n}, function (props) {\n  return props.size === 'small' ? props.theme.inputBoxHeightSmall : props.theme.inputBoxHeight;\n}, function (props) {\n  return props.theme.dropdownListAnchor;\n});\nexports.StyledDropdownSelect = StyledDropdownSelect;\nvar DropdownSelectValue = _styledComponents[\"default\"].span(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  color: \", \";\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n\\n  .list__item {\\n    \", \";\\n  }\\n\\n  .list__item__anchor {\\n    \", \";\\n  }\\n\"])), function (props) {\n  return props.hasPlaceholder && props.inputTheme === 'light' ? props.theme.selectColorPlaceHolderLT : props.hasPlaceholder ? props.theme.selectColorPlaceHolder : props.inputTheme === 'light' ? props.theme.selectColorLT : props.theme.selectColor;\n}, function (props) {\n  return props.inputTheme === 'light' ? props.theme.dropdownListItemLT : props.theme.dropdownListItem;\n}, function (props) {\n  return props.inputTheme === 'light' ? props.theme.dropdownListAnchorLT : props.theme.dropdownListAnchor;\n});\nvar DropdownSelectActionRight = _styledComponents[\"default\"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  margin-right: 6px;\\n  display: flex;\\n  color: \", \";\\n\\n  :hover {\\n    color: \", \";\\n  }\\n\"])), function (props) {\n  return props.theme.subtextColor;\n}, function (props) {\n  return props.theme.textColor;\n});\nvar DropdownWrapper = _styledComponents[\"default\"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  border: 0;\\n  width: 100%;\\n  left: 0;\\n  z-index: \", \";\\n  position: absolute;\\n  bottom: \", \";\\n  margin-top: \", \";\\n  margin-bottom: \", \";\\n\"])), function (props) {\n  return props.theme.dropdownWrapperZ;\n}, function (props) {\n  return props.placement === 'top' ? props.theme.inputBoxHeight : 'auto';\n}, function (props) {\n  return props.placement === 'bottom' ? \"\".concat(props.theme.dropdownWapperMargin, \"px\") : 'auto';\n}, function (props) {\n  return props.placement === 'top' ? \"\".concat(props.theme.dropdownWapperMargin, \"px\") : 'auto';\n});\nvar ItemSelector = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(ItemSelector, _Component);\n  var _super = _createSuper(ItemSelector);\n  function ItemSelector() {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, ItemSelector);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      showTypeahead: false\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleClickOutside\", function () {\n      _this._hideTypeahead();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onBlur\", function () {\n      // note: chickleted input is not a real form element so we call onBlur()\n      // when we feel the events are appropriate\n      if (_this.props.onBlur) {\n        _this.props.onBlur();\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_removeItem\", function (item, e) {\n      // only used when multiSelect = true\n      e.preventDefault();\n      e.stopPropagation();\n      var selectedItems = _this.props.selectedItems;\n      var index = selectedItems.findIndex(function (t) {\n        return t === item;\n      });\n      if (index < 0) {\n        return;\n      }\n      var items = [].concat((0, _toConsumableArray2[\"default\"])(selectedItems.slice(0, index)), (0, _toConsumableArray2[\"default\"])(selectedItems.slice(index + 1, selectedItems.length)));\n      _this.props.onChange(items);\n      if (_this.props.closeOnSelect) {\n        _this.setState({\n          showTypeahead: false\n        });\n        _this._onBlur();\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_selectItem\", function (item) {\n      var getValue = _accessor[\"default\"].generateOptionToStringFor(_this.props.getOptionValue || _this.props.displayOption);\n      var previousSelected = (0, _utils.toArray)(_this.props.selectedItems);\n      if (_this.props.multiSelect) {\n        var items = (0, _lodash[\"default\"])(previousSelected.concat((0, _utils.toArray)(item)), getValue);\n        _this.props.onChange(items);\n      } else {\n        _this.props.onChange(getValue(item));\n      }\n      if (_this.props.closeOnSelect) {\n        _this.setState({\n          showTypeahead: false\n        });\n        _this._onBlur();\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onErase\", function (e) {\n      e.stopPropagation();\n      _this.props.onChange(null);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_showTypeahead\", function (e) {\n      e.stopPropagation();\n      if (!_this.props.disabled) {\n        _this.setState({\n          showTypeahead: true\n        });\n      }\n    });\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(ItemSelector, [{\n    key: \"_hideTypeahead\",\n    value: function _hideTypeahead() {\n      this.setState({\n        showTypeahead: false\n      });\n      this._onBlur();\n    }\n  }, {\n    key: \"_renderDropdown\",\n    value: function _renderDropdown(intl) {\n      return /*#__PURE__*/_react[\"default\"].createElement(DropdownWrapper, {\n        placement: this.props.placement\n      }, /*#__PURE__*/_react[\"default\"].createElement(_typeahead[\"default\"], {\n        customClasses: {\n          results: 'list-selector',\n          input: 'typeahead__input',\n          listItem: 'list__item',\n          listAnchor: 'list__item__anchor'\n        },\n        options: this.props.options,\n        filterOption: this.props.filterOption,\n        fixedOptions: this.props.fixedOptions,\n        placeholder: this.props.typeaheadPlaceholder || intl ? intl.formatMessage({\n          id: 'placeholder.search'\n        }) : 'Search',\n        onOptionSelected: this._selectItem,\n        customListComponent: this.props.DropDownRenderComponent,\n        customListHeaderComponent: this.props.DropdownHeaderComponent,\n        customListItemComponent: this.props.DropDownLineItemRenderComponent,\n        displayOption: _accessor[\"default\"].generateOptionToStringFor(this.props.displayOption),\n        searchable: this.props.searchable,\n        showOptionsWhenEmpty: true,\n        selectedItems: (0, _utils.toArray)(this.props.selectedItems),\n        light: this.props.inputTheme === 'light'\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var selected = (0, _utils.toArray)(this.props.selectedItems);\n      var hasValue = selected.length;\n      var displayOption = _accessor[\"default\"].generateOptionToStringFor(this.props.displayOption);\n      var dropdownSelectProps = {\n        className: (0, _classnames[\"default\"])({\n          active: this.state.showTypeahead\n        }),\n        displayOption: displayOption,\n        disabled: this.props.disabled,\n        onClick: this._showTypeahead,\n        error: this.props.isError,\n        inputTheme: this.props.inputTheme,\n        size: this.props.size\n      };\n      var intl = this.props.intl;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: \"item-selector\"\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          position: 'relative'\n        }\n      }, this.props.multiSelect ? /*#__PURE__*/_react[\"default\"].createElement(_chickletedInput[\"default\"], (0, _extends2[\"default\"])({}, dropdownSelectProps, {\n        selectedItems: (0, _utils.toArray)(this.props.selectedItems),\n        placeholder: this.props.placeholder,\n        removeItem: this._removeItem,\n        CustomChickletComponent: this.props.CustomChickletComponent,\n        inputTheme: this.props.inputTheme\n      })) : /*#__PURE__*/_react[\"default\"].createElement(StyledDropdownSelect, dropdownSelectProps, /*#__PURE__*/_react[\"default\"].createElement(DropdownSelectValue, {\n        hasPlaceholder: !hasValue,\n        inputTheme: this.props.inputTheme,\n        className: \"item-selector__dropdown__value\"\n      }, hasValue ? /*#__PURE__*/_react[\"default\"].createElement(this.props.DropDownLineItemRenderComponent, {\n        displayOption: displayOption,\n        value: selected[0],\n        light: this.props.inputTheme === 'light'\n      }) : /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n        id: this.props.placeholder || 'placeholder.selectValue'\n      })), this.props.erasable && hasValue ? /*#__PURE__*/_react[\"default\"].createElement(DropdownSelectActionRight, null, /*#__PURE__*/_react[\"default\"].createElement(_icons.Delete, {\n        height: \"12px\",\n        onClick: this._onErase\n      })) : this.props.showArrow ? /*#__PURE__*/_react[\"default\"].createElement(DropdownSelectActionRight, null, /*#__PURE__*/_react[\"default\"].createElement(_icons.ArrowDown, {\n        height: \"14px\",\n        onClick: this._showTypeahead\n      })) : null), this.state.showTypeahead && this._renderDropdown(intl)));\n    }\n  }]);\n  return ItemSelector;\n}(_react.Component);\n(0, _defineProperty2[\"default\"])(ItemSelector, \"propTypes\", {\n  // required properties\n  selectedItems: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].array, _propTypes[\"default\"].string, _propTypes[\"default\"].number, _propTypes[\"default\"].bool, _propTypes[\"default\"].object]),\n  onChange: _propTypes[\"default\"].func.isRequired,\n  options: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any).isRequired,\n  // optional properties\n  fixedOptions: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any),\n  erasable: _propTypes[\"default\"].bool,\n  showArrow: _propTypes[\"default\"].bool,\n  displayOption: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func]),\n  getOptionValue: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func]),\n  filterOption: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func]),\n  placement: _propTypes[\"default\"].string,\n  disabled: _propTypes[\"default\"].bool,\n  isError: _propTypes[\"default\"].bool,\n  multiSelect: _propTypes[\"default\"].bool,\n  inputTheme: _propTypes[\"default\"].string,\n  onBlur: _propTypes[\"default\"].func,\n  placeholder: _propTypes[\"default\"].string,\n  closeOnSelect: _propTypes[\"default\"].bool,\n  typeaheadPlaceholder: _propTypes[\"default\"].string,\n  DropdownHeaderComponent: _propTypes[\"default\"].func,\n  DropDownRenderComponent: _propTypes[\"default\"].func,\n  DropDownLineItemRenderComponent: _propTypes[\"default\"].func,\n  CustomChickletComponent: _propTypes[\"default\"].func\n});\n(0, _defineProperty2[\"default\"])(ItemSelector, \"defaultProps\", {\n  erasable: false,\n  showArrow: false,\n  placement: 'bottom',\n  selectedItems: [],\n  displayOption: null,\n  getOptionValue: null,\n  filterOption: null,\n  fixedOptions: null,\n  inputTheme: 'primary',\n  multiSelect: true,\n  placeholder: 'placeholder.enterValue',\n  closeOnSelect: true,\n  searchable: true,\n  dropdownHeader: null,\n  DropdownHeaderComponent: null,\n  DropDownRenderComponent: _dropdownList[\"default\"],\n  DropDownLineItemRenderComponent: _dropdownList.ListItem\n});\nvar ItemSelectorListen = (0, _reactOnclickoutside[\"default\"])(ItemSelector);\nexports.ItemSelectorListen = ItemSelectorListen;\nvar _default = (0, _reactIntl.injectIntl)((0, _reactOnclickoutside[\"default\"])(ItemSelector));\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../../src/components/common/item-selector/item-selector.js"],"names":["StyledDropdownSelect","div","attrs","className","props","inputTheme","theme","secondaryInput","inputLT","input","size","inputBoxHeightSmall","inputBoxHeight","dropdownListAnchor","DropdownSelectValue","styled","span","hasPlaceholder","selectColorPlaceHolderLT","selectColorPlaceHolder","selectColorLT","selectColor","dropdownListItemLT","dropdownListItem","dropdownListAnchorLT","DropdownSelectActionRight","subtextColor","textColor","DropdownWrapper","dropdownWrapperZ","placement","dropdownWapperMargin","ItemSelector","Component","selectedItems","PropTypes","oneOfType","array","string","number","bool","object","onChange","func","isRequired","options","arrayOf","any","fixedOptions","erasable","showArrow","displayOption","getOptionValue","filterOption","disabled","isError","multiSelect","onBlur","placeholder","closeOnSelect","typeaheadPlaceholder","DropdownHeaderComponent","DropDownRenderComponent","DropDownLineItemRenderComponent","CustomChickletComponent","searchable","dropdownHeader","DropdownList","ListItem","showTypeahead","_hideTypeahead","setState","_onBlur","item","e","preventDefault","stopPropagation","index","findIndex","t","items","slice","length","getValue","Accessor","generateOptionToStringFor","previousSelected","concat","intl","results","listItem","listAnchor","formatMessage","id","_selectItem","selected","hasValue","dropdownSelectProps","active","state","onClick","_showTypeahead","error","position","_removeItem","_onErase","_renderDropdown","ItemSelectorListen"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport uniqBy from 'lodash.uniqby';\nimport listensToClickOutside from 'react-onclickoutside';\nimport styled from 'styled-components';\n\nimport Accessor from './accessor';\nimport ChickletedInput from './chickleted-input';\nimport Typeahead from './typeahead';\nimport {Delete, ArrowDown} from 'components/common/icons';\nimport DropdownList, {ListItem} from './dropdown-list';\n\nimport {toArray} from 'utils/utils';\nimport {injectIntl} from 'react-intl';\nimport {FormattedMessage} from 'localization';\n\nexport const StyledDropdownSelect = styled.div.attrs({\n  className: 'item-selector__dropdown'\n})`\n  ${props =>\n    props.inputTheme === 'secondary'\n      ? props.theme.secondaryInput\n      : props.inputTheme === 'light'\n      ? props.theme.inputLT\n      : props.theme.input};\n\n  height: ${props =>\n    props.size === 'small' ? props.theme.inputBoxHeightSmall : props.theme.inputBoxHeight};\n\n  .list__item__anchor {\n    ${props => props.theme.dropdownListAnchor};\n  }\n`;\n\nconst DropdownSelectValue = styled.span`\n  color: ${props =>\n    props.hasPlaceholder && props.inputTheme === 'light'\n      ? props.theme.selectColorPlaceHolderLT\n      : props.hasPlaceholder\n      ? props.theme.selectColorPlaceHolder\n      : props.inputTheme === 'light'\n      ? props.theme.selectColorLT\n      : props.theme.selectColor};\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  .list__item {\n    ${props =>\n      props.inputTheme === 'light' ? props.theme.dropdownListItemLT : props.theme.dropdownListItem};\n  }\n\n  .list__item__anchor {\n    ${props =>\n      props.inputTheme === 'light'\n        ? props.theme.dropdownListAnchorLT\n        : props.theme.dropdownListAnchor};\n  }\n`;\n\nconst DropdownSelectActionRight = styled.div`\n  margin-right: 6px;\n  display: flex;\n  color: ${props => props.theme.subtextColor};\n\n  :hover {\n    color: ${props => props.theme.textColor};\n  }\n`;\n\nconst DropdownWrapper = styled.div`\n  border: 0;\n  width: 100%;\n  left: 0;\n  z-index: ${props => props.theme.dropdownWrapperZ};\n  position: absolute;\n  bottom: ${props => (props.placement === 'top' ? props.theme.inputBoxHeight : 'auto')};\n  margin-top: ${props =>\n    props.placement === 'bottom' ? `${props.theme.dropdownWapperMargin}px` : 'auto'};\n  margin-bottom: ${props =>\n    props.placement === 'top' ? `${props.theme.dropdownWapperMargin}px` : 'auto'};\n`;\n\nclass ItemSelector extends Component {\n  static propTypes = {\n    // required properties\n    selectedItems: PropTypes.oneOfType([\n      PropTypes.array,\n      PropTypes.string,\n      PropTypes.number,\n      PropTypes.bool,\n      PropTypes.object\n    ]),\n    onChange: PropTypes.func.isRequired,\n    options: PropTypes.arrayOf(PropTypes.any).isRequired,\n\n    // optional properties\n    fixedOptions: PropTypes.arrayOf(PropTypes.any),\n    erasable: PropTypes.bool,\n    showArrow: PropTypes.bool,\n    displayOption: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    getOptionValue: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    filterOption: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    placement: PropTypes.string,\n    disabled: PropTypes.bool,\n    isError: PropTypes.bool,\n    multiSelect: PropTypes.bool,\n    inputTheme: PropTypes.string,\n    onBlur: PropTypes.func,\n    placeholder: PropTypes.string,\n    closeOnSelect: PropTypes.bool,\n    typeaheadPlaceholder: PropTypes.string,\n    DropdownHeaderComponent: PropTypes.func,\n    DropDownRenderComponent: PropTypes.func,\n    DropDownLineItemRenderComponent: PropTypes.func,\n    CustomChickletComponent: PropTypes.func\n  };\n\n  static defaultProps = {\n    erasable: false,\n    showArrow: false,\n    placement: 'bottom',\n    selectedItems: [],\n    displayOption: null,\n    getOptionValue: null,\n    filterOption: null,\n    fixedOptions: null,\n    inputTheme: 'primary',\n    multiSelect: true,\n    placeholder: 'placeholder.enterValue',\n    closeOnSelect: true,\n    searchable: true,\n    dropdownHeader: null,\n    DropdownHeaderComponent: null,\n    DropDownRenderComponent: DropdownList,\n    DropDownLineItemRenderComponent: ListItem\n  };\n\n  state = {\n    showTypeahead: false\n  };\n\n  handleClickOutside = () => {\n    this._hideTypeahead();\n  };\n\n  _hideTypeahead() {\n    this.setState({showTypeahead: false});\n    this._onBlur();\n  }\n\n  _onBlur = () => {\n    // note: chickleted input is not a real form element so we call onBlur()\n    // when we feel the events are appropriate\n    if (this.props.onBlur) {\n      this.props.onBlur();\n    }\n  };\n\n  _removeItem = (item, e) => {\n    // only used when multiSelect = true\n    e.preventDefault();\n    e.stopPropagation();\n    const {selectedItems} = this.props;\n    const index = selectedItems.findIndex(t => t === item);\n\n    if (index < 0) {\n      return;\n    }\n\n    const items = [\n      ...selectedItems.slice(0, index),\n      ...selectedItems.slice(index + 1, selectedItems.length)\n    ];\n\n    this.props.onChange(items);\n\n    if (this.props.closeOnSelect) {\n      this.setState({showTypeahead: false});\n      this._onBlur();\n    }\n  };\n\n  _selectItem = item => {\n    const getValue = Accessor.generateOptionToStringFor(\n      this.props.getOptionValue || this.props.displayOption\n    );\n\n    const previousSelected = toArray(this.props.selectedItems);\n\n    if (this.props.multiSelect) {\n      const items = uniqBy(previousSelected.concat(toArray(item)), getValue);\n      this.props.onChange(items);\n    } else {\n      this.props.onChange(getValue(item));\n    }\n\n    if (this.props.closeOnSelect) {\n      this.setState({showTypeahead: false});\n      this._onBlur();\n    }\n  };\n\n  _onErase = e => {\n    e.stopPropagation();\n    this.props.onChange(null);\n  };\n\n  _showTypeahead = e => {\n    e.stopPropagation();\n    if (!this.props.disabled) {\n      this.setState({\n        showTypeahead: true\n      });\n    }\n  };\n\n  _renderDropdown(intl) {\n    return (\n      <DropdownWrapper placement={this.props.placement}>\n        <Typeahead\n          customClasses={{\n            results: 'list-selector',\n            input: 'typeahead__input',\n            listItem: 'list__item',\n            listAnchor: 'list__item__anchor'\n          }}\n          options={this.props.options}\n          filterOption={this.props.filterOption}\n          fixedOptions={this.props.fixedOptions}\n          placeholder={\n            this.props.typeaheadPlaceholder || intl\n              ? intl.formatMessage({id: 'placeholder.search'})\n              : 'Search'\n          }\n          onOptionSelected={this._selectItem}\n          customListComponent={this.props.DropDownRenderComponent}\n          customListHeaderComponent={this.props.DropdownHeaderComponent}\n          customListItemComponent={this.props.DropDownLineItemRenderComponent}\n          displayOption={Accessor.generateOptionToStringFor(this.props.displayOption)}\n          searchable={this.props.searchable}\n          showOptionsWhenEmpty\n          selectedItems={toArray(this.props.selectedItems)}\n          light={this.props.inputTheme === 'light'}\n        />\n      </DropdownWrapper>\n    );\n  }\n\n  render() {\n    const selected = toArray(this.props.selectedItems);\n    const hasValue = selected.length;\n    const displayOption = Accessor.generateOptionToStringFor(this.props.displayOption);\n\n    const dropdownSelectProps = {\n      className: classnames({\n        active: this.state.showTypeahead\n      }),\n      displayOption,\n      disabled: this.props.disabled,\n      onClick: this._showTypeahead,\n      error: this.props.isError,\n      inputTheme: this.props.inputTheme,\n      size: this.props.size\n    };\n    const intl = this.props.intl;\n\n    return (\n      <div className=\"item-selector\">\n        <div style={{position: 'relative'}}>\n          {/* this part is used to display the label */}\n          {this.props.multiSelect ? (\n            <ChickletedInput\n              {...dropdownSelectProps}\n              selectedItems={toArray(this.props.selectedItems)}\n              placeholder={this.props.placeholder}\n              removeItem={this._removeItem}\n              CustomChickletComponent={this.props.CustomChickletComponent}\n              inputTheme={this.props.inputTheme}\n            />\n          ) : (\n            <StyledDropdownSelect {...dropdownSelectProps}>\n              <DropdownSelectValue\n                hasPlaceholder={!hasValue}\n                inputTheme={this.props.inputTheme}\n                className=\"item-selector__dropdown__value\"\n              >\n                {hasValue ? (\n                  <this.props.DropDownLineItemRenderComponent\n                    displayOption={displayOption}\n                    value={selected[0]}\n                    light={this.props.inputTheme === 'light'}\n                  />\n                ) : (\n                  <FormattedMessage id={this.props.placeholder || 'placeholder.selectValue'} />\n                )}\n              </DropdownSelectValue>\n              {this.props.erasable && hasValue ? (\n                <DropdownSelectActionRight>\n                  <Delete height=\"12px\" onClick={this._onErase} />\n                </DropdownSelectActionRight>\n              ) : this.props.showArrow ? (\n                <DropdownSelectActionRight>\n                  <ArrowDown height=\"14px\" onClick={this._showTypeahead} />\n                </DropdownSelectActionRight>\n              ) : null}\n            </StyledDropdownSelect>\n          )}\n          {/* this part is used to built the list */}\n          {this.state.showTypeahead && this._renderDropdown(intl)}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const ItemSelectorListen = listensToClickOutside(ItemSelector);\nexport default injectIntl(listensToClickOutside(ItemSelector));\n"]},"metadata":{},"sourceType":"script"}