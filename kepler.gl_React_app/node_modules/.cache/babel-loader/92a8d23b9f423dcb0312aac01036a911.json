{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _loadingSpinner = _interopRequireDefault(require(\"./loading-spinner\"));\nvar _templateObject;\n\n/** @typedef {import('../../reducers/ui-state-updaters').ExportImage} ExportImage */\nvar StyledImagePreview = _styledComponents[\"default\"].div.attrs({\n  className: 'image-preview'\n})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  align-items: center;\\n  display: flex;\\n  flex-direction: column;\\n  flex: 1;\\n  justify-content: center;\\n  padding: 30px;\\n\\n  .dimension,\\n  .instruction {\\n    padding: 8px 0px;\\n  }\\n\\n  .preview-image {\\n    background: #e2e2e2;\\n    border-radius: 4px;\\n    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.18);\\n    width: 100%;\\n    position: relative;\\n  }\\n\\n  .preview-image-placeholder {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n  .preview-image-spinner {\\n    position: absolute;\\n    left: calc(50% - 25px);\\n    top: calc(50% - 25px);\\n  }\\n\\n  .preview-image--error {\\n    font-size: 12px;\\n    padding: 12px;\\n    color: \", \";\\n    text-align: center;\\n  }\\n\"])), function (props) {\n  return props.theme.errorColor;\n});\n/**\n * @param {object} props\n * @param {ExportImage} [props.exportImage]\n * @param {number} [props.width]\n * @param {boolean} [props.showDimension]\n */\n\nvar ImagePreview = function ImagePreview(_ref) {\n  var exportImage = _ref.exportImage,\n    _ref$width = _ref.width,\n    width = _ref$width === void 0 ? 400 : _ref$width,\n    _ref$showDimension = _ref.showDimension,\n    showDimension = _ref$showDimension === void 0 ? false : _ref$showDimension;\n  var _ref2 = exportImage || {},\n    error = _ref2.error,\n    imageDataUri = _ref2.imageDataUri,\n    processing = _ref2.processing,\n    _ref2$imageSize = _ref2.imageSize;\n  _ref2$imageSize = _ref2$imageSize === void 0 ? {} : _ref2$imageSize;\n  var _ref2$imageSize$image = _ref2$imageSize.imageW,\n    imageW = _ref2$imageSize$image === void 0 ? 0 : _ref2$imageSize$image,\n    _ref2$imageSize$image2 = _ref2$imageSize.imageH,\n    imageH = _ref2$imageSize$image2 === void 0 ? 0 : _ref2$imageSize$image2;\n  var imageStyle = {\n    width: \"\".concat(width, \"px\"),\n    height: \"\".concat(imageH / (imageW || 1) * width, \"px\")\n  };\n  return /*#__PURE__*/_react[\"default\"].createElement(StyledImagePreview, null, showDimension ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"dimension\"\n  }, imageW, \" pixel x \", imageH, \" pixel\") : null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"preview-image\",\n    style: imageStyle\n  }, processing ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"preview-image-spinner\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_loadingSpinner[\"default\"], null)) : error ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"preview-image--error\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, error.message || 'Generate map image failed!')) : /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n    className: \"preview-image-placeholder\",\n    src: imageDataUri\n  })));\n};\nvar _default = ImagePreview;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../src/components/common/image-preview.js"],"names":["StyledImagePreview","div","attrs","className","props","theme","errorColor","ImagePreview","exportImage","width","showDimension","error","imageDataUri","processing","imageSize","imageW","imageH","imageStyle","height","message"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport LoadingSpinner from 'components/common/loading-spinner';\n\n/** @typedef {import('../../reducers/ui-state-updaters').ExportImage} ExportImage */\n\nconst StyledImagePreview = styled.div.attrs({\n  className: 'image-preview'\n})`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  justify-content: center;\n  padding: 30px;\n\n  .dimension,\n  .instruction {\n    padding: 8px 0px;\n  }\n\n  .preview-image {\n    background: #e2e2e2;\n    border-radius: 4px;\n    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.18);\n    width: 100%;\n    position: relative;\n  }\n\n  .preview-image-placeholder {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  .preview-image-spinner {\n    position: absolute;\n    left: calc(50% - 25px);\n    top: calc(50% - 25px);\n  }\n\n  .preview-image--error {\n    font-size: 12px;\n    padding: 12px;\n    color: ${props => props.theme.errorColor};\n    text-align: center;\n  }\n`;\n\n/**\n * @param {object} props\n * @param {ExportImage} [props.exportImage]\n * @param {number} [props.width]\n * @param {boolean} [props.showDimension]\n */\nconst ImagePreview = ({exportImage, width = 400, showDimension = false}) => {\n  const {error, imageDataUri, processing, imageSize: {imageW = 0, imageH = 0} = {}} =\n    exportImage || {};\n\n  const imageStyle = {\n    width: `${width}px`,\n    height: `${(imageH / (imageW || 1)) * width}px`\n  };\n\n  return (\n    <StyledImagePreview>\n      {showDimension ? (\n        <div className=\"dimension\">\n          {imageW} pixel x {imageH} pixel\n        </div>\n      ) : null}\n      <div className=\"preview-image\" style={imageStyle}>\n        {processing ? (\n          <div className=\"preview-image-spinner\">\n            <LoadingSpinner />\n          </div>\n        ) : error ? (\n          <div className=\"preview-image--error\">\n            <span>{error.message || 'Generate map image failed!'}</span>\n          </div>\n        ) : (\n          <img className=\"preview-image-placeholder\" src={imageDataUri} />\n        )}\n      </div>\n    </StyledImagePreview>\n  );\n};\n\nexport default ImagePreview;\n"]},"metadata":{},"sourceType":"script"}