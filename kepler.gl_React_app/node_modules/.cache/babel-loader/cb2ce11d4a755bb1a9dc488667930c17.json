{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _layerConfigurator = _interopRequireDefault(require(\"./layer-configurator\"));\nvar _layerPanelHeader = _interopRequireDefault(require(\"./layer-panel-header\"));\nvar _templateObject;\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar PanelWrapper = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  font-size: 12px;\\n  border-radius: 1px;\\n  margin-bottom: 8px;\\n  z-index: 1000;\\n\\n  &.dragging {\\n    cursor: move;\\n  }\\n\"])));\nLayerPanelFactory.deps = [_layerConfigurator[\"default\"], _layerPanelHeader[\"default\"]];\nfunction LayerPanelFactory(LayerConfigurator, LayerPanelHeader) {\n  var LayerPanel = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(LayerPanel, _Component);\n    var _super = _createSuper(LayerPanel);\n    function LayerPanel() {\n      var _this;\n      (0, _classCallCheck2[\"default\"])(this, LayerPanel);\n      for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n        _args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(_args));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"updateLayerConfig\", function (newProp) {\n        _this.props.layerConfigChange(_this.props.layer, newProp);\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"updateLayerType\", function (newType) {\n        _this.props.layerTypeChange(_this.props.layer, newType);\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"updateLayerVisConfig\", function (newVisConfig) {\n        _this.props.layerVisConfigChange(_this.props.layer, newVisConfig);\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"updateLayerColorUI\", function () {\n        var _this$props;\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        (_this$props = _this.props).layerColorUIChange.apply(_this$props, [_this.props.layer].concat(args));\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"updateLayerTextLabel\", function () {\n        var _this$props2;\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n        (_this$props2 = _this.props).layerTextLabelChange.apply(_this$props2, [_this.props.layer].concat(args));\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"updateLayerVisualChannelConfig\", function (newConfig, channel, scaleKey) {\n        _this.props.layerVisualChannelConfigChange(_this.props.layer, newConfig, channel, scaleKey);\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_updateLayerLabel\", function (_ref) {\n        var value = _ref.target.value;\n        _this.updateLayerConfig({\n          label: value\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_toggleVisibility\", function (e) {\n        e.stopPropagation();\n        var isVisible = !_this.props.layer.config.isVisible;\n        _this.updateLayerConfig({\n          isVisible: isVisible\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_toggleEnableConfig\", function (e) {\n        e.stopPropagation();\n        var isConfigActive = _this.props.layer.config.isConfigActive;\n        _this.updateLayerConfig({\n          isConfigActive: !isConfigActive\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_removeLayer\", function (e) {\n        e.stopPropagation();\n        _this.props.removeLayer(_this.props.idx);\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_duplicateLayer\", function (e) {\n        e.stopPropagation();\n        _this.props.duplicateLayer(_this.props.idx);\n      });\n      return _this;\n    }\n    (0, _createClass2[\"default\"])(LayerPanel, [{\n      key: \"render\",\n      value: function render() {\n        var _this$props3 = this.props,\n          layer = _this$props3.layer,\n          datasets = _this$props3.datasets,\n          layerTypeOptions = _this$props3.layerTypeOptions;\n        var config = layer.config;\n        var isConfigActive = config.isConfigActive;\n        return /*#__PURE__*/_react[\"default\"].createElement(PanelWrapper, {\n          active: isConfigActive,\n          className: \"layer-panel \".concat(this.props.className),\n          style: this.props.style,\n          onMouseDown: this.props.onMouseDown,\n          onTouchStart: this.props.onTouchStart\n        }, /*#__PURE__*/_react[\"default\"].createElement(LayerPanelHeader, {\n          isConfigActive: isConfigActive,\n          layerId: layer.id,\n          isVisible: config.isVisible,\n          label: config.label,\n          labelRCGColorValues: config.dataId ? datasets[config.dataId].color : null,\n          layerType: layer.type,\n          onToggleEnableConfig: this._toggleEnableConfig,\n          onToggleVisibility: this._toggleVisibility,\n          onUpdateLayerLabel: this._updateLayerLabel,\n          onRemoveLayer: this._removeLayer,\n          onDuplicateLayer: this._duplicateLayer\n        }), isConfigActive && /*#__PURE__*/_react[\"default\"].createElement(LayerConfigurator, {\n          layer: layer,\n          datasets: datasets,\n          layerTypeOptions: layerTypeOptions,\n          openModal: this.props.openModal,\n          updateLayerColorUI: this.updateLayerColorUI,\n          updateLayerConfig: this.updateLayerConfig,\n          updateLayerVisualChannelConfig: this.updateLayerVisualChannelConfig,\n          updateLayerType: this.updateLayerType,\n          updateLayerTextLabel: this.updateLayerTextLabel,\n          updateLayerVisConfig: this.updateLayerVisConfig\n        }));\n      }\n    }]);\n    return LayerPanel;\n  }(_react.Component);\n  (0, _defineProperty2[\"default\"])(LayerPanel, \"propTypes\", {\n    layer: _propTypes[\"default\"].object.isRequired,\n    datasets: _propTypes[\"default\"].object.isRequired,\n    idx: _propTypes[\"default\"].number.isRequired,\n    layerConfigChange: _propTypes[\"default\"].func.isRequired,\n    layerTypeChange: _propTypes[\"default\"].func.isRequired,\n    openModal: _propTypes[\"default\"].func.isRequired,\n    removeLayer: _propTypes[\"default\"].func.isRequired,\n    duplicateLayer: _propTypes[\"default\"].func.isRequired,\n    onCloseConfig: _propTypes[\"default\"].func,\n    layerTypeOptions: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].any),\n    layerVisConfigChange: _propTypes[\"default\"].func.isRequired,\n    layerVisualChannelConfigChange: _propTypes[\"default\"].func.isRequired,\n    layerColorUIChange: _propTypes[\"default\"].func.isRequired,\n    setLayerAnimationTime: _propTypes[\"default\"].func,\n    updateLayerAnimationSpeed: _propTypes[\"default\"].func\n  });\n  return LayerPanel;\n}\nvar _default = LayerPanelFactory;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../../../src/components/side-panel/layer-panel/layer-panel.js"],"names":["PanelWrapper","styled","div","LayerPanelFactory","deps","LayerConfiguratorFactory","LayerPanelHeaderFactory","LayerConfigurator","LayerPanelHeader","LayerPanel","Component","layer","PropTypes","object","isRequired","datasets","idx","number","layerConfigChange","func","layerTypeChange","openModal","removeLayer","duplicateLayer","onCloseConfig","layerTypeOptions","arrayOf","any","layerVisConfigChange","layerVisualChannelConfigChange","layerColorUIChange","setLayerAnimationTime","updateLayerAnimationSpeed","props","newProp","newType","newVisConfig","args","layerTextLabelChange","newConfig","channel","scaleKey","target","value","updateLayerConfig","label","e","stopPropagation","isVisible","config","isConfigActive","className","style","onMouseDown","onTouchStart","id","dataId","color","type","_toggleEnableConfig","_toggleVisibility","_updateLayerLabel","_removeLayer","_duplicateLayer","updateLayerColorUI","updateLayerVisualChannelConfig","updateLayerType","updateLayerTextLabel","updateLayerVisConfig"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component} from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\n\nimport LayerConfiguratorFactory from './layer-configurator';\nimport LayerPanelHeaderFactory from './layer-panel-header';\n\nconst PanelWrapper = styled.div`\n  font-size: 12px;\n  border-radius: 1px;\n  margin-bottom: 8px;\n  z-index: 1000;\n\n  &.dragging {\n    cursor: move;\n  }\n`;\n\nLayerPanelFactory.deps = [LayerConfiguratorFactory, LayerPanelHeaderFactory];\n\nfunction LayerPanelFactory(LayerConfigurator, LayerPanelHeader) {\n  class LayerPanel extends Component {\n    static propTypes = {\n      layer: PropTypes.object.isRequired,\n      datasets: PropTypes.object.isRequired,\n      idx: PropTypes.number.isRequired,\n      layerConfigChange: PropTypes.func.isRequired,\n      layerTypeChange: PropTypes.func.isRequired,\n      openModal: PropTypes.func.isRequired,\n      removeLayer: PropTypes.func.isRequired,\n      duplicateLayer: PropTypes.func.isRequired,\n      onCloseConfig: PropTypes.func,\n      layerTypeOptions: PropTypes.arrayOf(PropTypes.any),\n      layerVisConfigChange: PropTypes.func.isRequired,\n      layerVisualChannelConfigChange: PropTypes.func.isRequired,\n      layerColorUIChange: PropTypes.func.isRequired,\n      setLayerAnimationTime: PropTypes.func,\n      updateLayerAnimationSpeed: PropTypes.func\n    };\n\n    updateLayerConfig = newProp => {\n      this.props.layerConfigChange(this.props.layer, newProp);\n    };\n\n    updateLayerType = newType => {\n      this.props.layerTypeChange(this.props.layer, newType);\n    };\n\n    updateLayerVisConfig = newVisConfig => {\n      this.props.layerVisConfigChange(this.props.layer, newVisConfig);\n    };\n\n    updateLayerColorUI = (...args) => {\n      this.props.layerColorUIChange(this.props.layer, ...args);\n    };\n\n    updateLayerTextLabel = (...args) => {\n      this.props.layerTextLabelChange(this.props.layer, ...args);\n    };\n\n    updateLayerVisualChannelConfig = (newConfig, channel, scaleKey) => {\n      this.props.layerVisualChannelConfigChange(this.props.layer, newConfig, channel, scaleKey);\n    };\n\n    _updateLayerLabel = ({target: {value}}) => {\n      this.updateLayerConfig({label: value});\n    };\n\n    _toggleVisibility = e => {\n      e.stopPropagation();\n      const isVisible = !this.props.layer.config.isVisible;\n      this.updateLayerConfig({isVisible});\n    };\n\n    _toggleEnableConfig = e => {\n      e.stopPropagation();\n      const {\n        layer: {\n          config: {isConfigActive}\n        }\n      } = this.props;\n      this.updateLayerConfig({isConfigActive: !isConfigActive});\n    };\n\n    _removeLayer = e => {\n      e.stopPropagation();\n      this.props.removeLayer(this.props.idx);\n    };\n\n    _duplicateLayer = e => {\n      e.stopPropagation();\n      this.props.duplicateLayer(this.props.idx);\n    };\n\n    render() {\n      const {layer, datasets, layerTypeOptions} = this.props;\n      const {config} = layer;\n      const {isConfigActive} = config;\n\n      return (\n        <PanelWrapper\n          active={isConfigActive}\n          className={`layer-panel ${this.props.className}`}\n          style={this.props.style}\n          onMouseDown={this.props.onMouseDown}\n          onTouchStart={this.props.onTouchStart}\n        >\n          <LayerPanelHeader\n            isConfigActive={isConfigActive}\n            layerId={layer.id}\n            isVisible={config.isVisible}\n            label={config.label}\n            labelRCGColorValues={config.dataId ? datasets[config.dataId].color : null}\n            layerType={layer.type}\n            onToggleEnableConfig={this._toggleEnableConfig}\n            onToggleVisibility={this._toggleVisibility}\n            onUpdateLayerLabel={this._updateLayerLabel}\n            onRemoveLayer={this._removeLayer}\n            onDuplicateLayer={this._duplicateLayer}\n          />\n          {isConfigActive && (\n            <LayerConfigurator\n              layer={layer}\n              datasets={datasets}\n              layerTypeOptions={layerTypeOptions}\n              openModal={this.props.openModal}\n              updateLayerColorUI={this.updateLayerColorUI}\n              updateLayerConfig={this.updateLayerConfig}\n              updateLayerVisualChannelConfig={this.updateLayerVisualChannelConfig}\n              updateLayerType={this.updateLayerType}\n              updateLayerTextLabel={this.updateLayerTextLabel}\n              updateLayerVisConfig={this.updateLayerVisConfig}\n            />\n          )}\n        </PanelWrapper>\n      );\n    }\n  }\n\n  return LayerPanel;\n}\n\nexport default LayerPanelFactory;\n"]},"metadata":{},"sourceType":"script"}